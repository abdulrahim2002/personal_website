[{"content":"Introduction RAG (Retrieval-Augmented Generation) is a technique where a model can generate text based on external information retrieved from a knowledge base, rather than relying solely on its pre-trained knowledge.\nThe knowledge base is a collection of documents\n$$ D = { d_1, d_2, \\dots, d_n } $$\nsuch that, whenever text is generated, the information is based on the knowledge base as much as possible.\nThere are two components to a RAG model:\nRetriever: Given a query $$q$$, the retriever finds all documents $$d \\in D$$ that may be relevant to the query $$q$$. Generator: This is the text generation system‚Äîtypically a large language model (like GPT)‚Äîthat actually generates text given a prompt. How It Works Training Phase (for RAG Retriever only): During training, the retriever learns to retrieve relevant documents or information from a knowledge base. There are various available datasets. You can also use tools like FAISS, ElasticSearch, or a pre-trained retrieval model like a Dense Retriever.\nInference Phase (for RAG models): Inference involves using a pre-trained model to generate responses. The model performs two key steps during inference:\nRetrieval: It pulls in external documents or information from a knowledge base or database. This could be a search engine, vector store, or large document corpus. Generation: The model then uses the retrieved information to generate a more accurate and context-aware response. Training the Retriever The process for training a retrieval model generally involves these key steps:\nPrepare the Dataset: Before training a retriever, you\u0026rsquo;ll need:\nA large document corpus (e.g., all Wikipedia articles, a collection of articles, or PDF files). This acts as our knowledge base $$D$$. A query-document pair dataset containing queries and their corresponding relevant documents. This is crucial for training a retrieval model. Example:\nQuery: \u0026ldquo;What is the capital of France?\u0026rdquo; Document: \u0026quot;\u0026hellip;The capital of France is Paris\u0026hellip;\u0026quot; (content of the document) You might use datasets such as MS MARCO or TREC. Choose a Retrieval Model: There are different types of retrieval models you can use. Common ones include:\nTF-IDF (Term Frequency‚ÄìInverse Document Frequency): Represents queries and documents as word vectors and computes similarity (often using cosine similarity). Dense Retrieval Models: Use deep learning to create dense vector representations of both queries and documents. Examples include: DPR (Dense Passage Retrieval): A two-tower model (one for queries, one for documents) using neural networks to map queries and documents into vector spaces, then measuring similarity between the vectors. ColBERT (Contextualized Late Interaction Retrieval): Uses BERT embeddings for dense retrieval, offering a trade-off between efficiency and accuracy. T5, BERT, or other Transformer-based Models: These can be fine-tuned for retrieval tasks and trained to map documents and queries into a shared vector space. Retrieve Top-$k$ Similar Documents: The retriever should be able to fetch the top-$$k$$ most similar documents $$d \\in D$$.\nUseful Libraries:\nExamples include FAISS, Anserini/Pyserini, and DPR (from Hugging Face).\nHow to Make the Generated Text Cite Retrieved or Context Documents Once the documents have been retrieved, they are inserted into the prompt as string input and assigned unique labels (e.g., doc1, doc2, etc.). In the system prompt, you can instruct the model to base its responses on the given context and provide citations where possible.\nThis process works as follows:\nStep 1: User Query Query:\n1 What are the symptoms of iron deficiency? Step 2: Retriever Fetches Relevant Documents 1 2 Doc 1: \u0026#34;Iron deficiency symptoms include fatigue, pale skin, dizziness...\u0026#34; Doc 2: \u0026#34;Common signs are weakness, shortness of breath, and headaches...\u0026#34; Step 3: Construct the Prompt 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 SYSTEM: You are a helpful assistant. Answer the question using only the provided context. When you state a fact, cite the source document using [DocX]. If the answer is not in the context, say \u0026#34;Not found in provided documents.\u0026#34; CONTEXT: Iron deficiency symptoms include fatigue, pale skin, dizziness... Common signs are weakness, shortness of breath, and headaches... USER: What are the symptoms of iron deficiency? Step 4: Generated Output 1 2 Iron deficiency can cause fatigue and pale skin [Doc1]. It may also lead to weakness and headaches [Doc2]. Finally, you can hyperlink citations in the user interface to link back to their original documents‚Äîsimilar to how Perplexity AI handles cited answers.\n","permalink":"http://localhost:1313/personal_website/posts/how_does_retrieval_augmented_generation_work/","summary":"\u003ch3 id=\"introduction\"\u003eIntroduction\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eRAG (Retrieval-Augmented Generation)\u003c/strong\u003e is a technique where a model\ncan generate text based on external information retrieved from a\nknowledge base, rather than relying solely on its pre-trained knowledge.\u003c/p\u003e\n\u003cp\u003eThe knowledge base is a collection of documents\u003c/p\u003e\n\u003cp\u003e$$\nD = { d_1, d_2, \\dots, d_n }\n$$\u003c/p\u003e\n\u003cp\u003esuch that, whenever text is generated, the information is based on the\nknowledge base as much as possible.\u003c/p\u003e\n\u003cp\u003eThere are two components to a RAG model:\u003c/p\u003e","title":"How Does Retrieval Augmented Generation Work"},{"content":"üéì PyTorch CNN Explained from Scratch - Step by Step I\u0026rsquo;ll explain everything from the absolute basics. No prior PyTorch knowledge required!\nüìö Part 1: The Absolute Basics - Understanding the Pieces 1.1 What is a CNN? A Convolutional Neural Network (CNN) is like a detective that:\nScans an image with small filters to find patterns (edges, textures) Combines these patterns to recognize objects Learns which patterns are important for classification Analogy: Imagine looking for a face in a crowd:\nFirst, you look for eyes (small patterns) Then, you combine eyes+nose+mouth to find faces Finally, you recognize whose face it is 1.2 Core Components 1.2.1 Images in Computers 1 2 3 4 5 6 7 # An image is just a 3D array of numbers # Shape: [Channels, Height, Width] # Channels: 1 for grayscale, 3 for color (RGB) # Example: A 28x28 grayscale MNIST digit image = torch.randn(1, 28, 28) # 1 channel, 28 height, 28 width print(f\u0026#34;Image shape: {image.shape}\u0026#34;) 1.2.2 Convolution Operation 1 2 3 4 5 6 7 8 9 10 11 12 13 # A filter is like a magnifying glass that slides over the image # It multiplies numbers and sums them up # Example: Edge detection filter filter_3x3 = torch.tensor([ [-1, -1, -1], [-1, 8, -1], [-1, -1, -1] ]) # When this slides over an image: # It gives high values where there are edges (sudden changes) # It gives low values where the image is smooth 1.3 PyTorch Basics - The Building Blocks 1 2 3 4 5 6 7 8 9 10 11 12 13 import torch import torch.nn as nn # Neural network modules import torch.nn.functional as F # Functions like ReLU, softmax # PyTorch works with TENSORS (fancy arrays) x = torch.tensor([[1, 2], [3, 4]]) # Create a 2x2 tensor print(f\u0026#34;Tensor shape: {x.shape}\u0026#34;) print(f\u0026#34;Tensor values:\\n{x}\u0026#34;) # Neural Network Layer layer = nn.Linear(in_features=10, out_features=5) # This creates: output = weight * input + bias # weight shape: [5, 10], bias shape: [5] üèóÔ∏è Part 2: Building a CNN Layer by Layer Let\u0026rsquo;s build the simplest possible CNN and understand each part.\n2.1 The Complete Simple CNN - Explained Line by Line 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 class SimpleCNN(nn.Module): def __init__(self): super(SimpleCNN, self).__init__() # Must call this first # ----- LAYER 1: First Convolution ----- # What it does: Looks for simple patterns (edges, corners) self.conv1 = nn.Conv2d( in_channels=1, # Input has 1 channel (grayscale) out_channels=4, # We want 4 different filters kernel_size=3, # Filter is 3x3 pixels padding=1 # Add 1 pixel border to keep same size ) # After this layer: [batch, 1, 28, 28] ‚Üí [batch, 4, 28, 28] # ----- POOLING LAYER ----- # What it does: Makes image smaller, keeps only important info self.pool = nn.MaxPool2d( kernel_size=2, # Look at 2x2 blocks stride=2 # Move 2 pixels each time ) # After pooling: [batch, 4, 28, 28] ‚Üí [batch, 4, 14, 14] # Takes maximum value from each 2x2 block (downsamples) # ----- LAYER 2: Second Convolution ----- # What it does: Looks for more complex patterns (combinations of edges) self.conv2 = nn.Conv2d( in_channels=4, # Input has 4 channels (from previous layer) out_channels=8, # We want 8 different filters kernel_size=3, # Filter is 3x3 padding=1 # Keep same size ) # After: [batch, 4, 14, 14] ‚Üí [batch, 8, 14, 14] # After pooling: [batch, 8, 14, 14] ‚Üí [batch, 8, 7, 7] # ----- FLATTEN LAYER (not really a layer, just reshaping) ----- # What it does: Converts 3D feature maps to 1D vector # [batch, 8, 7, 7] ‚Üí [batch, 8 * 7 * 7] = [batch, 392] # ----- FULLY CONNECTED LAYER 1 ----- # What it does: Combines all features to make decisions self.fc1 = nn.Linear( in_features=8 * 7 * 7, # 392 features from conv layers out_features=64 # 64 neurons in this layer ) # ----- FINAL CLASSIFICATION LAYER ----- # What it does: Decides which digit it is (0-9) self.fc2 = nn.Linear( in_features=64, # From previous layer out_features=10 # 10 classes (digits 0-9) ) def forward(self, x): \u0026#34;\u0026#34;\u0026#34;This defines HOW data flows through the network\u0026#34;\u0026#34;\u0026#34; # x shape starts as: [batch_size, 1, 28, 28] # Step 1: First convolution + activation + pooling x = self.pool(F.relu(self.conv1(x))) # ReLU: Makes negative values 0, keeps positives # Example: ReLU([-2, 0, 5]) = [0, 0, 5] # Step 2: Second convolution + activation + pooling x = self.pool(F.relu(self.conv2(x))) # Step 3: Flatten (3D ‚Üí 1D) x = x.view(-1, 8 * 7 * 7) # -1 means \u0026#34;figure out batch size automatically\u0026#34; # Step 4: First fully connected layer + activation x = F.relu(self.fc1(x)) # Step 5: Final classification (no activation here - will add softmax later) x = self.fc2(x) return x 2.2 Let\u0026rsquo;s Visualize What Happens Step by Step 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 # Create a mini network to see shapes mini_cnn = SimpleCNN() # Create a fake \u0026#34;batch\u0026#34; of 2 images batch_size = 2 fake_images = torch.randn(batch_size, 1, 28, 28) # [2, 1, 28, 28] print(f\u0026#34;Input shape: {fake_images.shape}\u0026#34;) # Let\u0026#39;s trace through manually print(\u0026#34;\\n=== Tracing the CNN ===\u0026#34;) # After conv1 x = mini_cnn.conv1(fake_images) print(f\u0026#34;After conv1: {x.shape}\u0026#34;) # [2, 4, 28, 28] # After ReLU (just changes values, not shape) x = F.relu(x) print(f\u0026#34;After ReLU: {x.shape}\u0026#34;) # Still [2, 4, 28, 28] # After pooling (makes it smaller) x = mini_cnn.pool(x) print(f\u0026#34;After pool: {x.shape}\u0026#34;) # [2, 4, 14, 14] - HALF the size! # After conv2 x = mini_cnn.conv2(x) print(f\u0026#34;After conv2: {x.shape}\u0026#34;) # [2, 8, 14, 14] # After pooling again x = mini_cnn.pool(x) print(f\u0026#34;After pool2: {x.shape}\u0026#34;) # [2, 8, 7, 7] # Flatten x = x.view(batch_size, -1) # -1 means \u0026#34;figure out this dimension\u0026#34; print(f\u0026#34;After flatten: {x.shape}\u0026#34;) # [2, 392] (8*7*7 = 392) # Through fc1 x = mini_cnn.fc1(x) print(f\u0026#34;After fc1: {x.shape}\u0026#34;) # [2, 64] # Through fc2 (final output) x = mini_cnn.fc2(x) print(f\u0026#34;After fc2 (final): {x.shape}\u0026#34;) # [2, 10] üéØ Part 3: The Complete Training Process - Explained 3.1 What Does Training Actually Mean? Training = Adjusting the numbers (weights) in the filters to make better predictions\nThink of it like tuning a radio:\nInitial random weights = static noise Training = turning the dial to get clear signal Good weights = clear reception 3.2 The Training Loop - Step by Step 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 # Simplified training example def simple_train(): # 1. CREATE MODEL model = SimpleCNN() # 2. LOSS FUNCTION - Measures how wrong we are criterion = nn.CrossEntropyLoss() # What it does: Compares predictions [0.1, 0.8, 0.1] with true label [0, 1, 0] # Returns a single number: lower is better # 3. OPTIMIZER - Adjusts the weights optimizer = torch.optim.Adam(model.parameters(), lr=0.001) # Adam: Smart gradient descent # lr=0.001: How big of steps to take when adjusting weights # 4. CREATE FAKE DATA (for demonstration) batch_size = 4 images = torch.randn(batch_size, 1, 28, 28) # Random images labels = torch.tensor([3, 7, 2, 9]) # Random labels (digits 0-9) print(f\u0026#34;Images shape: {images.shape}\u0026#34;) print(f\u0026#34;Labels: {labels}\u0026#34;) # 5. ONE TRAINING STEP - Explained print(\u0026#34;\\n=== ONE TRAINING STEP ===\u0026#34;) # Step A: Zero gradients (very important!) optimizer.zero_grad() # Why: PyTorch accumulates gradients. We need to reset them each step. # Step B: Forward pass (make prediction) outputs = model(images) print(f\u0026#34;Raw outputs shape: {outputs.shape}\u0026#34;) # [4, 10] print(f\u0026#34;Sample output: {outputs[0]}\u0026#34;) # Step C: Calculate loss (how wrong are we?) loss = criterion(outputs, labels) print(f\u0026#34;Loss: {loss.item():.4f}\u0026#34;) # Step D: Backward pass (figure out what to adjust) loss.backward() # This calculates gradients: ‚àÇloss/‚àÇweight for EVERY weight # Step E: Update weights (actually adjust them) optimizer.step() # This does: weight = weight - lr * gradient print(\u0026#34;Weights have been updated! Model learned a little.\u0026#34;) return model # Run it model = simple_train() 3.3 What Happens During Backpropagation? 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 # Visual explanation of gradients def explain_gradients(): model = SimpleCNN() # Get one weight from the first convolution filter weight_before = model.conv1.weight[0, 0, 0, 0].item() print(f\u0026#34;One weight before training: {weight_before:.6f}\u0026#34;) # Do one training step optimizer = torch.optim.Adam(model.parameters(), lr=0.01) criterion = nn.CrossEntropyLoss() # Fake training images = torch.randn(1, 1, 28, 28) labels = torch.tensor([5]) optimizer.zero_grad() outputs = model(images) loss = criterion(outputs, labels) loss.backward() # Look at the gradient for that weight gradient = model.conv1.weight.grad[0, 0, 0, 0].item() print(f\u0026#34;Gradient for that weight: {gradient:.6f}\u0026#34;) print(\u0026#34;This tells us: Should we increase or decrease this weight?\u0026#34;) print(f\u0026#34;Positive gradient ‚Üí Decrease weight\u0026#34;) print(f\u0026#34;Negative gradient ‚Üí Increase weight\u0026#34;) # Update weights optimizer.step() weight_after = model.conv1.weight[0, 0, 0, 0].item() print(f\u0026#34;Same weight after training: {weight_after:.6f}\u0026#34;) print(f\u0026#34;Change: {weight_after - weight_before:.6f}\u0026#34;) explain_gradients() üìä Part 4: Data Loading and Preparation 4.1 Understanding Datasets and DataLoaders 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 from torch.utils.data import Dataset, DataLoader import torchvision.transforms as transforms # A Dataset is like a list of (image, label) pairs # A DataLoader gives you batches of data class SimpleDataset(Dataset): \u0026#34;\u0026#34;\u0026#34;Create your own dataset (for understanding)\u0026#34;\u0026#34;\u0026#34; def __init__(self, num_samples=100): # Create fake data self.images = torch.randn(num_samples, 1, 28, 28) # Random images self.labels = torch.randint(0, 10, (num_samples,)) # Random labels 0-9 def __len__(self): return len(self.images) # How many samples we have def __getitem__(self, idx): return self.images[idx], self.labels[idx] # Get one sample # Create dataset dataset = SimpleDataset(100) print(f\u0026#34;Dataset has {len(dataset)} samples\u0026#34;) # Create DataLoader dataloader = DataLoader( dataset, batch_size=10, # Give me 10 samples at a time shuffle=True, # Mix them up randomly num_workers=0 # Don\u0026#39;t use multiple CPU cores (for simplicity) ) # See what a batch looks like for batch_idx, (images, labels) in enumerate(dataloader): print(f\u0026#34;\\nBatch {batch_idx}:\u0026#34;) print(f\u0026#34; Images shape: {images.shape}\u0026#34;) # [10, 1, 28, 28] print(f\u0026#34; Labels: {labels}\u0026#34;) # [10] if batch_idx == 2: # Just look at first 3 batches break 4.2 Real MNIST Data 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 def load_real_mnist(): \u0026#34;\u0026#34;\u0026#34;Load actual MNIST digits\u0026#34;\u0026#34;\u0026#34; transform = transforms.Compose([ transforms.ToTensor(), # Convert PIL image to tensor transforms.Normalize((0.1307,), (0.3081,)) # Standardize ]) # Download MNIST train_dataset = torchvision.datasets.MNIST( root=\u0026#39;./data\u0026#39;, train=True, download=True, transform=transform ) print(f\u0026#34;MNIST has {len(train_dataset)} training images\u0026#34;) # Look at one sample image, label = train_dataset[0] print(f\u0026#34;\\nFirst sample:\u0026#34;) print(f\u0026#34; Image shape: {image.shape}\u0026#34;) # [1, 28, 28] print(f\u0026#34; Label: {label}\u0026#34;) # e.g., 5 print(f\u0026#34; Image min/max: {image.min():.3f}, {image.max():.3f}\u0026#34;) # Show the image plt.imshow(image.squeeze(), cmap=\u0026#39;gray\u0026#39;) plt.title(f\u0026#34;Label: {label}\u0026#34;) plt.show() return train_dataset # Uncomment to run # train_dataset = load_real_mnist() üöÄ Part 5: Complete Working Example - Run This First! Here\u0026rsquo;s the simplest complete CNN you can run:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 import torch import torch.nn as nn import torch.nn.functional as F import torch.optim as optim import matplotlib.pyplot as plt import numpy as np # Set random seeds for reproducibility torch.manual_seed(42) np.random.seed(42) # ========== 1. DEFINE THE SIMPLEST CNN ========== class TinyCNN(nn.Module): \u0026#34;\u0026#34;\u0026#34;The smallest possible CNN to understand\u0026#34;\u0026#34;\u0026#34; def __init__(self): super().__init__() # Layer 1: Simple convolution self.conv = nn.Conv2d(1, 3, kernel_size=3, padding=1) # 3 filters # Layer 2: Classification self.fc = nn.Linear(3 * 28 * 28, 10) # 10 classes for digits def forward(self, x): # Apply convolution x = F.relu(self.conv(x)) # Flatten x = x.view(x.size(0), -1) # Flatten all dimensions except batch # Classify x = self.fc(x) return x # ========== 2. CREATE FAKE DATA ========== def create_fake_data(num_samples=100): \u0026#34;\u0026#34;\u0026#34;Create simple fake data for testing\u0026#34;\u0026#34;\u0026#34; # Create random \u0026#34;images\u0026#34; images = torch.randn(num_samples, 1, 28, 28) # Like MNIST digits # Create random labels (0-9) labels = torch.randint(0, 10, (num_samples,)) return images, labels # ========== 3. TRAIN FUNCTION ========== def train_one_epoch(model, images, labels): \u0026#34;\u0026#34;\u0026#34;Train for one epoch (one pass through data)\u0026#34;\u0026#34;\u0026#34; criterion = nn.CrossEntropyLoss() optimizer = optim.SGD(model.parameters(), lr=0.01) # Reset gradients optimizer.zero_grad() # Forward pass outputs = model(images) # Calculate loss loss = criterion(outputs, labels) # Backward pass loss.backward() # Update weights optimizer.step() # Calculate accuracy _, predictions = torch.max(outputs, 1) correct = (predictions == labels).sum().item() accuracy = correct / len(labels) * 100 return loss.item(), accuracy # ========== 4. VISUALIZATION ========== def visualize_predictions(model, images, labels): \u0026#34;\u0026#34;\u0026#34;Show what the model predicts\u0026#34;\u0026#34;\u0026#34; model.eval() # Set to evaluation mode with torch.no_grad(): # Don\u0026#39;t calculate gradients (faster) outputs = model(images[:5]) # First 5 images _, predictions = torch.max(outputs, 1) # Plot fig, axes = plt.subplots(1, 5, figsize=(15, 3)) for i in range(5): axes[i].imshow(images[i].squeeze(), cmap=\u0026#39;gray\u0026#39;) axes[i].set_title(f\u0026#39;True: {labels[i]}\\nPred: {predictions[i]}\u0026#39;) axes[i].axis(\u0026#39;off\u0026#39;) plt.show() # ========== 5. MAIN EXECUTION ========== def main(): print(\u0026#34;=== CNN TUTORIAL - RUN ME! ===\u0026#34;) print(\u0026#34;\\n1. Creating model...\u0026#34;) model = TinyCNN() print(f\u0026#34;Model created! It has:\u0026#34;) print(f\u0026#34; - Conv layer: 3 filters of size 3x3\u0026#34;) print(f\u0026#34; - FC layer: {3*28*28} inputs ‚Üí 10 outputs\u0026#34;) print(\u0026#34;\\n2. Creating fake data...\u0026#34;) images, labels = create_fake_data(50) print(f\u0026#34; Created {len(images)} fake images\u0026#34;) print(f\u0026#34; Image shape: {images[0].shape}\u0026#34;) print(f\u0026#34; Sample labels: {labels[:5]}\u0026#34;) print(\u0026#34;\\n3. Training for 5 epochs...\u0026#34;) for epoch in range(5): loss, acc = train_one_epoch(model, images, labels) print(f\u0026#34; Epoch {epoch+1}: Loss = {loss:.4f}, Accuracy = {acc:.1f}%\u0026#34;) print(\u0026#34;\\n4. Making predictions...\u0026#34;) visualize_predictions(model, images, labels) print(\u0026#34;\\n5. Examining learned filters...\u0026#34;) filters = model.conv.weight.detach() print(f\u0026#34; Filter shape: {filters.shape}\u0026#34;) # [3, 1, 3, 3] print(f\u0026#34; First filter values:\\n{filters[0]}\u0026#34;) print(\u0026#34;\\n=== DONE! ===\u0026#34;) print(\u0026#34;\\nWhat we did:\u0026#34;) print(\u0026#34;1. Created a tiny CNN with 1 conv layer + 1 fc layer\u0026#34;) print(\u0026#34;2. Created fake image data\u0026#34;) print(\u0026#34;3. Trained it for 5 epochs\u0026#34;) print(\u0026#34;4. Visualized predictions\u0026#34;) print(\u0026#34;5. Looked at learned filters\u0026#34;) # ========== RUN IT! ========== if __name__ == \u0026#34;__main__\u0026#34;: main() üéØ Part 6: Understanding Each Component Through Analogies 6.1 The CNN as a Factory Assembly Line 1 2 3 4 INPUT IMAGE ‚Üí [CONV] ‚Üí [RELU] ‚Üí [POOL] ‚Üí [CONV] ‚Üí [RELU] ‚Üí [POOL] ‚Üí [FC] ‚Üí OUTPUT ‚Üì ‚Üì ‚Üì ‚Üì ‚Üì ‚Üì ‚Üì ‚Üì ‚Üì Raw Find Keep Keep Find Keep Keep Make Final Material Patterns Positives Important Patterns Positives Important Decision Classification 6.2 What Each Layer Learns 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 # Let\u0026#39;s visualize what different layers might learn def what_layers_learn(): print(\u0026#34;First conv layer might learn:\u0026#34;) print(\u0026#34; - Horizontal edges\u0026#34;) print(\u0026#34; - Vertical edges\u0026#34;) print(\u0026#34; - Diagonal edges\u0026#34;) print(\u0026#34; - Blobs/corners\u0026#34;) print(\u0026#34;\\nSecond conv layer might learn:\u0026#34;) print(\u0026#34; - Combinations of edges ‚Üí corners\u0026#34;) print(\u0026#34; - Simple shapes (circles, curves)\u0026#34;) print(\u0026#34; - Texture patterns\u0026#34;) print(\u0026#34;\\nFully connected layers learn:\u0026#34;) print(\u0026#34; - \u0026#39;If I see these patterns, it\u0026#39;s probably a 0\u0026#39;\u0026#34;) print(\u0026#34; - \u0026#39;Circles at top + vertical lines = 8\u0026#39;\u0026#34;) print(\u0026#34; - \u0026#39;One vertical line = 1\u0026#39;\u0026#34;) 6.3 Common Questions Answered Q: Why use multiple conv layers? A: First layer sees pixels, second layer sees edges, third layer sees shapes, fourth layer sees objects.\nQ: What does ReLU do? A: It says \u0026ldquo;ignore negative evidence, only pay attention to positive evidence.\u0026rdquo;\nQ: Why pooling? A: Makes the network care less about exact position. A \u0026ldquo;9\u0026rdquo; is still a \u0026ldquo;9\u0026rdquo; whether it\u0026rsquo;s slightly left or right.\nQ: How many filters should I use? A: Start small (like 8-16), increase if needed. More filters = can detect more patterns, but slower.\nüìù Part 7: Your Turn - Exercises to Understand Better 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 # EXERCISE 1: Modify the TinyCNN # Try changing these and see what happens: # 1. Change number of filters from 3 to 8 # 2. Change kernel_size from 3 to 5 # 3. Remove the ReLU activation # 4. Add a second conv layer # EXERCISE 2: Count parameters def count_parameters(model): total = sum(p.numel() for p in model.parameters()) trainable = sum(p.numel() for p in model.parameters() if p.requires_grad) print(f\u0026#34;Total parameters: {total:,}\u0026#34;) print(f\u0026#34;Trainable parameters: {trainable:,}\u0026#34;) return total # EXERCISE 3: Create your own filter def create_edge_filter(): \u0026#34;\u0026#34;\u0026#34;Manually create a horizontal edge detector\u0026#34;\u0026#34;\u0026#34; filter = torch.tensor([ [1, 1, 1], [0, 0, 0], [-1, -1, -1] ]).float() # Apply it to an image manually image = torch.randn(1, 1, 5, 5) # Convolve manually output = torch.zeros(3, 3) for i in range(3): for j in range(3): patch = image[0, 0, i:i+3, j:j+3] output[i, j] = torch.sum(patch * filter) print(f\u0026#34;Filter:\\n{filter}\u0026#34;) print(f\u0026#34;Output:\\n{output}\u0026#34;) üöÄ Next Steps After Understanding Run the complete example above - it works! Modify one thing at a time and see what happens Try real MNIST data instead of fake data Add more layers gradually Experiment with hyperparameters (learning rate, batch size) üí° Quick Start - Just Run This: Copy and run this minimal example:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 # MINIMAL WORKING EXAMPLE - COPY AND RUN! import torch import torch.nn as nn import torch.nn.functional as F class SimpleCNN(nn.Module): def __init__(self): super().__init__() self.conv1 = nn.Conv2d(1, 4, 3, padding=1) # 4 filters self.pool = nn.MaxPool2d(2, 2) self.fc = nn.Linear(4*14*14, 10) # 10 classes def forward(self, x): x = self.pool(F.relu(self.conv1(x))) # Conv ‚Üí ReLU ‚Üí Pool x = x.view(x.size(0), -1) # Flatten x = self.fc(x) # Classify return x # Create and test model = SimpleCNN() test_input = torch.randn(2, 1, 28, 28) # Batch of 2 images output = model(test_input) print(f\u0026#34;Input shape: {test_input.shape}\u0026#34;) print(f\u0026#34;Output shape: {output.shape}\u0026#34;) # Should be [2, 10] print(\u0026#34;Each output has 10 numbers - probabilities for digits 0-9\u0026#34;) ","permalink":"http://localhost:1313/personal_website/posts/how-to-build-neural-networks-from-scratch/","summary":"\u003ch1 id=\"-pytorch-cnn-explained-from-scratch---step-by-step\"\u003eüéì \u003cstrong\u003ePyTorch CNN Explained from Scratch - Step by Step\u003c/strong\u003e\u003c/h1\u003e\n\u003cp\u003eI\u0026rsquo;ll explain everything from the absolute basics. No prior PyTorch knowledge required!\u003c/p\u003e\n\u003ch2 id=\"-part-1-the-absolute-basics---understanding-the-pieces\"\u003eüìö \u003cstrong\u003ePart 1: The Absolute Basics - Understanding the Pieces\u003c/strong\u003e\u003c/h2\u003e\n\u003ch3 id=\"11-what-is-a-cnn\"\u003e\u003cstrong\u003e1.1 What is a CNN?\u003c/strong\u003e\u003c/h3\u003e\n\u003cp\u003eA \u003cstrong\u003eConvolutional Neural Network (CNN)\u003c/strong\u003e is like a detective that:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eScans\u003c/strong\u003e an image with small filters to find patterns (edges, textures)\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCombines\u003c/strong\u003e these patterns to recognize objects\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eLearns\u003c/strong\u003e which patterns are important for classification\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cstrong\u003eAnalogy\u003c/strong\u003e: Imagine looking for a face in a crowd:\u003c/p\u003e","title":"How to Build Neural Networks From Scratch"},{"content":"Introduction Wide column database systems store data in column families. Below is a small example of a NoSQL database:\nCharacterstics Although, these relations look like tables, but they\u0026rsquo;re not actually tables. This is because, we cannot make arbitrary selections based on non-primary columns. For example, the following query will fail:\nTherefore, similar to key-value stores, we can only query by using primary keys.\nA primary key in a wide column database consists of one or more partition keys and zero or more clustering keys (or sorting keys).\nWide column databases allow horizontal partitioning of data among multiple nodes enabling horizontal scalability.\nData modeling One important point to consider is that wide column databases store data in denormalized form. This means, that all data related to an object is stored along with that object at the same place.\nFor example, in a traditional relational database schema. Consider an entity user:\n1 2 3 User: Attributes: user_id (primary key), user_name And an entity called comments:\n1 2 3 Comments: Attributes: comment_id (primary key), comment_text, user_id (Foreign key) In this scheme, we can retrieve the comments made by a particular user using the following query:\n1 SELECT * FROM comments, user WHERE user_id = \u0026lt;given_id\u0026gt; However, this does not work in wide column databases like cassandra. This is because, they do not support joins.\nWe need to redefine the schema as follows:\n1 2 3 4 5 6 7 8 9 Cassandra Schema for the above relations: User: Attributes: user_id, user_name, comments // all comments made by the current user in an appropriate data type Now we should be able to retrieve the comments using the following query:\n1 SELECT comments from table_name with user_id = \u0026lt;given_user_id\u0026gt; Since we no longer need to perform joins, retrieving data in wide column databases is much faster and efficient. However, storing data in a denormalized form has its own problems. For example we usually need to store duplicate data when modeling data in denormalized form. This makes it hard to keep copies in sync leading to data inconsistencies.\nAlso, you need to model you data such that the column you want to search over for a record (say user_id) needs to be the partition key. For example, suppose you need to run the following query:\n1 SELECT * FROM table WHERE search_column = \u0026lt;value\u0026gt; Now, you need to model your data such that search_column is the partition key.\nBut what if you need to search over multiple columns?\nIn that case, you would need to create another table which is campatible with your query pattern. Below is a simple example illustrating this:\nData partioning Since partitioning is embeded into the data model through partition keys. Horizontal scalability is natural to wide column databases. We can scale up or down depending on the demand simply by adding removing nodes.\nBut what happens, when a node is added or removed. Is the data redistributed across all nodes? No. This is not the case. For example, cassandra uses consistent hashing technique to minimize the data transfer in case of addition/removal of nodes. Each node also has a doppelganger (german for identical double), on the hash ring. The duplicate representations of a node on the hash ring are called virtual nodes.\nWrite performance Widecolumn databases provide much better write performance compared to traditional relational databases. This is primarily because of 2 reasons:\nWrite optimized storage mechanisms: Wide column databases are optimized for writes. They use special data structures to achieve this. For example, cassandra uses Log Structured Merge Trees (commonly called LSM trees) and SStables. These data structures delay the flush system calls, combining multiple writes and improving performance. Since, data is stored partioned in multiple nodes. Writes can be executed in parallel improving performance. Note: The content of this article is based on this video which is also a great resource to learn about other types of database systems\n","permalink":"http://localhost:1313/personal_website/posts/wide_column_database_systems/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eWide column database systems store data in column families.  Below is a\nsmall example of a NoSQL database:\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i.ibb.co/63Z3pgf/Screenshot-from-2025-10-01-15-02-33.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"characterstics\"\u003eCharacterstics\u003c/h2\u003e\n\u003cp\u003eAlthough, these relations look like tables, but they\u0026rsquo;re not actually\ntables. This is because, we cannot make arbitrary selections based on\nnon-primary columns. For example, the following query will fail:\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i.ibb.co/0j2HPHCS/Screenshot-from-2025-10-01-15-02-18.png\"\u003e\u003c/p\u003e\n\u003cp\u003eTherefore, similar to key-value stores, we can only query by using\nprimary keys.\u003c/p\u003e\n\u003cp\u003eA primary key in a wide column database consists of one or more\npartition keys and zero or more clustering keys (or sorting keys).\u003c/p\u003e","title":"Widecolumn database systems"},{"content":"Introduction To ensure scalability, reliability and fault tolerance, web applications replicate data across multiple database nodes/clusters/availability zones/regions and cloud providers. However, replicating data introduces the challenge of keeping the copies in sync. In this article, we contemplate weather quantum entanglement can enable database replicas to sync instantinously. The ideas behind entanglement stem from quantum mechanics, a subfield of physics which describes the behaviour of sub atomic particles.\nIn this post, we first describe the basics of database replication, then we move on the show the theoritical application of quantum entanglement in database replication.\nBasics of data replication The figure below shows a simplified setup of client-server web applications. The user would send requests to the backend. Then this request goes through several components like load balancers, app servers, caching servers etc. These components perform several functions like request validation, communicating with database server to manipulate data, responding back the the user etc. In the diagram below, we\u0026rsquo;ve abstracted away all these details for simplification. The app servers and other components need to communicate with a database system to manipulate user data and return appropriate response.\nHowever, there are few problems with this design. Consider what happens, if the machine running the database system collapses. The user\u0026rsquo;s data will be lost and there\u0026rsquo;s no way we can recover it back. Also, consider what would happen when there are much more users than the capacity of the database server. In this case, the queries will become slow and user\u0026rsquo;s will experience higher latency.\nTo solve these problems, we can replicate the data across multiple nodes. Each such node (or database server) is called a replica. In a simple scheme, we have a single master replica and multiple slave replicas. The write requests are handled by master replicate, while read requests are handled by slave replicas.\nThis architecture introduces the following features into our system:\nscalability: read requests can be distributed among read replicas allowing the system to handle more number of read requests compared to previous approach availability: if one of the replica goes down, the system will remain functional since others can handle the request redundancy: since we are storing the same data at multiple places, we no longer keep a single copy of user\u0026rsquo;s data i.e. we store the data redundantly fault tolerance: the system is more tolerant to node failures A simple implementation of the above scheme would look like:\nSuppose, we need to update a piece of data. Now we would route the write request to the master replica. The master replica will update it\u0026rsquo;s own database. However, the master replica is no longer in sync with read replicas (in that the read replicas still show an outdated version of the data). Therefore, we need to communicate the newly updated data across read replicas. This can be easily achieved by making an update request synchronously/asynchronously from master replica to slave replicas. The time it takes for data to travel from master replica to all slave replicas is called replication lag.\nHowever, during this procedure, there is still a short duration in which read replicas hold inconsistent data. You can either block or allow incoming read requests on slave replicas depending on weather you are optimizing for consistency or availability.\nIf you allow the read requests during updation of slave replicas, then you allow the user to read stale data, hence your system is not consisten (in that the read requests is not returning the latest data), however, your system is available (the user is returned with some response instead of error).\nOn the other hand, if you block read requests in this duration, then you are basically returning the user with an error response. You system is hence less available, but more consistent (in that if a user reads data, it is guaranted that it is latest).\nThe tradeoff\u0026rsquo;s are based on requirements of your system and the nature of application at hand.\nCurrent approaches of database replication rely on communication between replicas. The inconsistencies are resolved using distributed consensus mechanisms such as Paxos or Raft.\nConflict-free replicated data type are used in some schemes. Using CRDT\u0026rsquo;s data is replicated across multiple data centres. Each data center operates on its own data which is non overlapping with any other data centres. This way, updates can be made at multiple locations, since their merge is guaranteed to cause no conflicts (because the data updated was independent).\nQuantum entanglement Quantum physics is the subfield of physics that describes the behaviour of subatomic particles. This field was introduced, after it was discovered that classical mechanics cannot be used to describe the behaviour of subatomic particles.\nSubatomic particles like electrons and photons exhibit what is called wave-particle duality. It means that they act as a wave as well as particles depending on how it is observed or measured.\nAcording to quantum mechanics, the complete state of a subatomic particle like electron, photon etc. can be described by its wave function. It encodes information such as its position, momentum, spin, etc. For a single particle, this wavefunction can be spread out in space, indicating a superposition of many possible states. This is known as superposition: the particle doesn‚Äôt have a definite state until measured.\nQuantum entanglement is a phenomena in quantum mechanics, where two or more particles become correlated in such a way that the quantum state of one particle cannot be described independently of the quantum state of the other(s), no matter how far apart they are.\nThis means that if 2 particles are entangled, and we measure the state of one particle. Then the state of the second particle is guaranteed to be same, irrespective of the distance between these 2 particles.\nThis has serious implications in physics, since it appears to violate the principle of locality which states that information cannot travel faster than light. However, this is not the case, since there is no tranfer of information. It is not as if, when the first particle was measured, it transmitted its state information across to its entangled counter part instantinously so it can take adjusts its state. Instead, the 2 particles have corellated wave function. Measurement of one\u0026rsquo;s state instaniously determines the state of the other.\nQuantum entanglement is known to be true and has been proved experimentally by bell in 1960s. Now if we consider this fact at face value, we can build some really cool applications out of it.\nData syncing using Quantum entanglement In computers, information is represented in bits. A bit can hold 2 values, either 0 or 1. Computers are agnostic of the underlying mechanism on which bits are stored. For example, modern computers use Metal Oxide Field Effect Transistors (MOSFETS) for representing information. These transistors, act like switches where absence or presents of electricity determins the value of the bit.\nAn electron\u0026rsquo;s spin can take 2 values \u0026ldquo;up\u0026rdquo; or \u0026ldquo;down\u0026rdquo;. The value of an electron\u0026rsquo;s spin determines its angular momentum.\nAssuming that we have the technology to use an electron\u0026rsquo;s spin as a bit of computer memory. Consider the following thought experiment:\nWe have 2 electrons in quantum entanglement. These 2 electrons act as computer memory. Suppose, these 2 electrons represent the same variable.\n1 bool x = 1; Suppose, The variable x is stored as \u0026ldquo;spin up\u0026rdquo; state in electron1 and electron2. Now suppose, we seperate these electrons to 2 locations far apart. Suppose, electron1 is in India and electron2 is in Russia. Now we update the variable x as follows:\n1 x = 0; Please note that the update is only made at electron1 located in India, however, by virtue of the fact that the 2 particles are quantum entangled, the second particle will be in a flipped state upon measurement automatically. Hence, we have updated the variable to x=0 at both locations instantinously eventhough we never made an update in second location.\nHence, we synced data copies across 2 locations instantinously.\nConclusion Through the thought experiment above, we\u0026rsquo;ve shown how quantum entanglement can be used to sync data instantinously. Most of the technology required to implement such a system is already present. For example, quantum computers can manipulate qubits on will using magnetic fields. Also, quantum computing technology has enabled us to use sub atomic particles as pieces of information.\nThis kind of setup achives replication lag of 0. This has real implications for systems that require strong consistency and high availability. Interestingly, it also violates the CAP theorm.\n","permalink":"http://localhost:1313/personal_website/posts/can_quantum_entanglement_help_you_sync_your_database_replicas/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eTo ensure scalability, reliability and fault tolerance, web applications\nreplicate data across multiple database nodes/clusters/availability\nzones/regions and cloud providers. However, replicating data introduces\nthe challenge of keeping the copies in sync. In this article, we\ncontemplate weather quantum entanglement can enable database replicas to\nsync instantinously. The ideas behind entanglement stem from quantum\nmechanics, a subfield of physics which describes the behaviour of sub\natomic particles.\u003c/p\u003e\n\u003cp\u003eIn this post, we first describe the basics of database replication, then\nwe move on the show the theoritical application of quantum entanglement\nin database replication.\u003c/p\u003e","title":"Can quantum entanglement help you sync your database replicas?"},{"content":"Introduction When you type something on a search engine like google. You are continously shown search suggestions, as you type.\nAPI As you type in the search box, behind the scenes, google continously sends request to the backend. The requests might look like this:\n1 2 3 4 5 GET /autocomplete?q=be { // metadata such as user id etc for personalized suggestion } The backend responds with a list of suggestions, which might look something like:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 200 OK { \u0026#34;suggestions\u0026#34;: [ \u0026#34;best hotels near me\u0026#34;, \u0026#34;beach destinations\u0026#34;, \u0026#34;bears\u0026#34;, \u0026#34;beauty products\u0026#34;, \u0026#34;behavioral psychology\u0026#34;, \u0026#34;bitcoin\u0026#34;, \u0026#34;beetlejuice\u0026#34;, \u0026#34;best laptop 2025\u0026#34; ] } These are then populated in a box on the user interface.\nHow does it work This kind of functionality can be implemented with a Tri. The idea is that at each node in the Tri, we keep a list of top k most frequest words having the prefix.\nThis approach allows us to look up top k most frequest words with a particular prefix in O(length of prefix) time.\nFor example, if i need to look up top k words for prefix \u0026ldquo;be\u0026rdquo; then I can quickly iterate through the Tri to get the node that represents prefix \u0026ldquo;be\u0026rdquo;.\nBut you might quickly figure out, that maintaining such a Tri across millions of words will require a humoungous Tri and it is true.\nWe cannot reduce the space requirements of the Tri, but we can shard the system so that we can store it across multiple nodes or data centres for that matter.\nFor example, we can distribute Tri across 2 clusters. This way, all queries with prefix=\u0026ldquo;a\u0026rdquo; will be routed to first cluster. And all queries with prefix=\u0026ldquo;b\u0026rdquo; will be routed to second cluster.\nExtending this approach, you can indefinately divide the Tri across multiple nodes/clusters/availability zones/data centres etc.\nHow are top k words populated in the Tri Now the question is, how can we populate the top k words in the Tri for each word. There are many approaches by which it can be done.\nAs a simple example, we could monitor queries in given intervals of time (say 1 hour) and for each hour. We find, what are the most common words. We can then regenerate/update the Tri with the new data. This allows the system to be aware of real time events.\nMachine learning approaches can also be applied in this context. For ML perspective, this problem can be viewed as a next token prediction problem. Hence, we can use transformer models which are known to excel in this tasks.\nConclusion A search completetion, whilst looks simple, is an increadibly complicated system under the hood. There are many methods that can be employed to develop such a system, in this article, we just touched the surface of what might an implementation look like.\n","permalink":"http://localhost:1313/personal_website/posts/search_completetion_systems/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eWhen you type something on a search engine like google. You are\ncontinously shown search suggestions, as you type.\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://i.ibb.co/Dhvj4z7/Screenshot-from-2025-09-27-14-31-20.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"api\"\u003eAPI\u003c/h2\u003e\n\u003cp\u003eAs you type in the search box, behind the scenes, google continously\nsends request to the backend. The requests might look like this:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e5\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eGET /autocomplete?q=be\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  // metadata such as user id etc for personalized suggestion\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eThe backend responds with a list of suggestions, which might look something like:\u003c/p\u003e","title":"Search completetion systems"},{"content":"Functional requirements search: The search functionality provides users with the ability to list all products that best match their query. We should also be able to tell weather we are able to deliver a product to the users location or not. For example, if a product cannot be shipped to the user, it should be communicated to the user. cart: users should be able to add items into their cart. wishlist: users should be able to add items to their wishlist. checkout + payment view orders: users should be able to track their active orders Non functional requirements Imagine there is a sale on an item with 50% off. And everybody is waiting for 12:00 so they can order. In such situation, we do not want 2 users to order the same product. Hence, the system should be highly consistent. Secondly, the system should have low latency, therefore, they can book as fast as possiblem, when there is a sale.\nThe system should be highly available. You almost never want to show \u0026ldquo;Something went wrong\u0026rdquo; errors or at least reduce them as much as possible.\nBut given the constrains of CAP theorom, we cannot achieve high availability and consistency at the same time. Therefore, we need to segregate endpoints as per availability and consistency requirements.\nFor example, endpoints dealing with payments, inventory counting, order booking need to be highly available. On the contrary, endpoints dealing with search, product showcase, etc. need to be highly available.\nHow are products onboarded onto the system For an e-commerce website like amazon/flipkart. They have thousands of suppliers (i.e. vendors who list their products on the platform).\nNow each of these third party vendors need to register their products onto the system. Suppose, bob is a vendor and he just received a stock of 100 laptops from the manufacturer. He aims to sell 30 of them through our platform oneline.\nBob will send a POST request to an endpoint like add-product:\n1 2 3 4 5 6 7 8 9 POST /register-product { \u0026#34;name\u0026#34;: \u0026#34;Lenovo Laptop\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A gaming laptop with 10 GB ram and 256 GB SSD ...\u0026#34;, \u0026#34;price_usd\u0026#34;: 200, \u0026#34;remaining_supply\u0026#34;: 30 // other metadata } When this request enters inside of our VPC, it fires up an event in Kafka, in a topic like \u0026ldquo;new-product\u0026rdquo;. The subscribers to this event can then take appropriate action. For example, we might want to add product in the database, etc.\nDatabase How will me model an item. For example, a product item. We need to consider that we are selling disparate items, for example a t-shirt item will have size, color. In contrast, a phone will have RAM, camera pixel as its attributes.\nWhat we are dealing here is unstructured data. Therefore, we cannot use a SQL database. Instead, we shall use something like mongoDB, or cassandra which store data in semi-structured format.\nSearching We are going to support, millions of items. Therefore, we need to index these items such that they can be searched quickly. It is also necessary to pre-compute results or store metadata about items. For more information on such systems, see design of a search engine blog.\nIn our e-commerce platform, we are going to use elasti search. It is increadibly versatile search solution which provides full text search capabilities. We can run various algorithms like fuzzy search or vector embeddings based search.\nServiciability An ecommerce platform depends on many intermediaries for delivering the product to the customer. For example, we might need a courier service like fedex to transport goods from one place to another.\nGiven a product and a user\u0026rsquo;s location, we might not be able to deliver the product to the user. May be the user is located in a remote location where, we do not have coverage from any courier service. In that case we need to let the user know that they cannot order the product in question.\nTo answer questions like, \u0026ldquo;weather product X can be delivered to product Y\u0026rdquo; we need to implement a servicability endpoint which:\nGiven the vendor location (location from where to pick up the product), user location (location where the product needs to be delivered), type of product (e.g. refigrated items, eatables with expiry etc.) and other relevant metadata. It determines weather the product can be delivered.\nIt should also provide us with the time by which we can deliver the item to the user. This will be useful in displaying something like \u0026ldquo;delivery in 2 days\u0026rdquo; etc.\nRecommendations Each time a user searches a particular item, or view a particular item, order an item, etc. We can use these user interations to infer what the user is looking for. For example, if the user searches for different mobile phone models, views some of them, then the user probably is looking to buy a mobile phone. And this information can be used by the recommendation engine to show appropriate products on the user\u0026rsquo;s home feed.\nThe idea is, that all the events that can be an input to the recommendation engine, we put them in Kafka. Now, there will be services that will fetch these events from kafka, and feed them into machine learning models, and generate predictions.\nWe can use spark to user activity from kafka, and then run analytics on it. We can use spark for both stream processing and batch processing. It can run ML jobs in parallel. Along with spark, we can also use hadoop in conjunction. Hadoop provides the low level utilities like HDFS (a distributed file system) that enable us to run a large number of analytics jobs in parallel.\nOrder placing The flow of placing an order can be described in the following diagram:\n","permalink":"http://localhost:1313/personal_website/posts/designing_e_commerce_websites/","summary":"\u003ch2 id=\"functional-requirements\"\u003eFunctional requirements\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003esearch: The search functionality provides users with the ability to\nlist all products that best match their query. We should also be able\nto tell weather we are able to deliver a product to the users\nlocation or not. For example, if a product cannot be shipped to the\nuser, it should be communicated to the user.\u003c/li\u003e\n\u003cli\u003ecart: users should be able to add items into their cart.\u003c/li\u003e\n\u003cli\u003ewishlist: users should be able to add items to their wishlist.\u003c/li\u003e\n\u003cli\u003echeckout + payment\u003c/li\u003e\n\u003cli\u003eview orders: users should be able to track their active orders\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"non-functional-requirements\"\u003eNon functional requirements\u003c/h2\u003e\n\u003cp\u003eImagine there is a sale on an item with 50% off. And everybody is\nwaiting for 12:00 so they can order. In such situation, we do not want 2\nusers to order the same product. Hence, the system should be highly\nconsistent.  Secondly, the system should have low latency, therefore,\nthey can book as fast as possiblem, when there is a sale.\u003c/p\u003e","title":"Designing an E commerce platform"},{"content":"Introduction First let\u0026rsquo;s start with a similar problem akin to web search. Imagine you have 100 files in your current directory, and you do something like:\n1 grep \u0026#34;Abdul\u0026#34; . The grep program will return you a list of files which contain the given string or pattern. But how do you think does that works under the hood.\nIn a naive approach, the grep program would open each file in the directory, search for the given string/pattern and if any result is obtained, then add this file to the output list.\nTypically, this is how the result would look like:\nNow how does this problem relate to search engines?\nSearch engines operate in a similar fasion. Instead of files in a file system, imagine your have html pages instead. Now users come to you with a search string, for example \u0026ldquo;best resteraunt in pune\u0026rdquo;. Now you need to search for all the html pages in your system, and find the pages that are appropriate to the search query. There are multiple ways of doing this. From as simple as runnin a pattern matching algorithm to find the exact string, to running advanced NLP pipelines. Lastly, you just return the list of found pages, relevant to the query. And this is the whole idea behind a search engine. But the currrent approach i.e. to just search all the web pages on the internet on receiving a request is not scalable.\nGoogle entertains about 150k search requests per second. And for each request, they are able to return the results within a few hundreds milliseconds at maximum.\nTo enable such a massive scale, google heavily relies on pre-computation. In fact, almost nothing is computed on the fly, all the results need to be pre-fetched and cached.\nGoogle crawler Google has a massive web crawler that is responsible for crawling the internet and find web pages. The idea is to keep on crawling to internet and build a metadata database. When you receive a query, search from the metadata database instead of the actual web pages.\nAlso, note that with this approach, google does not actually need to store the actual webpages. The google crawler can just fetch the web page and build the metadata out of it.\nGoogle builds an index out of the metadata it collects from web pages. Think of this as similar to how indexes work in databases.\nInverted index Suppose we have a large hash table where keys are \u0026ldquo;terms\u0026rdquo; and values are \u0026ldquo;documents in which these terms appear\u0026rdquo;, then it is called a Term document matrix.\nFor example, suppose we have 2 documents:\n1 2 doc1: \u0026#34;MySQL is a consisten database system ...\u0026#34; doc2: \u0026#34;PostgresSQL is a highly consistent database ...\u0026#34; Then, for a few terms, the term document matrix would look like:\n1 2 3 4 5 key : value MySQL : [ doc1 ] PostgresSQL: [ doc2 ] database: [ doc1, doc2 ] // other terms ... This kind of table is usually build after pre-processing the text. For example, removing stop words, stemming, lemmization etc.\nYou can also build an advanced version of this \u0026ldquo;term document matrix\u0026rdquo;, for example by also considering the frequency of the particular term. This will allow you to figure out, weather the term is the main subject of the article or is it just mentioned breiefly.\n","permalink":"http://localhost:1313/personal_website/posts/design_of_youtube/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eFirst let\u0026rsquo;s start with a similar problem akin to web search. Imagine you\nhave 100 files in your current directory, and you do something like:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003egrep \u0026#34;Abdul\u0026#34; .\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eThe grep program will return you a list of files which contain the given\nstring or pattern. But how do you think does that works under the hood.\u003c/p\u003e\n\u003cp\u003eIn a naive approach, the grep program would open each file in the\ndirectory, search for the given string/pattern and if any result is\nobtained, then add this file to the output list.\u003c/p\u003e","title":"The design of a Search Engine"},{"content":"Introduction You are netflix. Now your main servers are hosted in the USA, however, you have users all over the world. Now suppose, a user from India request a video (movie/TV etc.) that is hosted in a USA data center. To serve the request, you need to transmit data all across the world, which increases the users latency and makes up for a bad user experience. And if there are millions of users in India, requesting data from USA, then the network will become like red hot steel.\nA content delivery network (CDN) is responsible for delivering content to the users from a location close to them. It reduces data travel path, hence decreasing latency for end users. Netflix operates a massive CDN called Open Connect for its video delivery. In this article, we understand how it works.\nFundamentals The origin server is the server where the main data (source of truth) resides. This may be the main database server or data center.\nAn edge server, stores a copy of data from origin server. It acts as a read replica / catching server for the origin server. Edge servers are typically located across many geographies so as to provide data to end user as fast as possibel across multiple locations.\nLoad balancing In each country, usually, there are mulitple availability zones. For example, amazon web services operate az-east, az-west and other availability zones with the US. And for each country, there may be multiple availability zones.\nRequests are load balanced across 2 layers. First, for each geography, there may be multiple availability zones that the current client can fetch data from. Hence, the first layer of load balancer operates among availability zones. The second layer of load balancer, operates among multiple nodes with a particular availability zone.\nOpen Connect Open Connect is a globally distributed CDN of netflix. Open connect works at the ISP level so the user does not need to make a request through the internet, if the requested resource is available in Open connect node.\nOpen connect servers are provided free of cost to the internet service providers.\nDatabases used Netflix uses MySQL and cassandra to store user data. All the basic user information like name, age etc. are stored in MySQL while big data and analytics related data like watch history, search history, which might be useful for recommendation engines are stored in Cassandra.\nFor the MySQL database layer, netflix uses a multi master architecture. Where, when a write request is received. All masters are synchorinazed and written to simultaniously.\nEach master has multiple read replicas which are replicated across multiple places.\nThe Open connect nodes use consistent hashing to store/cache data efficiently.\nCaching layer Netflix is a read heavy system because it does not contain user generated content. Also the write frequency is much less than read frequency. Keeping this in mind, netflix has implemented a write through\nread through catching layer. Netflix\u0026rsquo;s caching layer is called \u0026ldquo;EV cache\u0026rdquo;. Each read/write request goes through one of many cache clients in an availability zones. Whenever a write request is received. All clusters/nodes/replication groups are updated simoultaniously along with the cache.\nHowever, when a read request is received. It is allocated to a particular cache client, which then talks to the nearest convinent node and returns the data from it.\nAnother interesting point to note is that EV cache is built on top of memcached. And usually, caching systems store data in RAM.\nHowever, netflix caches store data not in RAM, but SSD hard disks. SSD\u0026rsquo;s are faster than traditional hard drives (HDD\u0026rsquo;s) but still slower than RAM. This setup allows them to reduce the costs.\nNote: the matter of this post is based on this video\n","permalink":"http://localhost:1313/personal_website/posts/netflix_cdn/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eYou are netflix. Now your main servers are hosted in the USA, however,\nyou have users all over the world. Now suppose, a user from India\nrequest a video (movie/TV etc.) that is hosted in a USA data center. To\nserve the request, you need to transmit data all across the world, which\nincreases the users latency and makes up for a bad user experience. And\nif there are millions of users in India, requesting data from USA, then\nthe network will become like red hot steel.\u003c/p\u003e","title":"Netflix CDN"},{"content":"Introduction Firstly I would like to talk about the scale of twitter, which will help us to understand the requirements of a system like twitter.\nTwitter handles about 600 tweets per second. Which means that approximately 600 tweets are made each second. On the contrary, approximately 60,000 tweets are read each second. This clearly shows that twitter is a read heavy system.\nThere are approximately 300 million users of twitter. Some of them are active users (users who frequently visit twitter), while most of them are passive users (i.e. users who\u0026rsquo;d only visit once in a while, say 1 month).\nFeatures (i.e. Functional requirements) Home timeline\nevery user has a home timeline a home timeline contains tweets from the users, you\u0026rsquo;ve followed (i.e. your followees), or tweets that are recommended by the twitter recommendation engine For the sake of simplicity, we will not include the tweets from recommendation engine in the home timeline. Therefore, the home timeline shall only include the tweets from your followees.\nUser timeline\neach user has a user timeline user timeline shows the tweets made by you Search timeline\nsuppose you search \u0026ldquo;world cup\u0026rdquo; on twitter search, the search results will show you a number of tweets related to \u0026ldquo;world cup\u0026rdquo; these tweets are called search timeline Non functional requirements It is clear from the description that we need to optimize our design for the following features:\nscalability: It is clear that you need a scalale system that needs to handle 300 million users availability: If the user is trying to see a tweet. He should be able to see it. You typically do not want to show \u0026ldquo;Something went wrong\u0026rdquo; error screens, which will make it a poor user experience eventual consistency: If a tweet is delivered to your followers with a few second delay, it should not be a huge problem (typically) causal consistency: If I make a new tweet, it should be shown to me immediately, or I might make a duplicate new tweet thinking that the previously created tweet was not successfully posted Low level design Considering the non-functional requirements. It should be clear to us, that we would require a No-SQL database, particularly mongo-db or cassandra.\nThis is because, No-SQL databases are easier to scale, and both mongodb and cassandra are build to favour availability over consistency.\nI wanted to talk about database schema but I would like to emphasize that NoSQL databases do not have a schema in the same sense as a relational database (SQL based) does.\nTherefore, lets rather talk about API endpoints (request/response shapes), since they are database agnostic.\nUser We should be able to fetch a user by a user id or email. A typical response would look like:\n1 2 3 4 5 6 7 8 9 10 11 12 { \u0026#34;user_id\u0026#34;: 1231231, \u0026#34;email\u0026#34;: \u0026#34;sample@example.com\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;sample\u0026#34;, \u0026#34;followees\u0026#34;: [ 123, 321, 321, // a list of users, current user follows ], // other metadata \u0026#34;phone\u0026#34;: \u0026#34;+12 123124214\u0026#34;, \u0026#34;created_at\u0026#34;: 2143124214124, } Tweet Each tweet, has a limit of 140 characters. And each tweet can contain images/videos. The basic structure defining a tweet object might look like the following:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 { \u0026#34;tweet_id\u0026#34;: 1231232, \u0026#34;text\u0026#34;: \u0026#34;the text of the tweet is stored in this field\u0026#34;, \u0026#34;images\u0026#34;: [ \u0026#34;https://twitter.com/user-data/images/\u0026lt;image_id\u0026gt;\u0026#34;, \u0026#34;https://twitter.com/user-data/images/\u0026lt;image_id\u0026gt;\u0026#34; // a list of paths to images in this post. ], \u0026#34;videos\u0026#34;: [ \u0026#34;https://twitter.com/user-data/videos/\u0026lt;video_id\u0026gt;\u0026#34;, \u0026#34;https://twitter.com/user-data/videos/\u0026lt;video_id\u0026gt;\u0026#34; // a list of paths to videos in this tweet. ] } User timeline We should be able to retrieve all the posts, made by a particular user. Since, there may be a large number of tweets/posts, we can also implement pagination functionality. A sample REST API response might look like:\nRequest:\n1 2 3 4 5 6 /user-timeline POST { \u0026#34;user_id\u0026#34;: 123123, // filter conditions } Response:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 { \u0026#34;123123\u0026#34;: { \u0026#34;tweet_id\u0026#34;: 123123, \u0026#34;text\u0026#34;: \u0026#34;some text of tweet 1\u0026#34;, \u0026#34;images\u0026#34;: [ // list of paths to images ], \u0026#34;videos\u0026#34;: [ // list of paths to videos ] }, \u0026#34;321321\u0026#34;: { \u0026#34;tweet_id\u0026#34;: 321321, \u0026#34;text\u0026#34;: \u0026#34;some text of tweet 2\u0026#34;, \u0026#34;images\u0026#34;: [ // list of paths to images ], \u0026#34;videos\u0026#34;: [ // list of paths to videos ] }, // and many more tweets in the form // \u0026#34;tweet_id\u0026#34;: { Tweet Object } } How to generate home page timeline/feed Suppose we need to generate the feed for alice. Support alice follows bob and charlie. Therefore, in our simplified twitter, alice should see more recent (say 20) posts from bob and charlie.\nWhen we need to generate the home feed for alice, the simplest option is to use the following algorithm:\nFind the friends of alice, using the \u0026ldquo;followees\u0026rdquo; field. This will provide us user id\u0026rsquo;s of bob and charlie Now get all the tweets from bob and charlie using their user timelines respectively (this will involve a database call) Sort the agreegated tweets from bob and charlie and return top 20 tweets. In fact, I previously solved a similar problem on leetcode. And this was the solution I came up with (which follows the above algorithm):\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 interface Post { // each post has an id and timestamp id: number, sno: number, } interface User { // store ID\u0026#39;s of users this user follows followees: Set\u0026lt;number\u0026gt;, // store tweetID\u0026#39;s of tweets made by user posts: Post[], } class Twitter { // to be able to get User object from UserID private usersList: Map\u0026lt;number, User\u0026gt; = new Map(); private postSerialNumber: number = 0; postTweet(userId: number, tweetId: number): void { if ( !this.usersList.has( userId ) ) this.createUser( userId ); const curUser: User = this.usersList.get( userId ); const tweet: Post = { id: tweetId, sno: this.postSerialNumber++, } curUser.posts.push( tweet ); } getNewsFeed(userId: number): number[] { if ( !this.usersList.has( userId ) ) return []; const feed: Post[] = []; const curUser: User = this.usersList.get( userId ); curUser.followees.forEach( (followeeId) =\u0026gt; { // the the posts of this followee and add that to feed const followee: User = this.usersList.get( followeeId ); feed.push( ...followee.posts ); } ); // sort the posts by serial no. and return the top 10 posts feed.sort( (a,b) =\u0026gt; b.sno - a.sno ); return feed.slice( 0, 10 ).map( x =\u0026gt; x.id ); } follow(followerId: number, followeeId: number): void { if ( !this.usersList.has(followerId) ) this.createUser( followerId ); if ( !this.usersList.has(followeeId) ) this.createUser( followeeId ); const curUser: User = this.usersList.get( followerId ); curUser.followees.add( followeeId ); } unfollow(followerId: number, followeeId: number): void { const curUser: User = this.usersList.get( followerId ); curUser.followees.delete( followeeId ); } createUser( userId: number ) { const newUser: User = { followees: new Set( [userId] ), posts: [], } this.usersList.set( userId, newUser ); } } The problem with this approach is that:\nthis is an expensive operation. For a user with 30 followees, we are making 30 expensive database calls. And then we also need to sort the tweets. it generates the home feed on the fly (expensive operation -\u0026gt; will make user wait) To improve the performance of the above approach, the idea is to keep each user\u0026rsquo;s timeline (both home timeline and user tiemline) in a redis.\nWhenever, bob or charlie post a new tweet. A fanout service picks up the new tweet and populates it in alice\u0026rsquo;s home feed.\nBut even with this approach, there is one problem. Consider a famous user who has 100 million followers. Now when he tweets, the fanout service needs to update the timeline of 100 million users. This is an increadibly expensive operation.\nThe solution is to segregate users into regular users and famous users. The fanout method should only run with regular users. To collate the tweets by famous users, we should fetch them on the fly. Therefore, the home timeline generation service would typically keep a seperate list for famous followees for a given user. And the tweets from famous users is fetched on the fly combined with precomputed home feed from redis (which only contains tweets from regular users).\nThis approach, also enables us to distribute the tweets of famous users using a more optimal method, for example through CDN.\nLastly, I would like to note that publisher/subscriber model of communication, is probably a more natural approach to solve these kind of problems.\neach user is a publisher and his followers are his subscribers when alice follows bob. She is subscribing to bob. Therefore: bob -\u0026gt; publisher alice -\u0026gt; subscriber when bob makes a post. All subscribers that subscriber to bob\u0026rsquo;s post immediately take some action For example, when bob makes a post, alice can store the post in her timeline Since, we will be handling 300 million users, we potentially have 300 million publisher streams and 300 million subscriber streams. Hence, a huge pub/sub system is required.\nWe can think of using something like apache kafka. Which is a production grade pub/sub system. But even with kafka, this might be a challenge, given the number of publisher stremas we need to maintain. So as a home work, read more about kafka.\nHow to generate search timeline/feed Twitter uses something called inverted full text search. Here\u0026rsquo;s how it works:\nWhen you make a tweet. Twitter does the following:\nidentify the terms within your tweet, that can be used to index your tweet. For example, I you tweet:\n1 I am supporing manchester united this season. Then twitter parser may identify \u0026ldquo;manchester united\u0026rdquo; as the main search key for this tweet. Note that there may be multiple search keys.\nThen it stores the search_key : tweet mapping, into a key value store.\nFor each search_key there is a list of tweets that contain that search key. Similarly, your tweet will be appended to the list of tweets, under the search key \u0026ldquo;manchester united\u0026rdquo;\n1 2 3 // key value store \u0026#34;machester united\u0026#34;: [123, 321, 422, ... /* other tweet id\u0026#39;s that talk about manchester united*/ ] // other search_keys along with thir tweets Now whenever, a user searches for \u0026ldquo;manchester united\u0026rdquo;. Twitter can just fetch the list of tweets from the above key value store. And your tweet will be displayed in the results (based on some raking)\nYou might have already observed, that such a key-value store needs to be of massive scale considering we are dealing with 300 million users. And that\u0026rsquo;s why, this key-value store is not located in a single place. This is probably spread across multiple nodes and data centres.\nTherefore, twitter uses an approch of scatter and gather when writing and reading from this distributed key-value store.\nFor a given query, each datacenter is asked to provide a list of relavant tweets from it\u0026rsquo;s databases. These are merged together and finally shown to the user after being ranked.\n","permalink":"http://localhost:1313/personal_website/posts/the_design_of_twitter/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eFirstly I would like to talk about the scale of twitter, which will help\nus to understand the requirements of a system like twitter.\u003c/p\u003e\n\u003cp\u003eTwitter handles about 600 tweets per second. Which means that\napproximately 600 tweets are made each second. On the contrary,\napproximately 60,000 tweets are read each second. This clearly shows\nthat twitter is a read heavy system.\u003c/p\u003e\n\u003cp\u003eThere are approximately 300 million users of twitter.  Some of them are\nactive users (users who frequently visit twitter), while most of them\nare passive users (i.e. users who\u0026rsquo;d only visit once in a while, say 1\nmonth).\u003c/p\u003e","title":"The design of twitter"},{"content":"Leetcode 715. Range Module is one of the most convoluted problems on leetcode. And your confidence is further shattered when you find out, that it can be solved in just 6 lines of code. Upon seeing these 6 lines, you realize that this is nothing less than a rosetta stone. In this blog post, I will run the code through all possible edge cases by hand.\nRange Module A Range Module is a data structure that tracks intervals of numbers using half-open ranges [left, right). It supports adding, querying, and removing ranges efficiently.\nProblem Statement Implement the RangeModule class with the following methods:\naddRange(left, right): Adds the interval [left, right), merging overlapping ranges if needed. queryRange(left, right): Returns true if every number in [left, right) is currently tracked. removeRange(left, right): Stops tracking all numbers in [left, right). Example 1 2 3 4 5 6 rangeModule = RangeModule() rangeModule.addRange(10, 20) rangeModule.removeRange(14, 16) print(rangeModule.queryRange(10, 14)) # True print(rangeModule.queryRange(13, 15)) # False print(rangeModule.queryRange(16, 17)) # True You might want to come back to these definitions as you read through the solution:\n1 2 3 4 5 bisect_left(a, x) The return value i is such that all e in a[:i] have e \u0026lt; x and all e in a[i:] have e \u0026gt;= x. So if x already appears in the list, a.insert(i, x) will insert just before the leftmost x already there. 1 2 3 4 5 bisect_right(a, x) The return value i is such that all e in a[:i] have e \u0026lt;= x and all e in a[i:] have e \u0026gt; x. So if x already appears in the list, a.insert(i, x) will insert just after the rightmost x already there. Insertion algorithm Suppose (x, y) is the new interval. First we find\nstart pointer = s = bisect_left of x = and end pointer = e = bisect_right of y\nThe reason for this will be clear in a moment. First, we will consider movement of x only while keeping y fixed.\nCase 1: New interval overlaps with some intervals inside Now suppose, (x,y) do not overlap with any intervals on their ends, however, they contain multiple intervals inside of them. See below:\nThis applies while b \u0026lt; x \u0026lt;= c.\nIn this case, we can remove all the intervals that are contained inside (x,y) and replace all of them with just one interval i.e. (x, y). Here\u0026rsquo;s how the array looks after adding interval (x,y).\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 6 ) \u0026gt;\u0026gt;\u0026gt; s 2 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 27 ) \u0026gt;\u0026gt;\u0026gt; e 8 \u0026gt;\u0026gt;\u0026gt; a[2: 8] = [ 6, 27 ] \u0026gt;\u0026gt;\u0026gt; a [1,4, 6,27, 30,40] Case 2: x = start of some interval This is just a subcase of case 1. I am using it to show why we are using bisect_left for x.\nThe bisect_left on x will still provide us with s=2. Hence, we can still follow the same approach.\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 7 ) \u0026gt;\u0026gt;\u0026gt; s 2 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 27 ) \u0026gt;\u0026gt;\u0026gt; e 8 \u0026gt;\u0026gt;\u0026gt; a[2:8] = [7, 27] \u0026gt;\u0026gt;\u0026gt; a [1,4, 7,27, 30,40] Case 3: x intercepts some interval In this case, the interval (x,y) intersects some interval on the left side i.e. c \u0026lt; x \u0026lt;= d for some interval (c, d) in (x, y). See below:\nIn this case, we can expand the interval (c, d) -\u0026gt; (c, y). Note that we do not need to remove c this time. We just need to add y as an ending. Hence, we basically remove all numbers in [s..e) and add y in their place.\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 8 ) \u0026gt;\u0026gt;\u0026gt; s 3 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 27 ) \u0026gt;\u0026gt;\u0026gt; e 8 \u0026gt;\u0026gt;\u0026gt; a[ 3:8 ] = [ 27 ] # do not add left since s = some interval ending \u0026gt;\u0026gt;\u0026gt; a [1, 4, 7, 27, 30, 40] If we move x further to the right (d \u0026lt; x). We basically arrive at case1 again with different intervals. So, now let\u0026rsquo;s try moving y around.\nCase 4: y = ending of some interval Suppose, we make y coincide with h. Hence, we get a situation where, y=ending of the last interval in (x,y). And note carefully here, that:\ne = bisect_right(y) = i != h, because bisect right is exclusive\nThis is why bisect_right is required for y.\nIn this situation we will follow the same approach as in case1 i.e. remove all intervals and replace with (x,y).\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 6 ) \u0026gt;\u0026gt;\u0026gt; s 2 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 25 ) \u0026gt;\u0026gt;\u0026gt; e 8 \u0026gt;\u0026gt;\u0026gt; a[s:e] = [6,25] \u0026gt;\u0026gt;\u0026gt; a [1,4, 6,25, 30,40] Case 5: y intercepts some interval If y overlaps with the last interval on the right side. We need to expand (x, y) -\u0026gt; (x, h). As shown below:\nWe are basically just removing all numbers in [s..e) and adding x in their place.\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 6 ) \u0026gt;\u0026gt;\u0026gt; s 2 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 23 ) \u0026gt;\u0026gt;\u0026gt; e 7 \u0026gt;\u0026gt;\u0026gt; a[2:7] = [ 6 ] # do not add y since, e points to end of some interval \u0026gt;\u0026gt;\u0026gt; a [1,4, 6,25, 30,40] If we decrease y further to y \u0026lt; g then we end up in the same situation as case1. Hence, we\u0026rsquo;ve covered all cases. Let\u0026rsquo;s generalize our approach:\n1 2 3 s, e = bisect_left(left), bisect_right(right) a[s:e] = [left] iff s does not point to end of some interval + [right] iff e does not point to end of some interval By now it should be clear that even indices represent start of intervals and odd indices represent end of intervals.\nCase 6: What if there are no intervals or new interval does not overlap with any interval This is an important edge case to consider. If there are no intervals, or (x,y) do not contain any intervals, then s,e will point to the same location, as shown below.\nWith a[x:x] = [left, right] python will insert [left, right] at index x. So it does not cause any problem:\n1 2 3 4 5 6 \u0026gt;\u0026gt;\u0026gt; a = [] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 3 ) \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 7 ) \u0026gt;\u0026gt;\u0026gt; a[s:e] = [3] + [7] # s=e=0 here \u0026gt;\u0026gt;\u0026gt; a [3, 7] Removal algorithm Case 1: Deletion interval overlaps with some intervals inside In this case, we should remove all intervals inside (x, y) as shown below:\nHere, we are just remove all numbesr in [s..e).\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 6 ) \u0026gt;\u0026gt;\u0026gt; s 2 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 27 ) \u0026gt;\u0026gt;\u0026gt; e 8 \u0026gt;\u0026gt;\u0026gt; a[s:e] = [] # add nothing \u0026gt;\u0026gt;\u0026gt; a [1,4, 30,40] Case 2: x intercepts some interval If (x, y) overlaps with some interval on the left. We need to trim that interval. For example, suppose, (x,y) intercepts some interval (c, d). See below:\nIn this case we trim (c, d) -\u0026gt; (c, x). As shown below:\nBasically, we remove all numbers in [s..e) and add x in their place.\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 8 ) \u0026gt;\u0026gt;\u0026gt; s 3 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 27 ) \u0026gt;\u0026gt;\u0026gt; e 8 \u0026gt;\u0026gt;\u0026gt; a[3:8] = [ 8 ] \u0026gt;\u0026gt;\u0026gt; a [1,4, 7,8, 30,40] Case 3: y intercepts some interval Suppose (x, y) overlaps with some interval (g, h) on the right. See below:\nIn this case, we need to trim the interval (g, h) -\u0026gt; (y, h). Here, we delete all numbers in [s..e) and insert y in their place.\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 6 ) \u0026gt;\u0026gt;\u0026gt; s 2 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 23 ) \u0026gt;\u0026gt;\u0026gt; e 7 \u0026gt;\u0026gt;\u0026gt; a[2:7] = [ 23 ] # add y \u0026gt;\u0026gt;\u0026gt; a [1, 4, 23, 25, 30, 40] Case 4: (x, y) overlap with some intervals on both sides If (x, y) intercepts some interval no both sides as shown below:\nWe need to trim both the affected intervals. For example if x intercepts (c,d) on the left. Then (c, d) is trimmed to (c, x). Similarly, if (g,h) is intercepted by y. We trim (g, h) to (g, y).\nNote that we are just removing all digits in [s..e) and adding x,y in their place.\nSample:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; a = [1,4, 7,10, 13,17, 20,25, 30,40] \u0026gt;\u0026gt;\u0026gt; s = bisect_left( a, 8 ) \u0026gt;\u0026gt;\u0026gt; s 3 \u0026gt;\u0026gt;\u0026gt; e = bisect_right( a, 35 ) \u0026gt;\u0026gt;\u0026gt; e 9 \u0026gt;\u0026gt;\u0026gt; a[3:9] = [ 8 ] + [ 35 ] \u0026gt;\u0026gt;\u0026gt; a [1,4, 7,8, 35,40] Hence, can generalize our approach as follows:\n1 2 3 s, e = bisect_left(left), bisect_right(right) a[s:e] = [left] iff s points to end of some interval + [right] iff e points to end of some interval Searching algorithm There is only one way for a range (x, y) to be tracked i.e. it MUST lie in one of the range intervals being tracked.\nConsider the case, where (c, d) is a range currently being tracked. If (x, y) lie inside (c, d) then:\nnext of x = s = bisect_right(x) = d next of y = e = bisect_left(y) = d\nNotice the use of bisect_right for x this time. This is because, @x=c we cannot return s=c.\nSimilarly, y uses bisect_left now. This is because, @y=d we cannot return i.\nBoth s and e must point to a single location which is ending of the current interval i.e. d.\n1 2 3 4 5 6 7 8 9 10 11 12 13 def __init__(self): self.a = [] def addRange(self, left, right): s, e = bisect_left(self.a, left), bisect_right(self.a, right) self.a[s:e] = [left] * int(s%2!=1) + [right] * int(e%2!=1) def queryRange(self, left, right): s, e = bisect_right(self.a, left), bisect_left(self.a, right) return s==e and s%2==1 def removeRange(self, left, right): s, e = bisect_left(self.a, left), bisect_right(self.a, right) self.a[s:e] = [left] * int(s%2==1) + [right] * int(e%2==1) ","permalink":"http://localhost:1313/personal_website/posts/leetcode_715_range_module/","summary":"\u003cp\u003e\u003ca href=\"https://leetcode.com/problems/range-module/\"\u003eLeetcode 715. Range\nModule\u003c/a\u003e is one of the most\nconvoluted problems on leetcode. And your confidence is further\nshattered when you find out, that it can be solved in just 6 lines of\ncode. Upon seeing these 6 lines, you realize that this is nothing less\nthan a rosetta stone. In this blog post, I will run the code through all\npossible edge cases by hand.\u003c/p\u003e\n\u003ch1 id=\"range-module\"\u003eRange Module\u003c/h1\u003e\n\u003cp\u003eA \u003cstrong\u003eRange Module\u003c/strong\u003e is a data structure that tracks intervals of numbers\nusing half-open ranges \u003ccode\u003e[left, right)\u003c/code\u003e. It supports adding, querying,\nand removing ranges efficiently.\u003c/p\u003e","title":"Leetcode 715: Range Module in 6 line python. The epitome of python sorcery demystified"},{"content":"Launching psql session In my previous blog, I described how you can set up a postgresql server. In this post, we will learn, what are some of the basic commands in psql and how can we efficiently interact with it.\nTo launch the psql terminal interface, you need to log into the postgres user or the username that created the postgresql server. This can be done using the su command.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 {04 Aug 23:33}~ ‚û≠ su postgres Password: bash-5.2$ psql psql (16.8) Type \u0026#34;help\u0026#34; for help. postgres=# \\l List of databases Name | Owner | Encoding | Locale Provider | Collate | Ctype | ICU Locale | ICU Rules | Access privileges ---------------+----------+----------+-----------------+-------------+-------------+------------+-----------+----------------------- postgres | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | template0 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres + | | | | | | | | postgres=CTc/postgres template1 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres + (4 rows) postgres=# By default there are 3 databases that are already created by the default installation and you are connected to postgres database. You can change the database using the command:\n1 2 3 postgres=# \\connect template1 You are now connected to database \u0026#34;template1\u0026#34; as user \u0026#34;postgres\u0026#34;. template1=# Here we used the \\connect command to connect to database \u0026ldquo;template1\u0026rdquo;. You might be curious, what\u0026rsquo;s inside of \u0026ldquo;template1\u0026rdquo;. Let\u0026rsquo;s try listing it\u0026rsquo;s tables:\n1 2 template1-# \\dt Did not find any relations. We see that there\u0026rsquo;s nothing in \u0026ldquo;template1\u0026rdquo; database. No worries, let\u0026rsquo;s create our own database called test database.\n1 2 3 template1=# CREATE DATABASE test_database; template1=# \\connect test_database You are now connected to database \u0026#34;test_database\u0026#34; as user \u0026#34;postgres\u0026#34;. Create some tables, and insert data.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 test_database=# CREATE TABLE users ( id SERIAL PRIMARY KEY, username VARCHAR(50) UNIQUE NOT NULL, email VARCHAR(100) UNIQUE NOT NULL, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP ); test_database=# CREATE TABLE products ( product_id SERIAL PRIMARY KEY, name VARCHAR(100) NOT NULL, price DECIMAL(10,2) NOT NULL, stock_quantity INTEGER DEFAULT 0, is_active BOOLEAN DEFAULT TRUE ); test_database=# INSERT INTO users (username, email) test_database-# VALUES (\u0026#39;Abdul\u0026#39;, \u0026#39;abdul@gmail.com\u0026#39;); test_database=# SELECT * FROM users; id | username | email | created_at ----+----------+-----------------+---------------------------------- 1 | Abdul | abdul@gmail.com | 2025-08-04 23:49:42.818163+05:30 (1 row) test_database=# INSERT INTO products (name, price, stock_quantity, is_active) VALUES (\u0026#39;bugati\u0026#39;, 700000, 23, true), (\u0026#39;mazerati\u0026#39;, 30000, 213, true); INSERT 0 2 test_database=# SELECT * FROM products; product_id | name | price | stock_quantity | is_active ------------+----------+-----------+----------------+----------- 1 | bugati | 700000.00 | 23 | t 2 | mazerati | 30000.00 | 213 | t (2 rows) Here, we need to note that id and product_id are SERIAL fields which increment automatically. Therefore, we do not need to explicitly set them.\nHere we created 2 tables: \u0026ldquo;users\u0026rdquo; and \u0026ldquo;products\u0026rdquo; and inserted data into them. Now let\u0026rsquo;s see, what are the tables available inside of our test_database from psql terminal.\n1 2 3 4 5 6 7 test_database=# \\dt List of relations Schema | Name | Type | Owner --------+----------+-------+---------- public | products | table | postgres public | users | table | postgres (2 rows) Now let\u0026rsquo;s try to check which columns are available in the users table.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 test_database-# \\d users Table \u0026#34;public.users\u0026#34; Column | Type | Collation | Nullable | Default ------------+--------------------------+-----------+----------+----------------------------------- id | integer | | not null | nextval(\u0026#39;users_id_seq\u0026#39;::regclass) username | character varying(50) | | not null | email | character varying(100) | | not null | created_at | timestamp with time zone | | | CURRENT_TIMESTAMP Indexes: \u0026#34;users_pkey\u0026#34; PRIMARY KEY, btree (id) \u0026#34;users_email_key\u0026#34; UNIQUE CONSTRAINT, btree (email) \u0026#34;users_username_key\u0026#34; UNIQUE CONSTRAINT, btree (username) test_database-# \\d products Table \u0026#34;public.products\u0026#34; Column | Type | Collation | Nullable | Default ----------------+------------------------+-----------+----------+---------------------------------------------- product_id | integer | | not null | nextval(\u0026#39;products_product_id_seq\u0026#39;::regclass) name | character varying(100) | | not null | price | numeric(10,2) | | not null | stock_quantity | integer | | | 0 is_active | boolean | | | true Indexes: \u0026#34;products_pkey\u0026#34; PRIMARY KEY, btree (product_id) Hence, we can list the columns using the \\d table_name command.\nConclusion Thank you for reading the article. These are all the basics that you need to get started with psql. For detailed information, I would recommend you to check out postgresql's official documentation.\n","permalink":"http://localhost:1313/personal_website/posts/how_to_use_psql/","summary":"\u003ch3 id=\"launching-psql-session\"\u003eLaunching psql session\u003c/h3\u003e\n\u003cp\u003eIn my previous blog, I described how you can set up a \u003cstrong\u003epostgresql\nserver\u003c/strong\u003e. In this post, we will learn, what are some of the basic\ncommands in \u003ccode\u003epsql\u003c/code\u003e and how can we efficiently interact with it.\u003c/p\u003e\n\u003cp\u003eTo launch the \u003ccode\u003epsql\u003c/code\u003e terminal interface, you need to log into the\n\u003ccode\u003epostgres\u003c/code\u003e user or the \u003ccode\u003eusername\u003c/code\u003e that created the \u003ccode\u003epostgresql server\u003c/code\u003e.\nThis can be done using the \u003ccode\u003esu\u003c/code\u003e command.\u003c/p\u003e","title":"How to use psql"},{"content":"Database Cluster A database cluster is a collection of databases that is managed by a single instance of a running database server. In this post, we will talk about how to create a database cluster.\nPrerequisites The data created by postgresql is stored on the host file system in a directory called data directory. You can choose any directory to be data directory for example: /usr/local/pgsql/data or /var/lib/pgsql/data. The data directory is initialized using a program called initdb which comes with standard postgresql-server installation.\nInstalling postgresql-server Almost all linux systems provide a package called postgresql-server or a package with similar name. You can check the exact name by searching package repository for your distribution. For fedora, it is postgresql-server which can be installed by running:\n1 sudo dnf install postgresql-server Initializing the data directory The data directory can be intialized using initdb program. But before running the command, there are a few important points to remember:\nThe data must be owned by a particular user that is not root. Therefore it is advisable to create a new user. The postgresql installation automatically creates a user called postgres which can be used for the purpose. The data directory must be owned by the user you create. And all commands to control the server i.e. pg_ctl commands, must be issued using the special user you create. For this blog post, we will assume that you are going to use postgres user created by default, and use the directory /usr/local/psql/data as data directory.\nCreating the data directory Initially, the postgres user will not have permission to create a directory. Therefore, you first need to create the data directory and then change it\u0026rsquo;s owner to postgres\n1 2 sudo mkdir -p /usr/local/psql/data sudo chown postgres /usr/local/psql/data After this, initialize the data directory using:\n1 sudo -u postgres initdb -D /usr/local/psql/data Start the server Now you are all set. Start the server using:\n1 2 3 sudo -u postgres pg_ctl start -D /usr/local/psql/data # or # providing a log file sudo -u postgres pg_ctl start -D /usr/local/psql/data -l /path_log_file Please take special care that all commands must be issued by the postgres user, using sudo -u postgres [command].\nTesting and Using postgresql (Optional) After you have successfully fired up the postgresql server using the above instructions. You might want to test it.\nFor the purpose of using the postgresql-server you need a postgresql client. You can use psql, which is a terminal client for interacting with postgresql server. Most distributions provide a plain postgersql package which contains this binary. On fedora, simply run:\n1 sudo dnf install postgresql This will give you the psql command.\nsh man psql After, installing psql, now you need to log into your postgres user account and start psql. It is also recommended that you change the password for the postgres user as per your liking.\n1 2 $ sudo passwd postgres password: \u0026lt;enter a new password\u0026gt; Then simply log into the postgres user account.\n1 2 3 $ su postgresql bash-5.2$ psql postgres=# You are now logged into the psql shell. Use \\l to see available databases.\n1 2 3 4 5 6 7 8 9 10 postgres=# \\l List of databases Name | Owner | Encoding | Locale Provider | Collate | Ctype | ICU Locale | ICU Rules | Access privileges -----------+----------+----------+-----------------+-------------+-------------+------------+-----------+----------------------- postgres | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | template0 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres + | | | | | | | | postgres=CTc/postgres template1 | postgres | UTF8 | libc | en_US.UTF-8 | en_US.UTF-8 | | | =c/postgres + | | | | | | | | postgres=CTc/postgres (3 rows) By default, you get these 3 databases. You can run queries and play with the data.\n","permalink":"http://localhost:1313/personal_website/posts/how_to_deploy_a_postgersql_server/","summary":"\u003ch3 id=\"database-cluster\"\u003eDatabase Cluster\u003c/h3\u003e\n\u003cp\u003eA database cluster is a collection of databases that is managed by a\nsingle instance of a running database server. In this post, we will talk\nabout how to create a database cluster.\u003c/p\u003e\n\u003ch3 id=\"prerequisites\"\u003ePrerequisites\u003c/h3\u003e\n\u003cp\u003eThe data created by postgresql is stored on the host file system in a\ndirectory called \u003cstrong\u003edata directory\u003c/strong\u003e. You can choose any directory to be\ndata directory for example: \u003ccode\u003e/usr/local/pgsql/data\u003c/code\u003e or\n\u003ccode\u003e/var/lib/pgsql/data\u003c/code\u003e. The data directory is initialized using a program\ncalled \u003ccode\u003einitdb\u003c/code\u003e which comes with standard \u003ccode\u003epostgresql-server\u003c/code\u003e\ninstallation.\u003c/p\u003e","title":"How to deply a postgresql server"},{"content":"When nums[i] \u0026gt; nums[j], it is global inversion. Local inversion is special case of global inversion with j=i+1\nConsider the array: [0,1,2,3,4,5]\nIf i swap a random element by 2 positions (either to left or right). I will always create 2 inversions.\nLikewise, if I swap a random element by 3 positions. I end up creating 3 inversions.\nSimilarly if I swap an element by 4 positions. I end up creating 4 inversions.\nNote that for each swap made above, we created a single local inversion. This means that whever we swap 2 elements, we end up creating 1 local inversion and k global inversions. Where k means element swapped k number of positions away.\nNow, we need number of local inversions = number of global inversions. This can only happen when local inversion is itself the global inversion.\nHence, for each swap we should only create 1 inversion, THEREFORE K=1\n1 2 3 4 5 6 7 8 bool isIdealPermutation(int* nums, int numsSize) { for (int i=0; i \u0026lt; numsSize; i++) { if ( abs(nums[i]-i) \u0026gt; 1 ) return false; } return true; } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_775_global_and_local_inversions_solution/","summary":"\u003cp\u003eWhen \u003ccode\u003enums[i] \u0026gt; nums[j]\u003c/code\u003e, it is global inversion. Local inversion is special case of global inversion with \u003ccode\u003ej=i+1\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eConsider the array: \u003ccode\u003e[0,1,2,3,4,5]\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/2f3eb772-cc4d-4006-adec-d2937264734b_1752435521.47083.png\"\u003e\u003c/p\u003e\n\u003cp\u003eIf i swap a random element by 2 positions (either to left or right). I will always create 2 inversions.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/36424827-47b3-4fab-b464-6a02cbd9a953_1752435463.2740006.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/c9cefbb6-24e0-419e-8e4e-69178894068a_1752435700.7604558.png\"\u003e\u003c/p\u003e\n\u003cp\u003eLikewise, if I swap a random element by 3 positions. I end up creating 3 inversions.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/a5633f7f-c730-4671-8262-daed0eba9b80_1752435799.3669355.png\"\u003e\u003c/p\u003e\n\u003cp\u003eSimilarly if I swap an element by 4 positions. I end up creating 4 inversions.\u003c/p\u003e","title":"Leetcode 775: Global and local inversions solution"},{"content":"We need to divide the array nums into k subsets such that the sum of each subset is same.\n$$ k \\times sum\\ of\\ each\\ subset = total\\ sum\\ sum\\ of\\ each\\ subset = total\\ sum\\ \\div k\\ target = total\\ sum\\ \\div k $$\nNow our task is to find all the k subsets in nums whose sum is target.\nMy idea is to structure this as multi-level recursion. We first try to find the $$k^{th}$$ subset, then $$(k-1)^{th}$$, then $$(k-2)^{th} \u0026hellip;$$ until there is only one subset left. The last subset will naturally sum to target. You can only go to $$(k-1)^{th}$$ level when you are able to successfully find $$k^{th}$$ level subset,\nFor example,\n1 2 3 4 5 6 7 .. .. find the 5th subset find the 4th subset find the 3rd subset find the 2nd subset return true Seeing the recursive structure.\n1 2 3 4 5 6 7 8 9 nums = [4,3,2,3,5,2,1] k=4 target = 20 / 4 = 5 suppose you find the 4th subset as: {3,2} from [4,3,2,3,5,2,1] Now your task reduces to finding 3 subsets in [4, ,3,4,2,1] that sum to target=5 recursive call: nums=[4, ,3,4,2,1] k=3 When finding the kth subset. You can simply use pick/not pick backtracking approach. It is important to understant the distinction between same level recursion (at any given k) which operates by deciding weather to pick/drop nums@i.\nAnd the k levels recursion which succeeds/fails by checking if we can form the $$k^{th}$$ subset.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 class Solution: def __init__(self): self.nums, self.target, self.used = None, None, None def canPartitionKSubsets(self, nums: List[int], k: int) -\u0026gt; bool: self.nums = nums total = sum(self.nums) self.target = total // k self.used = [False] * len(nums) if total % k != 0: return False self.nums.sort(reverse=True) return self.bt_search(0, k, 0) def bt_search(self, i: int, k: int, cur_sum: int) -\u0026gt; bool: if k == 1: # last subset is sure to sum upto target return True if i \u0026gt;= len(self.nums) or cur_sum \u0026gt; self.target: return False if cur_sum == self.target: # current subset found, return self.bt_search(0, k-1, 0) # explore the next level of k # try picking nums@i in current subset if not self.used[i] and cur_sum + self.nums[i] \u0026lt;= self.target: self.used[i] = True # explore in same level if self.bt_search(i+1, k, cur_sum + self.nums[i]): return True self.used[i] = False # on failure, skip duplicates of nums@i while i+1 \u0026lt; len(self.nums) and self.nums[i] == self.nums[i+1]: i += 1 # do not pick nums@i -\u0026gt; explore in same level return self.bt_search(i+1, k, cur_sum) ","permalink":"http://localhost:1313/personal_website/posts/leetcode_698_partition_to_k_equal_sum_subsets/","summary":"\u003cp\u003eWe need to divide the array \u003ccode\u003enums\u003c/code\u003e into \u003ccode\u003ek\u003c/code\u003e subsets such that the sum of each subset is same.\u003c/p\u003e\n\u003cp\u003e$$\nk \\times sum\\ of\\ each\\ subset = total\\ sum\\\nsum\\ of\\ each\\ subset = total\\ sum\\ \\div k\\\ntarget = total\\ sum\\ \\div k\n$$\u003c/p\u003e\n\u003cp\u003eNow our task is to \u003cstrong\u003efind all the \u003ccode\u003ek\u003c/code\u003e subsets in nums whose sum is \u003ccode\u003etarget\u003c/code\u003e\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eMy idea is to structure this as multi-level recursion. We first try to find the $$k^{th}$$ subset, then $$(k-1)^{th}$$, then $$(k-2)^{th} \u0026hellip;$$ until there is only one subset left. The last subset will naturally sum to \u003ccode\u003etarget\u003c/code\u003e. You can only go to $$(k-1)^{th}$$ level when you are able to successfully find $$k^{th}$$ level subset,\u003c/p\u003e","title":"Leetcode 698: Partition into k equal sum subsets: The art of recursion: mastering double recursion in a single function"},{"content":"For each possible word, we ask the question: What possible queries can lead to this word?.\nFor example consider the word: abd. Below are the possible (prefix, suffix) queries that can return abd\n1 2 3 4 5 6 7 8 9 10 (prefix, suffix) a abd a bd a d ab abd ab bd ab d abd abd abd bd abd d Now, given word.length \u0026lt;= 7. Each word can at maximum generate 7*7=49 such pairs. Can we store all of them in a hashmap? Yes, because the total storage = 49 * number of words = O(n) Which is acceptable for this problem.\nWhat if there is already a value for (prefix,suffix) in current word. Shall we override it. We need the latest index right?\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 class WordFilter: def __init__(self, words: List[str]): self.map = {} for widx, w in enumerate(words): for i in range( len(w) ): prefix = w[:i+1] for j in range( len(w) ): suffix = w[j:] # for all possible prefix suffix queries that might route # to current word. We set it in dictionary overriding previously # inserted values to get the maximum index key = prefix + \u0026#39;|\u0026#39; + suffix self.map[key] = widx def f(self, pref: str, suff: str) -\u0026gt; int: key = pref + \u0026#39;|\u0026#39; + suff return self.map.get(key, -1) ","permalink":"http://localhost:1313/personal_website/posts/leetcode_745_prefix_and_suffix_search_solution/","summary":"\u003cp\u003eFor each possible word, we ask the question: \u003cstrong\u003eWhat possible queries can lead to this word?\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eFor example consider the word: \u003ccode\u003eabd\u003c/code\u003e. Below are the possible (prefix, suffix) queries that can return \u003ccode\u003eabd\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e(prefix, suffix)\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ea    abd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ea    bd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ea    d\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eab  abd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eab  bd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eab  d\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eabd  abd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eabd  bd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eabd  d\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eNow, given word.length \u0026lt;= 7. Each word can at maximum generate \u003ccode\u003e7*7=49\u003c/code\u003e such pairs. Can we store all of them in a hashmap? Yes, because the total storage = \u003ccode\u003e49 * number of words = O(n)\u003c/code\u003e Which is acceptable for this problem.\u003c/p\u003e","title":"Leetcode 745: Prefix and suffix search solution"},{"content":"This problem is very similar to lc543, which is about finding the longest edge path in a tree. You can just copy over that code, and add 2 lines in it.\nHere we are doing the same thing as in lc543, however, when we encounter a non-matching child. We treat it as null.\nFor example, here the longest path at root node is highlighted below in red with 6 edges.\nOur algorithm views the tree like this. The longest path of 3 edges is highlighted in red.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 int edges( struct TreeNode* node ); int longest_path; int longestUnivaluePath(struct TreeNode* root) { longest_path = 0; edges(root); return longest_path; } int edges( struct TreeNode* node ) { if ( !node ) return -1; int left = edges(node-\u0026gt;left), right = edges(node-\u0026gt;right); // treat child as null if it doesn\u0026#39;t match parent left = (node-\u0026gt;left \u0026amp;\u0026amp; node-\u0026gt;val == node-\u0026gt;left-\u0026gt;val) ? left : -1; right = (node-\u0026gt;right \u0026amp;\u0026amp; node-\u0026gt;val == node-\u0026gt;right-\u0026gt;val) ? right : -1; longest_path = fmax(longest_path, 1+left + 1+right); return 1 + fmax( left, right); } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Solution: def __init__(self): self.ans = 0 def longestUnivaluePath(self, root: Optional[TreeNode]) -\u0026gt; int: self.edges( root ) return self.ans def edges(self, node: Optional[TreeNode]) -\u0026gt; int: if not node: return -1 left, right = self.edges( node.left ), self.edges( node.right ) # if the child is illegitimate. Discard it if not node.left or node.left.val != node.val: left = -1 # treat as null if not node.right or node.right.val != node.val: right = -1 self.ans = max( self.ans, ( 1+left ) + ( 1 + right ) ) return 1 + max( left, right ) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 function longestUnivaluePath(root: TreeNode | null): number { let ans = 0; const edges = ( node: TreeNode|null ): number =\u0026gt; { if ( !node ) return -1; let left = edges( node.left ), right = edges( node.right ); // if child value doesn\u0026#39;t match -\u0026gt; treat as null left = (node.left \u0026amp;\u0026amp; node.val == node.left.val) ? left : -1; right = (node.right \u0026amp;\u0026amp; node.val == node.right.val) ? right : -1; ans = Math.max( ans, (1 + left) + (1 + right) ); return 1 + Math.max( left, right ); } edges( root ); return ans; }; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 function longestUnivaluePath(root) { let ans = 0; const edges = ( node ) =\u0026gt; { if ( !node ) return -1; let left = edges( node.left ), right = edges( node.right ); // if child value doesn\u0026#39;t match -\u0026gt; treat as null left = (node.left \u0026amp;\u0026amp; node.val == node.left.val) ? left : -1; right = (node.right \u0026amp;\u0026amp; node.val == node.right.val) ? right : -1; ans = Math.max( ans, (1 + left) + (1 + right) ); return 1 + Math.max( left, right ); } edges( root ); return ans; }; ","permalink":"http://localhost:1313/personal_website/posts/solution_to_leetcode_687_longest_univalue_path/","summary":"\u003cp\u003eThis problem is very similar to\n\u003ca href=\"https://leetcode.com/problems/diameter-of-binary-tree/solutions/6824338/solution-for-dummies-by-abdulrahim2002-yzrs/\"\u003elc543\u003c/a\u003e,\nwhich is about finding the longest edge path in a tree. You can just\ncopy over that code, and add 2 lines in it.\u003c/p\u003e\n\u003cp\u003eHere we are doing the same thing as in lc543, however, when we encounter a non-matching child. We treat it as null.\u003c/p\u003e\n\u003cp\u003eFor example, here the longest path at root node is highlighted below in red with 6 edges.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/148ffbfd-0ead-48cd-b45d-8c2575bafd11_1751999234.494938.png\"\u003e\u003c/p\u003e","title":"Solution to Leetcode 687: Longest Univalue Path"},{"content":"I keep track of the top k elements in sorted list. The kth largest element is the smallest of the top k elements.\ne.g. top k(=6) elements: [3,5,7,10,42,56] in sorted order. The kth largest element = 6th largest element = smallest element in above list.\nWhen I insert an element, I simply check if it can make it\u0026rsquo;s place among k largest elements already present in the list. Which it can, if it can defeat the smallest element in our list.\nFor example, we cannot add 2 in the array above since it fails to defeat 3.\nHowever, A number like 15 can be inserted. In which case, we remove the smallest element i.e. 3, to keep the list length=k\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 class KthLargest: def __init__(self, k: int, nums: List[int]): self.scores = SortedList() self.limit = k for num in nums: self.add(num) def add(self, val: int) -\u0026gt; int: # if the current element can make space in top k elements if len(self.scores) \u0026lt; self.limit or self.scores[0] \u0026lt; val: self.scores.add(val) # remove smallest if len(self.scores) \u0026gt; self.limit: self.scores.pop(0) # return smallest return self.scores[0] ","permalink":"http://localhost:1313/personal_website/posts/leetcode_703_kth_largest_element_in_a_stream/","summary":"\u003cp\u003eI keep track of the top k elements in sorted list.\nThe kth largest element is the \u003cstrong\u003esmallest of the top k elements\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003ee.g. top k(=6) elements: \u003ccode\u003e[3,5,7,10,42,56]\u003c/code\u003e in sorted order.\nThe kth largest element = 6th largest element = smallest element in above list.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/070564ea-afa3-4108-92e6-7fa76c2fb981_1752504996.0140414.png\"\u003e\u003c/p\u003e\n\u003cp\u003eWhen I insert an element, I simply check if it can make it\u0026rsquo;s place among k largest elements already present in the list. Which it can, if it can defeat the smallest element in our list.\u003c/p\u003e","title":"Leetcode 703: kth largest element in a stream solution in python"},{"content":"When numbers from $$\\in$$ [0,n-1] are sorted in an array of size n. Their sorted position is equal to their index.\nSubset of numbers in array[i:j] can form a partition, if all elements in [i,j) are available in array[i:j].\nFor example [2,0,1] can form a partition, since they are at index 0, 1, 2 respectively. Sorted will involving swapping them at their correct position.\nThe basic idea behind this solution is that we try to identify such partitions, where all elements required to be sorted in [i, j] are available in current partition.\nHere\u0026rsquo;s the visualization of the algorithm, i points to the start of the group and j iterates through the group and checks if the current group needs to be expanded. e points to the end of the current group.\nSince, array[j]=1, we found a number greater than current boundaries. We need to expand the boundary. Hence, new group end is e = array[j].\nIncrement j. We find that array[1] = 0 which is \u0026lt; current end. Increment j again, j=2, Hence, no we exhaust the current group and we move forward to finding the next partition. Increase, current group ending, and reinitialize i=e/\nIn the second group, we have array[j]=2 and we are at index 2. Hence, we do not need to expand this group, since 2 is at right position.\nSimilarly we find the next 2 partitions.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 int maxChunksToSorted(int* arr, int arrSize) { int cur_gp_end = 0, cnt_gps = 0, i = 0; while ( i \u0026lt; arrSize ) { int j = i; // try to terminate the current group while ( j \u0026lt;= cur_gp_end ) { cur_gp_end = fmax( cur_gp_end, arr[j] ); j++; } i = ++cur_gp_end; cnt_gps++; } return cnt_gps; } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_769_max_chunks_to_make_sorted/","summary":"\u003cp\u003eWhen numbers from $$\\in$$ \u003ccode\u003e[0,n-1]\u003c/code\u003e are sorted in an array of size n. Their sorted position is equal to their index.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/07a3b1d2-9478-486f-9f62-3a67e6dde1b3_1752513551.205261.png\"\u003e\u003c/p\u003e\n\u003cp\u003eSubset of numbers in \u003ccode\u003earray[i:j]\u003c/code\u003e can form a partition, if all elements in \u003ccode\u003e[i,j)\u003c/code\u003e are available in \u003ccode\u003earray[i:j]\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eFor example \u003ccode\u003e[2,0,1]\u003c/code\u003e can form a partition, since they are at index \u003ccode\u003e0, 1, 2\u003c/code\u003e respectively. Sorted will involving swapping them at their correct position.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/77d9235f-d72a-416a-bd77-d8802d7567b0_1752513786.651974.png\"\u003e\u003c/p\u003e\n\u003cp\u003eThe basic idea behind this solution is that we try to identify such partitions, where all elements required to be sorted in \u003ccode\u003e[i, j]\u003c/code\u003e are available in current partition.\u003c/p\u003e","title":"Leetcode 769: Max chunks to make sorted solution"},{"content":"For each word, we basically store all versions of it after removal of 1 character. For example,\n1 2 3 4 5 6 hello -\u0026gt; ello -\u0026gt; removed h@0 hllo -\u0026gt; removed e@1 helo -\u0026gt; removed l@2 helo -\u0026gt; removed l@3 hell -\u0026gt; removed o@4 We can store: wordAfterRemoval,indexOfRemoval in hashmap. So whenever we search for a word like: hexlo then we can try removing it\u0026rsquo;s 2nd index and search: helo,2 in the map, which we will find.\nIn the value we can store the removed character. For example, store key=helo,2 with value=l to indicate that l was removed.\nSo when you match a word like hexlo. Try to search helo,2 in the hashmap. It gives value=l which is !='x' i.e. the removed character in hexlo.\nHowever, there is one problem with this approach. When you add 2 words like: hello and hallo in the map. Then hllo,1 will give e in the first insertion and a in the second. The second overides the first so hello is forgetten by the structure. To avoid this issue, we store both of them (e, a) in a list.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 class MagicDictionary { private map = new Map\u0026lt;string,string[]\u0026gt;(); buildDict(dictionary: string[]): void { for ( const word of dictionary ) { for ( let i=0; i \u0026lt; word.length; i++ ) { const wordAfterRemoval = word.slice(0, i) + word.slice(i+1); // key stores wordAfterRemoval,indexOfRemoval as value const key = `${wordAfterRemoval},${i}`; if ( !this.map.has(key) ) this.map.set(key,[]); // values have the removed character this.map.get(key).push( word[i] ) } } } search(word: string): boolean { for ( let i=0; i \u0026lt; word.length; i++ ) { const wordAfterRemoval = word.slice(0, i) + word.slice(i+1); const key = `${wordAfterRemoval},${i}`; if ( !this.map.has(key) ) continue; const removedChars = this.map.get(key); // If there was a word with removed character != word[i] for ( let j=0; j \u0026lt; removedChars.length; j++ ) { if ( removedChars[j] !== word[i] ) return true; } } return false; } } You can also embed the index information by replacing the removed word with _ like in this pyton version:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class MagicDictionary: def __init__(self): self.map = {} def buildDict(self, dictionary: List[str]) -\u0026gt; None: for word in dictionary: for i in range(len(word)): key = word[0:i] + \u0026#39;_\u0026#39; + word[i+1:] if not key in self.map: self.map[key] = [] self.map[key].append(word[i]) def search(self, searchWord: str) -\u0026gt; bool: for i in range(len(searchWord)): key = searchWord[0:i] + \u0026#39;_\u0026#39; + searchWord[i+1:] if key not in self.map: continue for c in self.map[key]: if c != searchWord[i]: return True return False # Your MagicDictionary object will be instantiated and called as such: # obj = MagicDictionary() # obj.buildDict(dictionary) # param_2 = obj.search(searchWord) ","permalink":"http://localhost:1313/personal_website/posts/leetcode_676_magic_dictionary/","summary":"\u003cp\u003eFor each word, we basically store all versions of it after removal of 1 character. For example,\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e6\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ehello -\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eello -\u0026gt; removed h@0\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ehllo -\u0026gt; removed e@1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ehelo -\u0026gt; removed l@2\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ehelo -\u0026gt; removed l@3\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ehell -\u0026gt; removed o@4\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eWe can store: \u003ccode\u003ewordAfterRemoval,indexOfRemoval\u003c/code\u003e in hashmap. So whenever we search for a word like: \u003ccode\u003ehexlo\u003c/code\u003e then we can try removing it\u0026rsquo;s 2nd index and search: \u003ccode\u003ehelo,2\u003c/code\u003e in the map, which we will find.\u003c/p\u003e","title":"Leetcode 676: Magic dictionary"},{"content":"Problem definition: For the output array, you need to calculate the absolute difference of each adjacent items. The number of unique absolute differences needs to be exactly k. For example in [1,3,2]: abs(1-3) = 2 abs(3-2) = 1 Thus [2,1] with 2 unique values as in example 2. credits: @Frans Valli\nApproach: Divide the array into 2 halves. The left half will contain numbers continously increasing by 1. The right half will contain numbers, such that the differences are continously decreasing by 1.\nMove the max element to (n-k) index. The left half will have 1, 2, 3, ... n-k+1. The right half will contain minimum and maximum numbers (from the elements that are left over)\nExample: For n=6 and k=1: Base case: max is at 6th position: 1,2,3,4,5,6 differences: 1,1,1,1,1\nFor n=6 and k=2: Max is at 5th position 1,2,3,4,6,5 differences: 1,1,1,2,1 -\u0026gt; 2 unique\nFor n=6 and k=3: Max is at 4th position 1,2,3,6,4,5 differences: 1,1,3,2,1 -\u0026gt; 3 unique\nFor n=6 and k=4: Max is at 3rd position 1,2,6,3,5,4 differences: 1,4,3,2,1 -\u0026gt; 4 unique\nFor n=6 and k=5: Max is at 2nd position 1,6,2,5,3,4 differences: 5,4,3,2,1 -\u0026gt; 5 unique\nProcedure Let\u0026rsquo;s take example of n=6 and k=3: Let max = 6 and min =1\nFirst add all n-k elements to result while incrementing min res = [1,2,3], min = 4,max=6\nThen, add max and min to the result alternatively, decreasing max and increasing min when adding them\nSteps: res = [1,2,3,6], min = 4, max = 5\nres = [1,2,3,6,4], min = 5, max = 5\nres = [1,2,3,6,4,5], min = 5, max = 4\ncredits: @piyushkumar1993\nCode 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 class Solution { public int[] constructArray(int n, int k) { int[] res = new int[n]; int left = 1, right = n; // 1,2,3... for ( int i=0; i \u0026lt; (n-k); i++ ) { res[i] = left++; } // maximum element at (n-k)th index res[n-k] = right--; boolean add_left = true; // for index b/w [n-k+1,n) -\u0026gt; alternate b/w min and max for ( int i=n-k+1; i \u0026lt; n; i++ ) { res[i] = (add_left) ? left++ : right--; add_left = !add_left; } return res; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 class Solution { public: vector\u0026lt;int\u0026gt; constructArray(int n, int k) { vector\u0026lt;int\u0026gt; res(n); int left = 1, right = n; // 1,2,3... for ( int i=0; i \u0026lt; (n-k); i++ ) { res[i] = left++; } // maximum element at (n-k)th index res[n-k] = right--; bool add_left = true; // for index b/w [n-k+1,n) -\u0026gt; alternate b/w min and max for ( int i=n-k+1; i \u0026lt; n; i++ ) { res[i] = (add_left) ? left++ : right--; add_left = !add_left; } return res; } }; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 int* constructArray(int n, int k, int* returnSize) { int* res = (int*) malloc( n * sizeof(int) ); returnSize[0] = n; int left = 1, right = n; for ( int i=0; i \u0026lt; (n-k); i++ ) { res[i] = left++; } res[n-k] = right--; bool add_left = true; for ( int i=n-k+1; i \u0026lt; n; i++ ) { res[i] = (add_left) ? left++ : right--; add_left = !add_left; } return res; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class Solution: def constructArray(self, n: int, k: int) -\u0026gt; List[int]: res = [] left, right = 1, n # 1,2,3... for i in range(n-k): res.append(left) left += 1 # maximum element at (n-k)th index res.append(right) right -= 1 # for index b/w [n-k+1,n) -\u0026gt; alternate b/w min and max add_left = True for i in range(n-k+1, n): if add_left: res.append(left) left += 1 else: res.append(right) right -= 1 add_left = not add_left return res 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /** * @param {number} n * @param {number} k * @return {number[]} */ var constructArray = function(n, k) { const res = new Array(n); let left = 1, right = n; // 1,2,3... for ( let i=0; i \u0026lt; (n-k); i++ ) { res[i] = left++; } // maximum element at (n-k)th index res[n-k] = right--; let add_left = true; // for index b/w [n-k+1,n) -\u0026gt; alternate b/w min and max for ( let i=n-k+1; i \u0026lt; n; i++ ) { res[i] = (add_left) ? left++ : right--; add_left = !add_left; } return res; }; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 function constructArray(n: number, k: number): number[] { const res = new Array\u0026lt;number\u0026gt;(n); let left = 1, right = n; // 1,2,3... for ( let i=0; i \u0026lt; (n-k); i++ ) { res[i] = left++; } // maximum element at (n-k)th index res[n-k] = right--; let add_left = true; // for index b/w [n-k+1,n) -\u0026gt; alternate b/w min and max for ( let i=n-k+1; i \u0026lt; n; i++ ) { res[i] = (add_left) ? left++ : right--; add_left = !add_left; } return res; }; ","permalink":"http://localhost:1313/personal_website/posts/leetcode_667_beautiful_arrangements_2_solution/","summary":"\u003ch2 id=\"problem-definition\"\u003eProblem definition:\u003c/h2\u003e\n\u003cp\u003eFor the output array, you need to calculate the absolute difference of each adjacent items. The number of unique absolute differences needs to be exactly k.\nFor example in [1,3,2]:\nabs(1-3) = 2\nabs(3-2) = 1\nThus [2,1] with 2 unique values as in example 2.\ncredits: \u003ca href=\"/u/FransV\"\u003e@Frans Valli\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"approach\"\u003eApproach:\u003c/h2\u003e\n\u003cp\u003eDivide the array into 2 halves. The left half will contain numbers continously increasing by 1. The right half will contain numbers, such that the \u003cstrong\u003edifferences\u003c/strong\u003e are continously decreasing by 1.\u003c/p\u003e","title":"Leetcode 667: Beautiful arrangements 2"},{"content":"Suppose, while traversing the array you encounter a 132 pattern that violates the non-decreasing property. Now you have 2 options to fix this anomaly.\na=1, b=3, c=2\nEither we decrease b and make it equal to c i.e.b=c=2. Or we increase c to make it equal to b i.e. c=b=3. I would argue that we should always try to decrease b. Since, it enables us to have lower last value i.e. c. It decreases the chance of next number in the sequence violating the non-decreasing property.\nIn the same example, suppose, we had another number d=2. The the first case, we can accomodate d, to make the sequence 1222. While in the second case, we are unable to accomodate d, since that would make the sequence 1332 (invalid)\nThere is one exception to this rule.\nSuppose we encounter a 130 pattern. In this case, our only option to fix the sequence is to make c=b=3, so that the pattern becomes 133.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class Solution: def checkPossibility(self, nums: List[int]) -\u0026gt; bool: cnt_violations=0 for i in range(1, len(nums)): if nums[i-1] \u0026gt; nums[i]: cnt_violations+=1 if cnt_violations \u0026gt; 1: return False # only in 130 pattern shall you increase nums[i] if i-2 \u0026gt;= 0 and nums[i-2] \u0026gt; nums[i]: nums[i] = nums[i-1] # 132 pattern -\u0026gt; decrease nums[i-1] else: nums[i-1] = nums[i] return True 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class Solution { public: bool checkPossibility(vector\u0026lt;int\u0026gt;\u0026amp; nums) { int cnt_violations = 0; for ( int i=1; i \u0026lt; nums.size(); i++ ) { if ( nums[i-1] \u0026gt; nums[i] ) { cnt_violations++; if ( cnt_violations \u0026gt; 1 ) return false; // only when 130 pattern, shall you increase nums[i] if ( i-2 \u0026gt;= 0 \u0026amp;\u0026amp; nums[i-2] \u0026gt; nums[i] ) { nums[i] = nums[i-1]; } // 132 pattern -\u0026gt; decrease nums[i-1] else { nums[i-1] = nums[i]; } } } return true; } }; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 bool checkPossibility(int* nums, int numsSize) { int cnt_violations = 0; for ( int i=1; i \u0026lt; numsSize; i++ ) { if ( nums[i-1] \u0026gt; nums[i] ) { cnt_violations++; if ( cnt_violations \u0026gt; 1 ) return false; // only when 130 pattern, shall you increase nums[i] if ( i-2 \u0026gt;= 0 \u0026amp;\u0026amp; nums[i-2] \u0026gt; nums[i] ) { nums[i] = nums[i-1]; } // 132 pattern -\u0026gt; decrease nums[i-1] else { nums[i-1] = nums[i]; } } } return true; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 class Solution { public boolean checkPossibility(int[] nums) { int cnt_violations = 0; for ( int i=1; i \u0026lt; nums.length; i++ ) { if ( nums[i-1] \u0026gt; nums[i] ) { cnt_violations++; if ( cnt_violations \u0026gt; 1 ) return false; // only when 130 pattern, shall you increase nums[i] if ( i-2 \u0026gt;= 0 \u0026amp;\u0026amp; nums[i-2] \u0026gt; nums[i] ) { nums[i] = nums[i-1]; } // 132 pattern -\u0026gt; decrease nums[i-1] else { nums[i-1] = nums[i]; } } } return true; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 function checkPossibility(nums: number[]): boolean { let cnt_violations = 0; for ( let i=1; i \u0026lt; nums.length; i++ ) { if ( nums[i-1] \u0026gt; nums[i] ) { cnt_violations++; if ( cnt_violations \u0026gt; 1 ) return false; // only when 130 pattern, shall you increase nums[i] if ( i-2 \u0026gt;= 0 \u0026amp;\u0026amp; nums[i-2] \u0026gt; nums[i] ) { nums[i] = nums[i-1]; } // 132 pattern -\u0026gt; decrease nums[i-1] else { nums[i-1] = nums[i]; } } } return true; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 function checkPossibility(nums) { let cnt_violations = 0; for ( let i=1; i \u0026lt; nums.length; i++ ) { if ( nums[i-1] \u0026gt; nums[i] ) { cnt_violations++; if ( cnt_violations \u0026gt; 1 ) return false; // only when 130 pattern, shall you increase nums[i] if ( i-2 \u0026gt;= 0 \u0026amp;\u0026amp; nums[i-2] \u0026gt; nums[i] ) { nums[i] = nums[i-1]; } // 132 pattern -\u0026gt; decrease nums[i-1] else { nums[i-1] = nums[i]; } } } return true; } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_665_non_decreasing_array/","summary":"\u003cp\u003eSuppose, while traversing the array you encounter a 132 pattern that violates the non-decreasing property. Now you have 2 options to fix this anomaly.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ea=1, b=3, c=2\u003c/code\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEither we decrease \u003ccode\u003eb\u003c/code\u003e and make it equal to \u003ccode\u003ec\u003c/code\u003e i.e.\u003ccode\u003eb=c=2\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eOr we increase \u003ccode\u003ec\u003c/code\u003e to make it equal to \u003ccode\u003eb\u003c/code\u003e i.e. \u003ccode\u003ec=b=3\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/ef560ef1-6b1c-4c8d-a835-d972664a8e2d_1751569584.9842699.png\"\u003e\u003c/p\u003e\n\u003cp\u003eI would argue that we should always try to decrease \u003ccode\u003eb\u003c/code\u003e. Since, it enables us to have lower last value i.e. \u003ccode\u003ec\u003c/code\u003e. It decreases the chance of next number in the sequence violating the non-decreasing property.\u003c/p\u003e","title":"Leetcode 665: Non decreasing array solution"},{"content":"We build a simple Tri where each node\u0026rsquo;s value is the sum of all words in the Tri that have same prefix as current node.\nLet me explain with a simple example. Suppose, we have an empty Tri. Insert \u0026quot;apple\u0026quot; with value=3. While inserting a key, we shall increase values of all intermediate nodes.\nHere\u0026rsquo;s how to Tri looks like after insertion:\nNow let\u0026rsquo;s insert \u0026quot;app\u0026quot; with value=2. Please note that we shall increase the value of intermediate nodes while inserting app. Therefore, the first 3 nodes will have value=5.\nNow if you observe carefully. The query for the prefix ap will end up at the first p node from start, which will have value=5. This is the desired behaviour as both \u0026quot;app\u0026quot; and \u0026quot;apple\u0026quot; share prefix \u0026quot;ap\u0026quot;, hence we return sum of their values.\nSo far so good. But what happens, when we want to update the value for a word. For example, I want to change the value for \u0026quot;apple\u0026quot; form 3 to 1.\nTo solve this problem, first we need to figure out how can we delete the value of \u0026quot;apple\u0026quot;. Fortunately, this can be simply done by inserting negative of old value. For example, we can delete the value of apple by inserting -1 * old_value = -3.\nNotice that now queries like: \u0026quot;appl\u0026quot; will give result=0 since there is no longer any word in the Tri with prefix \u0026quot;appl\u0026quot;.\nNow we can just reinsert the new value for \u0026quot;apple\u0026quot; i.e. 1.\nNote that queries like \u0026quot;ap\u0026quot; will return 3 which is correct since, \u0026quot;apple\u0026quot; -\u0026gt; 1 and \u0026quot;app\u0026quot; -\u0026gt; 2.\nWhile update the value of keys, we can just combine the steps of deleting and reinserting into one by just inserting -(old value) + (new value).\nComplexity Time complexity: $$O( prefix.length )$$ for sum() and $$O(word.length)$$ for insert()\nSpace complexity: $$O(n)$$\nCode 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 class MapSum { public map = new Map\u0026lt;string, number\u0026gt;(); public tri = new Tri(); insert(key: string, val: number): void { let oldVal = this.map.get(key)??0; this.map.set(key, val); this.tri.insert(key, -oldVal + val); } sum(prefix: string): number { return this.tri.query(prefix); } } class TriNode { public children = new Map\u0026lt;string,TriNode\u0026gt;(); public val: number = 0; } class Tri { public root = new TriNode(); insert(word: string, value: number) { let node = this.root; for ( let i=0; i \u0026lt; word.length; i++ ) { if ( !node.children.has(word[i]) ) node.children.set(word[i], new TriNode()); node = node.children.get(word[i]); node.val += value; } } query(prefix: string) { let node = this.root; for ( let i=0; i \u0026lt; prefix.length; i++ ) { if ( !node.children.has(prefix[i]) ) return 0; node = node.children.get(prefix[i]); } return node.val; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 class TrieNode: def __init__(self): self.children = dict() self.val = None self.is_leaf = False def set_val(self, val): self.val = val def set_leaf(self): self.is_leaf = True class MapSum: def __init__(self): self.trie = TrieNode() def insert(self, key: str, val: int) -\u0026gt; None: curr = self.trie for ch in key: if ch not in curr.children: curr.children[ch] = TrieNode() curr = curr.children[ch] curr.set_val(val) curr.set_leaf() def sum(self, prefix: str) -\u0026gt; int: curr = self.trie sum_prefix = 0 for ch in prefix: if ch not in curr.children: return 0 curr = curr.children[ch] if curr.is_leaf: sum_prefix += curr.val queue = collections.deque([curr]) while queue: curr = queue.popleft() for child, node in curr.children.items(): queue.append(node) if node.is_leaf: sum_prefix += node.val return sum_prefix # Your MapSum object will be instantiated and called as such: # obj = MapSum() # obj.insert(key,val) # param_2 = obj.sum(prefix) ","permalink":"http://localhost:1313/personal_website/posts/leetcode_677_map_sum_pairs/","summary":"\u003cp\u003eWe build a simple Tri where each node\u0026rsquo;s value is the sum of all words in the Tri that have same prefix as current node.\u003c/p\u003e\n\u003cp\u003eLet me explain with a simple example. Suppose, we have an empty Tri. Insert \u003ccode\u003e\u0026quot;apple\u0026quot;\u003c/code\u003e with \u003ccode\u003evalue=3\u003c/code\u003e. While inserting a key, we shall increase values of all intermediate nodes.\u003c/p\u003e\n\u003cp\u003eHere\u0026rsquo;s how to Tri looks like after insertion:\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://assets.leetcode.com/users/images/72dcefb6-a178-4bdf-8a51-b036825d56f3_1751391227.1387794.png\"\u003e\u003c/p\u003e\n\u003cp\u003eNow let\u0026rsquo;s insert \u003ccode\u003e\u0026quot;app\u0026quot;\u003c/code\u003e with \u003ccode\u003evalue=2\u003c/code\u003e. Please note that we shall increase the value of intermediate nodes while inserting app. Therefore, the first 3 nodes will have \u003ccode\u003evalue=5\u003c/code\u003e.\u003c/p\u003e","title":"Leetcode 677: Map sum pairs solution"},{"content":"We are given a number n. On the number line, there are infinite numbers on the right of n and left of n that are palindromes.\nThe question is asking us to find a number that is a palindrome and has the minimum distance from n on the number line.\nWe break the problem into 2 parts:\nfind the next element on the number line after n that is a palindrome. find the previous element on the number line before n that is a palindrome. Suppose i and j are numbers such that i \u0026lt; n \u0026lt; j and i and j are both palindromes. And i and j are the nearest numbers to n on the number line We just find which of i and j is the nearer one to n on the number line and return it The simplest way of doing this is:\ni = n-1 j = n+1 while ( !isPalindrome(i) ) i--; while ( !isPalindrome(j) ) j++; dist_j = j - n dist_i = n - i if ( dist_i == dist_j ) return i return ( dist_i \u0026lt; dist_j ) ? i : j However, given that n could be as high as $$10^{18}$$. This approach is impractical.\nLuckly, there is an efficient approach to find the next and previous numbers to a particular number that is a plindrome.\nConsider the number 123. Lets try to find out the next larger palindrome to 123\nWe can break this number into 2 parts: 12 and 3. Note that we incude the left value in left half when the length is odd.\nWe can construct a palindrome by mirroring the first half as:121. However, 121 \u0026lt; 123 therefore we need a larger algorithm. We do this by simply increasing the left half to 12 + 1 = 13. The palindrome can then be constructed as 131 which is larger than 123. You shall keep on increasing the left half, until the palindrome you obtain becomes larger enough. If you observe carefully, then you will notice that 131 is the smallest number on the number line that is a palindrome to the right of 123. This holds true in general. There is an edge case where this appraoch does not work. Particularly when n = \u0026lsquo;999999999\u0026hellip;\u0026hellip;\u0026rsquo; The next palindrome in this case is given by n+2. For example, next palindrome of 999=1001, 99999=100001 and so on.\nThe previous palindrome to n can also be generated this way. Insted of increasing the left half, we would decrease it instead. Again, a note of caution, there are 2 edge cases. When n = 1000.....0001 then the previous palindrome is given by n-2. For example, previous palindrome of 101=99, 1001=999 and so on.\nMoreover, the previous palindrome of 1000...00 is given by n-1. For example previous palindrome of 100=99, 1000=999 and so on.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 class Solution: def nearestPalindromic(self, n: str) -\u0026gt; str: next_pal = self.find_next_pal( n ) next_diff = int(next_pal) - int(n) prev_pal = self.find_prev_pal( n ) prev_diff = int(n) - int(prev_pal) if ( next_diff == prev_diff ): return prev_pal return next_pal if next_diff \u0026lt; prev_diff else prev_pal def find_next_pal( self, num: str ) -\u0026gt; str: # edge case: num like 9, 99, 99999, 9999999 etc. if re.match( r\u0026#39;^9+$\u0026#39;, num ): return str( int(num) + 2 ) # step 1: split the number into left and right half mid = (1+len(num))//2 left_half = num[:mid] while True: # step 2: find current palindrome by mirroring left half if len(num) % 2 == 0: pal = left_half + left_half[::-1] else: pal = left_half + left_half[:-1][::-1] # step 3: increment left half if palindrome is not greater than num if int(pal) \u0026lt;= int(num): left_half = str( int(left_half) + 1 ) else: return pal def find_prev_pal( self, num: str ) -\u0026gt; str: # edge case: num like 101, 1001, 1000001 or 10 10000 1000000 etc. if re.match( r\u0026#39;^10*1$\u0026#39;, num ) or re.match( r\u0026#39;^10+$\u0026#39;, num ): return str(int(num)-2) if re.match( r\u0026#39;^10*1$\u0026#39;, num ) else str(int(num)-1) # step 1: split the number into left and right half mid = len(num)//2 left_half = num[:mid] if len(num)%2==0 else num[:mid+1] while True: # step 2: find current pal by mirroring left half if len(num) % 2 == 0: pal = left_half + left_half[::-1] else: pal = left_half + left_half[:-1][::-1] # step 3: decrement left half if palindrome is not smaller than num if int(pal) \u0026gt;= int(num): left_half = str( int(left_half) - 1 ) else: return pal 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 import java.util.regex.Pattern; import java.math.BigInteger; class Solution { public String nearestPalindromic(String n) { String nextPal = nextPalindrome(n); String prevPal = prevPalindrome(n); BigInteger diffNext = new BigInteger(nextPal).subtract( new BigInteger(n) ); BigInteger diffPrev = new BigInteger(n).subtract(new BigInteger(prevPal)); // If differences are equal, return the smaller one if (diffNext.compareTo(diffPrev) == 0) { return prevPal; } // Return the one with smaller difference return diffNext.compareTo(diffPrev) \u0026lt; 0 ? nextPal : prevPal; } public static String nextPalindrome(String num) { // Edge case: num is all 9s (e.g., \u0026#34;9\u0026#34;, \u0026#34;99\u0026#34;, \u0026#34;999999\u0026#34;) if (Pattern.matches(\u0026#34;^9+$\u0026#34;, num)) { return new BigInteger(num).add(BigInteger.TWO).toString(); } int n = num.length(); int mid = n / 2; String leftHalf = n % 2 == 0 ? num.substring(0, mid) : num.substring(0, mid + 1); while (true) { // Mirror left half to form the palindrome String palindrome; if (n % 2 == 0) { palindrome = leftHalf + new StringBuilder(leftHalf).reverse().toString(); } else { palindrome = leftHalf + new StringBuilder( leftHalf.substring(0, leftHalf.length() - 1) ).reverse().toString(); } // increment left half if (new BigInteger(palindrome).compareTo(new BigInteger(num)) \u0026lt;= 0) { leftHalf = new BigInteger(leftHalf).add(BigInteger.ONE).toString(); } else return palindrome; } } public static String prevPalindrome(String num) { // Edge case: num like \u0026#34;1001\u0026#34;, \u0026#34;100001\u0026#34;, \u0026#34;10000000001\u0026#34; etc. if (Pattern.matches(\u0026#34;^10*1$\u0026#34;, num)) { return new BigInteger(num).subtract(BigInteger.TWO).toString(); } // Edge case: num like \u0026#34;100\u0026#34;, \u0026#34;10000\u0026#34;, \u0026#34;10000000\u0026#34; etc. if (Pattern.matches(\u0026#34;^10*$\u0026#34;, num)) { return new BigInteger(num).subtract(BigInteger.ONE).toString(); } int n = num.length(); int mid = n / 2; String leftHalf = n % 2 == 0 ? num.substring(0, mid) : num.substring(0, mid + 1); while (true) { // Mirror left half to form the palindrome String palindrome; if (n % 2 == 0) { palindrome = leftHalf + new StringBuilder(leftHalf).reverse().toString(); } else { palindrome = leftHalf + new StringBuilder( leftHalf.substring(0, leftHalf.length() - 1) ).reverse().toString(); } // devrement left half is palindromw is larger if (new BigInteger(palindrome).compareTo(new BigInteger(num)) \u0026gt;= 0) { leftHalf = new BigInteger(leftHalf).subtract(BigInteger.ONE).toString(); } else return palindrome; } } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 function nearestPalindromic(n: string): string { const next = nextPalindrome(n), prev = prevPalindrome(n), prevDiff = BigInt( n ) - BigInt( prev ), nextDiff = BigInt( next ) - BigInt( n ); if ( prevDiff === nextDiff ) return prev; return ( prevDiff \u0026lt; nextDiff ) ? prev : next; } function nextPalindrome( num: string ): string { // edge case: num = 9* if ( /^9+$/.test(num) ) return String( BigInt(num) + 2n ); // step 1: split the number into left and right half const N = num.length, mid = Math.floor( N/2 ); let leftHalf = (N%2==0) ? num.slice(0, mid) : num.slice( 0, mid+1 ); while ( true ) { // step 2: form the current palindrome by mirroring left half let curPalindrome; if ( N%2==0 ) { curPalindrome = leftHalf + leftHalf.split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } else { curPalindrome = leftHalf + leftHalf.slice(0,-1).split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } // step 3: increment left half if current palindrome is not greater then num if ( BigInt(curPalindrome) \u0026lt;= BigInt(num) ) { leftHalf = String( BigInt(leftHalf) + 1n ); } else return curPalindrome; } } function prevPalindrome( num: string ): string { // edge case: num = 1(0*)1 if ( /^10*1$/.test(num) ) return String( BigInt(num) - 2n ); if ( /^10+$/.test(num) ) return String( BigInt(num) - 1n ); // step 1: split the number into left and right half const N = num.length, mid = Math.floor( N/2 ); let leftHalf = (N%2==0) ? num.slice(0, mid) : num.slice( 0, mid+1 ); while ( true ) { // step 2: form the current palindrome by mirroring left half let curPalindrome; if ( N%2==0 ) { curPalindrome = leftHalf + leftHalf.split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } else { curPalindrome = leftHalf + leftHalf.slice(0,-1).split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } // step 3: decrement left half if current palindrome is not smaller than num if ( BigInt(curPalindrome) \u0026gt;= BigInt(num) ) { leftHalf = String( BigInt(leftHalf) - 1n ); } else return curPalindrome; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 /** * @param {string} n * @return {string} */ var nearestPalindromic = function(n) { const next = nextPalindrome(n), prev = prevPalindrome(n), prevDiff = BigInt(n) - BigInt(prev), nextDiff = BigInt(next) - BigInt(n); if (prevDiff === nextDiff) return prev; return (prevDiff \u0026lt; nextDiff) ? prev : next; }; function nextPalindrome(num) { // edge case: num = 9* if (/^9+$/.test(num)) return String(BigInt(num) + 2n); // step 1: split the number into left and right half const N = num.length, mid = Math.floor(N / 2); let leftHalf = (N % 2 === 0) ? num.slice(0, mid) : num.slice(0, mid + 1); while (true) { // step 2: form the current palindrome by mirroring left half let curPalindrome; if (N % 2 === 0) { curPalindrome = leftHalf + leftHalf.split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } else { curPalindrome = leftHalf + leftHalf.slice(0, -1).split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } // step 3: increment left half if current palindrome is not greater than num if (BigInt(curPalindrome) \u0026lt;= BigInt(num)) { leftHalf = String(BigInt(leftHalf) + 1n); } else { return curPalindrome; } } } function prevPalindrome(num) { // edge case: num = 1(0*)1 or 1(0*) if (/^10*1$/.test(num)) return String(BigInt(num) - 2n); if (/^10+$/.test(num)) return String(BigInt(num) - 1n); // step 1: split the number into left and right half const N = num.length, mid = Math.floor(N / 2); let leftHalf = (N % 2 === 0) ? num.slice(0, mid) : num.slice(0, mid + 1); while (true) { // step 2: form the current palindrome by mirroring left half let curPalindrome; if (N % 2 === 0) { curPalindrome = leftHalf + leftHalf.split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } else { curPalindrome = leftHalf + leftHalf.slice(0, -1).split(\u0026#39;\u0026#39;).reverse().join(\u0026#39;\u0026#39;); } // step 3: decrement left half if current palindrome is not smaller than num if (BigInt(curPalindrome) \u0026gt;= BigInt(num)) { leftHalf = String(BigInt(leftHalf) - 1n); } else { return curPalindrome; } } } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_564_find_the_closest_palindrome/","summary":"\u003cp\u003eWe are given a number \u003ccode\u003en\u003c/code\u003e. On the number line, there are infinite numbers on the right of \u003ccode\u003en\u003c/code\u003e and left of \u003ccode\u003en\u003c/code\u003e that are palindromes.\u003c/p\u003e\n\u003cp\u003eThe question is asking us to find a number that is a palindrome and has the minimum distance from \u003ccode\u003en\u003c/code\u003e on the number line.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"ok\" loading=\"lazy\" src=\"https://i.ibb.co/4ZrF3Tnx/Screenshot-from-2025-06-28-18-27-24.png\"\u003e\u003c/p\u003e\n\u003cp\u003eWe break the problem into 2 parts:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003efind the next element on the number line after \u003ccode\u003en\u003c/code\u003e that is a palindrome.\u003c/li\u003e\n\u003cli\u003efind the previous element on the number line before \u003ccode\u003en\u003c/code\u003e that is a palindrome.\u003c/li\u003e\n\u003cli\u003eSuppose \u003ccode\u003ei\u003c/code\u003e and \u003ccode\u003ej\u003c/code\u003e are numbers such that \u003ccode\u003ei \u0026lt; n \u0026lt; j\u003c/code\u003e and \u003ccode\u003ei\u003c/code\u003e and \u003ccode\u003ej\u003c/code\u003e are both palindromes. And \u003ccode\u003ei\u003c/code\u003e and \u003ccode\u003ej\u003c/code\u003e are the nearest numbers to \u003ccode\u003en\u003c/code\u003e on the number line\u003c/li\u003e\n\u003cli\u003eWe just find which of \u003ccode\u003ei\u003c/code\u003e and \u003ccode\u003ej\u003c/code\u003e is the nearer one to \u003ccode\u003en\u003c/code\u003e on the number line and return it\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe simplest way of doing this is:\u003c/p\u003e","title":"Leetcode 564: Find the closest palindrome"},{"content":"I use hcreate(), hdestroy() and hsearch() from C standard library for hashmap implementation.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #define _GNU_SOURCE #include \u0026lt;search.h\u0026gt; #include \u0026lt;errno.h\u0026gt; #define MAX_SIZE 1e4 #define KEY_SIZE 20 ENTRY* create_entry_set_number( int data ); bool dfs( struct TreeNode*, int ); bool findTarget(struct TreeNode* root, int k) { hcreate( MAX_SIZE ); const bool res = dfs( root, k ); hdestroy(); return res; } bool dfs( struct TreeNode* node, int target ) { if ( !node ) return false; const ENTRY* required = create_entry_set_number( target - node -\u0026gt; val ); const ENTRY* cur_node = create_entry_set_number( node -\u0026gt; val ); if ( hsearch( *required, FIND ) ) return true; else hsearch( *cur_node, ENTER ); return dfs( node -\u0026gt; left, target ) || dfs( node -\u0026gt; right, target ); } ENTRY* create_entry_set_number( int data ) { ENTRY* item = ( ENTRY* ) malloc( sizeof(ENTRY) ); if ( !item ) exit(-ENOMEM); *item = ( ENTRY ) { .key = NULL, .data = NULL }; item -\u0026gt; key = (char*) reallocarray( item-\u0026gt;key, KEY_SIZE, sizeof(char) ); sprintf( item -\u0026gt; key, \u0026#34;%d\u0026#34;, data ); return item; } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_653_2_sum_with_bst/","summary":"\u003cp\u003eI use \u003ccode\u003ehcreate()\u003c/code\u003e, \u003ccode\u003ehdestroy()\u003c/code\u003e and \u003ccode\u003ehsearch()\u003c/code\u003e from C standard library\nfor hashmap implementation.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e20\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e21\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e22\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e23\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e24\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e25\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e26\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e27\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e28\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e29\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e30\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e31\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e32\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e33\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e34\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e35\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e36\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e37\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e38\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e39\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e40\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e41\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#define _GNU_SOURCE\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;search.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;errno.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#define MAX_SIZE 1e4\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e#define KEY_SIZE 20\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cp\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_entry_set_number\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003edfs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003efindTarget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eroot\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ek\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003ehcreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eMAX_SIZE\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003edfs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eroot\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ek\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003ehdestroy\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003edfs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003etarget\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003enode\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003erequired\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_entry_set_number\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003etarget\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003enode\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ecur_node\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_entry_set_number\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003enode\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nf\"\u003ehsearch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003erequired\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFIND\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nf\"\u003ehsearch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ecur_node\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eENTER\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003edfs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003enode\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etarget\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"nf\"\u003edfs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003enode\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etarget\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate_entry_set_number\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003emalloc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"k\"\u003esizeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"nf\"\u003eexit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eENOMEM\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eENTRY\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ekey\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nf\"\u003ereallocarray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eKEY_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003esizeof\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nf\"\u003esprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Leetcode 653: 2 sum with a BST"},{"content":"consider the word \u0026ldquo;catsdogcats\u0026rdquo;. We have the dictionary: [\u0026quot;cat\u0026quot;,\u0026quot;cats\u0026quot;,\u0026quot;catsdogcats\u0026quot;,\u0026quot;dog\u0026quot;,\u0026quot;dogcatsdog\u0026quot;,\u0026quot;hippopotamuses\u0026quot;,\u0026quot;rat\u0026quot;,\u0026quot;ratcatdogcat\u0026quot;]\nWe iterate over the word: catsdogcats and at each iteration, we ask if the prefix is contained in dictionary.\nIf the prefix is in the dictionary, we recursively call the function on the remaining word (excluding matched prefix)\nis c in dictionary ? is ca in dictionary ? is cat in dictionary ? -\u0026gt; YES call( sdogcats ) \u0026ndash;[1] Prefix cat matched so recursively call with sdogcats\nis s in dictionary ? is sd in dictionary ? \u0026hellip;. is sdogcats in dictionary ? NO We exhausted the word so we return false. Nothing was matched\nBack at the first call, this time we try to match cats Return to [1]\nis cats in dictionary -\u0026gt; YES recursively call on dogcats\nis d in dictionary ?\nis do in dictionary ?\nis dog in dictionary ? -\u0026gt; YES, recursively call on cats\nis c in dictionary ?\nis ca in dictionary ?\nis cat in dictionary ? YES , recursively call(s) \u0026ndash;[2]\nis s in dictionary ? NO -\u0026gt; word exhausted, return false;\nBack at recursive call [2]\nis cats in dictionary ? YES recursively call(``) i.e. empty string When we reach empty string, it means whole of string can be constructed using words in dictionary. Hence return true.\nImport considerations:\nThe dictionary has all the words, which means that catsdogcats will match with itself completely. To avoid words matching with themselves, we tell the function to ignore the catsdogcats word to avoid matching it with itself. Also, we can memoize the results since, dictionary remains the same, only target word and ignore word changes. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 function findAllConcatenatedWordsInADict(words: string[]): string[] { const dict = new Set\u0026lt;string\u0026gt;( words ); return words.filter( curWord =\u0026gt; canChunk( curWord, curWord, dict ) ); }; function canChunk( target: string, ignore: string, dict: Set\u0026lt;string\u0026gt;, memo = new Map\u0026lt;string, boolean\u0026gt;() ): boolean { if ( !target.length ) return true; const key = target + ignore; if ( memo.has( key ) ) return memo.get( key ); for ( let i=1; i \u0026lt;= target.length; i++ ) { const prefix = target.slice( 0, i ); if ( prefix !== ignore \u0026amp;\u0026amp; dict.has( prefix ) \u0026amp;\u0026amp; canChunk( target.slice( i ), ignore, dict, memo ) ) { memo.set( key, true ); return true; } } memo.set( key, false ); return false; } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_472_concatenated_words/","summary":"\u003cp\u003econsider the word \u0026ldquo;catsdogcats\u0026rdquo;. We have the dictionary: \u003ccode\u003e[\u0026quot;cat\u0026quot;,\u0026quot;cats\u0026quot;,\u0026quot;catsdogcats\u0026quot;,\u0026quot;dog\u0026quot;,\u0026quot;dogcatsdog\u0026quot;,\u0026quot;hippopotamuses\u0026quot;,\u0026quot;rat\u0026quot;,\u0026quot;ratcatdogcat\u0026quot;]\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eWe iterate over the word: \u003ccode\u003ecatsdogcats\u003c/code\u003e and at each iteration, we ask if the prefix is contained in dictionary.\u003c/p\u003e\n\u003cp\u003eIf the prefix is in the dictionary, we recursively call the function on the remaining word (excluding matched prefix)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eis \u003ccode\u003ec\u003c/code\u003e in dictionary ?\u003c/li\u003e\n\u003cli\u003eis \u003ccode\u003eca\u003c/code\u003e in dictionary ?\u003c/li\u003e\n\u003cli\u003eis \u003ccode\u003ecat\u003c/code\u003e in dictionary ? -\u0026gt; YES       call( \u003ccode\u003esdogcats\u003c/code\u003e ) \u0026ndash;[1]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ePrefix \u003ccode\u003ecat\u003c/code\u003e matched so recursively call with \u003ccode\u003esdogcats\u003c/code\u003e\u003c/p\u003e","title":"Leetcode 472: Concatenated words"},{"content":"Level order traversal traverse down the levels until we are 1 level above the level to be replaced. for each node in the level obtained above, set left and right node value to val, and the original leftSubtree and rightSubtree become left and right links of newly inserted left and right node respectively 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 function addOneRow( root: TreeNode|null, val: number, depth: number): TreeNode|null { if ( depth \u0026lt;= 1 ) { return new TreeNode( val, root, null ); } let que = [ root ]; for ( let d=1; que.length \u0026amp;\u0026amp; d \u0026lt; depth-1; d++ ) { const LVL = que.length; for ( let j=0; j \u0026lt; LVL; j++ ) { const node = que.shift(); if ( node.left ) que.push( node.left ); if ( node.right ) que.push( node.right ); } } while ( que.length ) { const node = que.shift(), leftSubtree = node.left, rightSubtree = node.right; node.left = new TreeNode( val, leftSubtree, null ); node.right = new TreeNode( val, null, rightSubtree ); } return root; }; Time: $$ O(n) $$ Space: $$ O(n) $$ Recursive delegation The idea here is that if we need to update the dth level at node, then we need to update the (d-1)th level from node.left and node.right.\nWhat are the stopping conditions?\nThe current node is null -\u0026gt; just return null. The tree cannot be changed The depth is 1 -\u0026gt; make new node as root and put the current root in left child depth is 2 -\u0026gt; this means that we are 1 level above node-line to be changed. We insert the new nodes as child to current node, and the children are made grandchildren of current node. This way we make the required changes for current node only. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 function addOneRow( node: TreeNode|null, val: number, depth: number): TreeNode|null { if ( !node ) return null; if ( depth \u0026lt;= 1 ) { return new TreeNode( val, node, null ); } if ( depth == 2 ) { const leftSubtree = node.left, rightSubtree = node.right; node.left = new TreeNode( val, leftSubtree, null ); node.right = new TreeNode( val, null, rightSubtree ); return node; } addOneRow( node.left, val, depth-1 ); addOneRow( node.right, val, depth-1 ); return node; }; Time: $$ O(n) $$ Space: $$ O(log\\ n) $$ ","permalink":"http://localhost:1313/personal_website/posts/leetcode_623_add_one_row_to_tree/","summary":"\u003ch1 id=\"level-order-traversal\"\u003eLevel order traversal\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003etraverse down the levels until we are 1 level above the level to be replaced.\u003c/li\u003e\n\u003cli\u003efor each node in the level obtained above, set left and right node value to \u003ccode\u003eval\u003c/code\u003e, and the original leftSubtree and rightSubtree become left and right links of newly inserted left and right node respectively\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e20\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e21\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e22\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e23\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e24\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e25\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e26\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e27\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e28\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-typescript\" data-lang=\"typescript\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddOneRow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003eroot\u003c/span\u003e: \u003cspan class=\"kt\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                    \u003cspan class=\"nx\"\u003eval\u003c/span\u003e: \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003edepth\u003c/span\u003e: \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003edepth\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003eval\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eroot\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e \u003cspan class=\"nx\"\u003eroot\u003c/span\u003e \u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nx\"\u003ed\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003edepth\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ed\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eLVL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eLVL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003enode\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eshift\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eleft\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003epush\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eleft\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eright\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003epush\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eright\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kr\"\u003econst\u003c/span\u003e   \u003cspan class=\"nx\"\u003enode\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eque\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eshift\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"nx\"\u003eleftSubtree\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"nx\"\u003erightSubtree\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eleft\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003eval\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eleftSubtree\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nx\"\u003enode\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eright\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eTreeNode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003eval\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003erightSubtree\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eroot\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eTime: $$ O(n) $$\u003c/li\u003e\n\u003cli\u003eSpace: $$ O(n) $$\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"recursive-delegation\"\u003eRecursive delegation\u003c/h1\u003e\n\u003cp\u003eThe idea here is that if we need to update the \u003ccode\u003edth\u003c/code\u003e level at node, then we need to update the \u003ccode\u003e(d-1)th\u003c/code\u003e level from \u003ccode\u003enode.left\u003c/code\u003e and \u003ccode\u003enode.right\u003c/code\u003e.\u003c/p\u003e","title":"Leetcode 623: Add one row to the tree"},{"content":"The task is to find a subarray with sum of elements = k\nTo do this, we can build the prefix array with: $$ prefix\\ [x] = \\sum_{k=0}^x nums\\ [k] $$\nThe sum of elements between subarray indices $$[i, j]$$ where $$j \u0026gt; i$$ is defined as:\n$$ prefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=0}^{j} nums\\ [k] - \\sum_{k=0}^{i-1} nums\\ [k]\\ prefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=i}^{j} nums\\ [k] $$\nNow we are looking for sub of subarray = T(target). Therefore:\n$$ sum\\ of\\ subarray = prefix\\ [j]\\ -\\ prefix\\ [i-1] = T\\ \\ prefix\\ [i-1] = prefix\\ [j]\\ - T $$\nTherefore, we iterate the prefix array. And at each prefix[j], we search for a previously inserted prefix[i-1] such that prefix[i-1] = prefix[j] - T. We also need the count of such subarrays. At a particular j the number of subarrays where sum=T is the number of i that occured previously such that prefix[i-1] = prefix[j] - T. Index j will form a subarray with each of such previous i\u0026rsquo;s.\nWe must store the mapping: ( prefix[x], count ) in a map.\nSo far so good. But what happens when $$i=0$$. In this case, sum of subarray between indices [0, j] is defined as:\n$$ prefix\\ [j] = \\sum_{k=0}^j nums\\ [k] = T $$\nAt each index j, the code will try to look for prefix[j] - T in the map. When prefix[j]=T itself, then it would look for T-T=0 into the map. Therefore we must keep prefix= 0, count= 1 into the map to account for subarrays starting at index 0.\nCode 1 2 3 4 5 6 7 8 9 10 11 12 13 function subarraySum(nums: number[], k: number): number { const map = new Map\u0026lt;number, number\u0026gt;([ [0, 1] ]); let sumk = 0; for ( let j=0; j \u0026lt; nums.length; j++ ) { nums[j] = ( j==0 ) ? nums[j] : nums[j-1] + nums[j]; sumk += map.get( nums[j] - k ) ?? 0; map.set( nums[j], ( map.get(nums[j]) ?? 0 ) + 1 ); } return sumk; }; ","permalink":"http://localhost:1313/personal_website/posts/leetcode_560_subarray_sub_equal_k_solution/","summary":"\u003cp\u003eThe task is to find a subarray with \u003ccode\u003esum of elements = k\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eTo do this, we can build the prefix array with: $$ prefix\\ [x] = \\sum_{k=0}^x nums\\ [k] $$\u003c/p\u003e\n\u003cp\u003eThe sum of elements between subarray indices $$[i, j]$$ where $$j \u0026gt; i$$ is defined as:\u003c/p\u003e\n\u003cp\u003e$$\nprefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=0}^{j} nums\\ [k] - \\sum_{k=0}^{i-1} nums\\ [k]\\\nprefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=i}^{j} nums\\ [k]\n$$\u003c/p\u003e","title":"Leetcode 560: Subarray sum equals k"},{"content":"Explanation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 Consider the number: [1(0), 1(1), 2(2), 3(3), 3(4), 4(5), 4(6), 8(7), 8(8)] , number(index) Here, the single number is 2, let\u0026#39;s call it SN Note that: - For each duplicate pair that appears to the left of SN, the first occurence appears at even index and second occurence appears at odd index - For each duplicate pair that appears to the right of SN, the first occurence appears at odd index and second occurence appears at even index Now to easily detect weather we are to the left or right of SN, we can employ XOR with 1 operator. Property of XOR with 1 operator: XOR_1(x) = x ^ 1 = x + 1 , when x is even XOR_1(x) = x ^ 1 = x - 1 , when x is odd From this knowledge, it can be infered that for each index i: number[ i ] = number[ XOR_1(i) ] ,when i is to left of SN number[ i ] != number[ XOR_1(i) ] ,when i is at SN or to the right of SN For example, at i=1, i is to left of SN number[i] = number[1] = 1 == number[ XOR_1(1) ] = number[ 1-1 ] = number[0] = 1 at i=2, i is at Single Number (SN) number[2] = 2 != number[XOR_1(2)] = number[3] = 3 at i=6, i is to right of SN number[6] = 4 != number[XOR_1(6)] = number[7] = 8 You can verify this for any i Now our job is to find the minimum valud of i such that number[i] != number[XOR_1(i)] This can be done using binary search. It is worth mentioning that at i=8 in the above example number[ XOR_1(8) ] = number[ 9 ] which is out of bonds We avoid this situation by using ( i \u0026lt; j ) as loop condition. Which implies that i will never reach the end to make mid = 9 The binary search is designed such that j always takes valid values, where valid means nums[j] != nums[j^1] When i == j, we are at the leftmost valid index, which is exactly what we require Code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 function singleNonDuplicate(nums: number[]): number { const N = nums.length; let i = 0, j = N-1; while ( i \u0026lt; j ) { const mid = i + Math.floor( (j-i) / 2 ); if ( nums[mid] != nums[mid^1] ) j = mid; else i = mid + 1; } return nums[j]; }; ","permalink":"http://localhost:1313/personal_website/posts/leetcode_540_single_element_in_sorted_arary/","summary":"\u003ch2 id=\"explanation\"\u003eExplanation\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e20\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e21\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e22\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e23\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e24\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e25\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e26\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e27\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e28\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e29\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e30\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e31\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e32\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e33\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e34\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e35\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e36\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e37\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e38\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e39\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e40\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e41\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e42\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e43\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e44\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e45\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e46\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e47\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e48\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e49\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e50\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e51\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e52\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e53\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e54\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e55\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e56\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e57\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e58\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e59\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e60\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eConsider the number: \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e[1(0), 1(1), 2(2), 3(3), 3(4), 4(5), 4(6), 8(7), 8(8)]\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    , number(index)\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eHere, the single number is 2, let\u0026#39;s call it SN\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eNote that:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e- For each duplicate pair that appears to the left \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  of SN, the first occurence appears at even index \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  and second occurence appears at odd index\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e- For each duplicate pair that appears to the right \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  of SN, the first occurence appears at odd index \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e  and second occurence appears at even index\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eNow to easily detect weather we are to the left or\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eright of SN, we can employ XOR with 1 operator.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eProperty of XOR with 1 operator:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eXOR_1(x) = x ^ 1 = x + 1   , when x is even\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eXOR_1(x) = x ^ 1 = x - 1   , when x is odd\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eFrom this knowledge, it can be infered that for each index i:\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enumber[ i ]  = number[ XOR_1(i) ]  ,when i is to \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                    left of SN \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enumber[ i ] != number[ XOR_1(i) ]  ,when i is at SN or to \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                    the right of SN\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eFor example, at i=1, i is to left of SN\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enumber[i] = number[1] = 1 == number[ XOR_1(1) ] \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e= number[ 1-1 ] = number[0] = 1\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eat i=2, i is at Single Number (SN)\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enumber[2] = 2 != number[XOR_1(2)] = number[3] = 3\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eat i=6, i is to right of SN\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enumber[6] = 4 != number[XOR_1(6)] = number[7] = 8\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eYou can verify this for any i\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eNow our job is to find the minimum valud of i such that\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enumber[i] != number[XOR_1(i)]\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eThis can be done using binary search.\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eIt is worth mentioning that at i=8 in the above example\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003enumber[ XOR_1(8) ] = number[ 9 ] which is out of bonds\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eWe avoid this situation by using ( i \u0026lt; j ) as loop \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003econdition. Which implies that i will never reach the \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eend to make mid = 9\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eThe binary search is designed such that j always takes\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003evalid values, where valid means nums[j] != nums[j^1]\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eWhen i == j, we are at the leftmost valid index, which\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eis exactly what we require\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch2 id=\"code\"\u003eCode\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-typescript\" data-lang=\"typescript\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003esingleNonDuplicate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enums\u003c/span\u003e: \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e\u003cspan class=\"p\"\u003e[])\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eN\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eN\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emid\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nb\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efloor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003emid\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"nx\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003emid\u003c/span\u003e\u003cspan class=\"o\"\u003e^\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003ej\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003emid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003emid\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003enums\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Leetcode 540: Single element in sorted array"},{"content":"Consider the array: [0,1,1,0,0,1,1,0,1,1] The idea is to turn the 0\u0026rsquo;s into -1\u0026rsquo;s\narray: [-1,1,1,-1,-1,1,1,-1,1,1]\nNow, the task is to find a subarray with sum of elements = 0\nTo do this, we can build the prefix array with: $$ prefix\\ [x] = \\sum_{k=0}^x nums\\ [k] $$\nThe sum of elements between subarray indices $$[i, j]$$ where $$j \u0026gt; i$$ is defined as:\n$$ prefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=0}^{j} nums\\ [k] - \\sum_{k=0}^{i-1} nums\\ [k]\\ prefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=i}^{j} nums\\ [k] $$\nAnd the length of the subarray between indices $$[i,j]$$ is defined as: $$length(i,j) = j-i+1 = j-(i-1) $$\nNow we are looking for sub of subarray = 0. Therefore:\n$$ sum\\ of\\ subarray = prefix\\ [j]\\ -\\ prefix\\ [i-1] = 0\\ prefix\\ [j]\\ =\\ prefix\\ [i-1] $$\nTherefore, we iterate the prefix array. And at each prefix[j], we search for a previously inserted prefix[i-1] such that prefix[j]=prefix[i-1]. We record the length of the current subarray as: length = j-(i-1).\nWe must store the mapping: ( prefix[k], k ) in a map to achieve this.\nSo far so good. But what happens when $$i=0$$. In this case, sum of subarray between indices [0, j] is defined as:\n$$ prefiix\\ [j] = \\sum_{k=0}^j nums\\ [k] $$\nAnd the length of the subarray [0,j] is: $$j+1 = j-(-1)$$\nTherefore we keep a superficial (prefix = 0, index = -1) in the map.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 function findMaxLength(nums: number[]): number { const map = new Map\u0026lt;number, number\u0026gt;( [ [0, -1], ] ); let maxLen = 0; for ( let j=0; j \u0026lt; nums.length; j++ ) { let cur = ( nums[j] == 1 ) ? 1 : -1; nums[j] = ( j==0 ) ? cur : cur + nums[j-1]; // prefix sum occured previously at i. Length = j-i if ( map.has( nums[j] ) ) { let i = map.get( nums[j] ); maxLen = Math.max( maxLen, j - i ); } // put the current prefix sum into map if ( !map.has( nums[j] ) ) map.set( nums[j], j ); } return maxLen; }; ","permalink":"http://localhost:1313/personal_website/posts/leetcode_525_contiguous_array/","summary":"\u003cp\u003eConsider the array: \u003ccode\u003e[0,1,1,0,0,1,1,0,1,1] \u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThe idea is to turn the 0\u0026rsquo;s into -1\u0026rsquo;s\u003c/p\u003e\n\u003cp\u003earray: \u003ccode\u003e[-1,1,1,-1,-1,1,1,-1,1,1]\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eNow, the task is to find a subarray with \u003ccode\u003esum of elements = 0\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eTo do this, we can build the prefix array with: $$ prefix\\ [x] = \\sum_{k=0}^x nums\\ [k] $$\u003c/p\u003e\n\u003cp\u003eThe sum of elements between subarray indices $$[i, j]$$ where $$j \u0026gt; i$$ is defined as:\u003c/p\u003e\n\u003cp\u003e$$\nprefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=0}^{j} nums\\ [k] - \\sum_{k=0}^{i-1} nums\\ [k]\\\nprefix\\ [j]\\ -\\ prefix\\ [i-1] = \\sum_{k=i}^{j} nums\\ [k]\n$$\u003c/p\u003e","title":"Leetcode 525: Contiguous array"},{"content":" for each character, find the length of the longest continous substring that ends with that character for each character the number of continous substrings that end in that character = length of the longest continous substring that ends in that character ( as obtained in step 1 ) Code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 function findSubstringInWraproundString(s: string): number { let curStreak = -1, lenMap = new Array(26).fill(0); for ( let i=0; i \u0026lt; s.length; i++ ) { if ( i \u0026gt; 0 \u0026amp;\u0026amp; isContinous( s[i-1], s[i] ) ) curStreak++; else curStreak = 1; lenMap[ CODE(s[i]) ] = Math.max( lenMap[ CODE( s[i] ) ], curStreak ); } return lenMap.reduce( (sum, curLen) =\u0026gt; sum += curLen, 0 ); }; function isContinous( c1: string, c2: string ) { return ( CODE(c2) - CODE(c1) + 26 ) % 26 == 1; } function CODE( c: string ) { return c.charCodeAt(0) - \u0026#39;a\u0026#39;.charCodeAt(0); } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_467_unique_substrings_in_wraparound_string_solution/","summary":"\u003col\u003e\n\u003cli\u003efor each character, find the length of the longest continous substring that ends with that character\u003c/li\u003e\n\u003cli\u003efor each character the number of \u003cem\u003econtinous substrings\u003c/em\u003e that end in that character = length of the longest continous substring that ends in that character ( as obtained in step 1 )\u003c/li\u003e\n\u003c/ol\u003e\n\u003cimg src=\"https://assets.leetcode.com/users/images/92a07d59-0d42-4866-9eb8-dc5b86b2963d_1748717768.2913718.png\" alt=\"explanation\" width=\"300\" height=\"200\"\u003e\n\u003ch1 id=\"code\"\u003eCode\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e20\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e21\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-typescript\" data-lang=\"typescript\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003efindSubstringInWraproundString\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003es\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003enumber\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ecurStreak\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nx\"\u003elenMap\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eArray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e26\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efill\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nx\"\u003eisContinous\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"nx\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nx\"\u003ecurStreak\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"nx\"\u003ecurStreak\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nx\"\u003elenMap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e \u003cspan class=\"nx\"\u003eCODE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eMath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emax\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003elenMap\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e \u003cspan class=\"nx\"\u003eCODE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"nx\"\u003ecurStreak\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003elenMap\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ereduce\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecurLen\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003esum\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecurLen\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eisContinous\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003ec1\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ec2\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003eCODE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ec2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"nx\"\u003eCODE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ec1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e26\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"mi\"\u003e26\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eCODE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003ec\u003c/span\u003e: \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003ec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echarCodeAt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"s1\"\u003e\u0026#39;a\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echarCodeAt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Leetcode 467: Unique Substrings in Wraparound String (Solution with intuition)"},{"content":"The idea is to keep 2 pointers. trail pointer and cur pointer. The list is build in recursive function build(trail, cur) which returns last node of the list we build.\nbuild works as follows:\nwhen there is no child node: simply connect trail and cur and advance both when there is a child node, then recursively call itself with build( trail = cur, cur = cur.child ). The call would connect cur node with the list in the next level. It would return the last node in next level. Then we assign trail = last node in next level and cur = cur.next in current level. This ensures that the next iteration would connect last node in next level to next node in current level. when cur becomes null trail is the last node in current level. return trail Code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 function flatten(head: _Node | null): _Node | null { const save: _Node = new _Node( -1 ); build( save, head ); if ( save.next ) save.next.prev = null; return save.next; }; function build( trail: _Node | null, cur: _Node | null ): _Node | null { while ( cur ) { if ( !cur.child ) { trail.next = cur; cur.prev = trail; trail = trail.next; cur = cur.next; } else { trail.next = cur; cur.prev = trail; const saveNext = cur.next; const lastNodeFromChildList = build( cur, cur.child ); cur.child = null; cur = saveNext; trail = lastNodeFromChildList; } } return trail; } Complexity Time complexity: $$O(n)$$\nSpace complexity: $$O(n)$$ {recursion stack}\n","permalink":"http://localhost:1313/personal_website/posts/leetcode_430_flattening_multilevel_linked_list/","summary":"\u003cp\u003eThe idea is to keep 2 pointers. \u003ccode\u003etrail\u003c/code\u003e pointer and \u003ccode\u003ecur\u003c/code\u003e pointer. The\nlist is build in recursive function \u003ccode\u003ebuild(trail, cur)\u003c/code\u003e which returns\nlast node of the list we build.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ebuild\u003c/code\u003e works as follows:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003ewhen there is no \u003ccode\u003echild\u003c/code\u003e node: simply connect \u003ccode\u003etrail\u003c/code\u003e and \u003ccode\u003ecur\u003c/code\u003e and advance both\u003c/li\u003e\n\u003cli\u003ewhen there is a \u003ccode\u003echild\u003c/code\u003e node, then recursively call itself with \u003ccode\u003ebuild( trail = cur, cur = cur.child )\u003c/code\u003e. The call would connect \u003ccode\u003ecur\u003c/code\u003e node with the \u003ccode\u003elist in the next level\u003c/code\u003e. It would return the last node in next level. Then we assign \u003ccode\u003etrail = last node in next level\u003c/code\u003e and \u003ccode\u003ecur = cur.next in current level\u003c/code\u003e. This ensures that the next iteration would connect \u003ccode\u003elast node in next level\u003c/code\u003e to \u003ccode\u003enext node in current level\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003ewhen \u003ccode\u003ecur\u003c/code\u003e becomes \u003ccode\u003enull\u003c/code\u003e \u003ccode\u003etrail\u003c/code\u003e is the last node in current level. \u003ccode\u003ereturn trail\u003c/code\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1 id=\"code\"\u003eCode\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e 1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e20\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e21\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e22\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e23\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e24\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-typescript\" data-lang=\"typescript\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eflatten\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ehead\u003c/span\u003e: \u003cspan class=\"kt\"\u003e_Node\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003e_Node\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kr\"\u003econst\u003c/span\u003e   \u003cspan class=\"nx\"\u003esave\u003c/span\u003e: \u003cspan class=\"kt\"\u003e_Node\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003e_Node\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"nx\"\u003ebuild\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ehead\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"nx\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprev\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003ebuild\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e: \u003cspan class=\"kt\"\u003e_Node\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e: \u003cspan class=\"kt\"\u003e_Node\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003e_Node\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echild\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprev\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprev\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esaveNext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"kr\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003elastNodeFromChildList\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ebuild\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echild\u003c/span\u003e \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echild\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003ecur\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003esaveNext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003elastNodeFromChildList\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003etrail\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch1 id=\"complexity\"\u003eComplexity\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eTime complexity:  $$O(n)$$\u003c/p\u003e","title":"Leetcode 430: Flattening a multilevel linked list"},{"content":"DFS intuition First we must build a graph where airports are vertices and an edge airport1 -\u0026gt; airport2 denotes that the person travelled from airport1 -\u0026gt; airport2\nTo find a valid sequence of vertices/airports that covers all the edges/tickets, we traverse the graph using depth first search like traversal. The idea is:\nAt each vertex, move to the next lexicographically smallest vertex. delete the edge used To maintain lexicographical order, we sort the neighbours of each vertex lexicographically.\nAlgorithm: Step 1: Build an adjacency list, where the neighbours of each node are sorted lexicographically\nStep 2: Traverse using DFS starting from \u0026ldquo;JFK\u0026rdquo; airport. Remove edges as you move through the graph.\nIncorrect approach 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 /** * @param {string[][]} tickets * @return {string[]} */ var findItinerary = function(tickets) { const graph = {}; for ( const [from, to] of tickets ) { if ( !graph[from] ) graph[from] = []; graph[from].push(to); } for ( const node of Object.keys(graph) ) graph[node].sort(); const path = []; const dfs = ( node = \u0026#34;JFK\u0026#34; ) =\u0026gt; { path.push(node); const to_where = graph[node] || []; while ( to_where.length ) { // remove the edge and visit the next smallest dfs( to_where.shift() ); } }; dfs(); return path; }; Why it does not work: Consider this example: [[\u0026ldquo;JFK\u0026rdquo;,\u0026ldquo;KUL\u0026rdquo;],[\u0026ldquo;JFK\u0026rdquo;,\u0026ldquo;NRT\u0026rdquo;],[\u0026ldquo;NRT\u0026rdquo;,\u0026ldquo;JFK\u0026rdquo;]]\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 +---+ +---+ |JFK|----\u0026gt;|KUL| +---+ +---+ | ^ | | v | +---+ |NRT| +---+ path = [] # algorithm starts at JFK @JFK -\u0026gt; add(JFK) neighbours -\u0026gt; [KUL, NRT] explore(KUL) and remove edge JFK-\u0026gt;KUL ----(call 1) graph becomes: path = [JFK] +---+ +---+ |JFK| |KUL| +---+ +---+ | ^ | | v | +---+ |NRT| +---+ @KUL -\u0026gt; add(KUL) there are no neighbours so return to call(1) graph becomes: path = [JFK, KUL] +---+ +---+ |JFK| |KUL| +---+ +---+ | ^ | | v | +---+ |NRT| +---+ # So you see, we are again at JFK, even though there # is no edge from KUL to JFK @JFK again neighbours now -\u0026gt; [NRT] explore(NRT) and remove edge JFK-\u0026gt;NRT ----(call 2) +---+ +---+ |JFK| |KUL| +---+ +---+ ^ | | +---+ |NRT| +---+ @NRT -\u0026gt; add(NRT) neighbours -\u0026gt; [JFK] explore(JFK) and delete NRT -\u0026gt; JFK --- call(3) graph becomes: +---+ +---+ path = [JFK, KUL, NRT] |JFK| |KUL| +---+ +---+ +---+ |NRT| +---+ @ JFK -\u0026gt; add(JFK) no neighnour so return to call(3) graph becomes: +---+ +---+ path = [JFK, KUL, NRT, JFK] |JFK| |KUL| +---+ +---+ +---+ |NRT| +---+ @NRT (call 3) -\u0026gt; no more neighbours so return to call 2 @JFK (call 2) -\u0026gt; no more neighbours so algorithm ends The final path is: [JFK,KUL,NRT,JFK]\nIf we look at our tickets again: [[JFK, KUL],[JFK, NRT],[NRT, JFK]]\nWe go from JFK to KUL using the ticket [JFK, KUL]. Then we move from KUL to NRT even though there is no direct ticket [KUL, NRT].\nFrom our dry run, we saw how the algorithm transported us back from KUL to JFK, by magically teleporting us.\nCorrect approach So how to fix the problem above. The fix is simple, we shall only add a vertex, if all subgraph containing that vertex has been fully explored. This approach ensures that we are only using continous links.\nThis code is just 2 lines away from the dfs code above. I added comments on what changed and why.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 /** * @param {string[][]} tickets * @return {string[]} */ var findItinerary = function(tickets) { const graph = {}; for ( const [from, to] of tickets ) { if ( !graph[from] ) graph[from] = []; graph[from].push(to); } for ( const node of Object.keys(graph) ) graph[node].sort(); const path = []; const dfs = ( node = \u0026#34;JFK\u0026#34; ) =\u0026gt; { const to_where = graph[node] || []; while ( to_where.length ) dfs( to_where.shift() ); path.push(node); // add node only after all // the subgraph has been explored }; dfs(); // we changed the order of insertion, and // we must reverse the path to obtain the original // itinerary return path.reverse(); }; Complexity Time: $$O( E )$$ Space: $$ O( V*E ) $$ // for storing the graph Additional info: An Eulerian trail or Euler walk, in an undirected graph is a walk that uses each edge exactly once. There are mainly 2 algorithms to solve this problem: Fleury\u0026rsquo;s algorithm, Hierholzer\u0026rsquo;s algorithm. [source: https://en.wikipedia.org/wiki/Eulerian_path]\nWhat we did above is a varient of Heirholzer\u0026rsquo;s algorithm.\n","permalink":"http://localhost:1313/personal_website/posts/leetcode_332_reconstruct_itenary/","summary":"\u003ch2 id=\"dfs-intuition\"\u003eDFS intuition\u003c/h2\u003e\n\u003cp\u003eFirst we must build a graph where airports are vertices and  an edge \u003ccode\u003eairport1 -\u0026gt; airport2\u003c/code\u003e denotes that the person travelled from \u003ccode\u003eairport1 -\u0026gt; airport2\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eTo find a valid sequence of \u003ccode\u003evertices/airports\u003c/code\u003e \u003cstrong\u003ethat covers all the \u003ccode\u003eedges/tickets\u003c/code\u003e\u003c/strong\u003e, we traverse the graph using depth first search like traversal. The idea is:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAt each vertex, move to the next lexicographically smallest vertex.\u003c/li\u003e\n\u003cli\u003edelete the edge used\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo maintain lexicographical order, we sort the neighbours of each vertex lexicographically.\u003c/p\u003e","title":"Leetcode 332: Reconstruct Itinerary. Eulerian path and Dfs"},{"content":"Below is my solution for the leetcode 154: Find minimum in rotated sorted array problem\nIntuition Fact is, that you cannot solve this question in O(log n) time. The reason is because of duplicates.\nConsider a situation like:\n$$ [2,2,2,2,1,2,2] $$\nwhere mid is at 3 and the minium number here is clearly $$1$$. But our binary search algorithm will not be able to figure out in which direction it should go, since starting, ending and middle values are all same. In this case the best we can do is increment mid which makes the worst running time: O(n)\nHowever, it is possible to solve this problem in O(n/2) as explain below.\nApproach We will make use of the fact that a sorted array follows the (min) heap property i.e. in a sorted array, at all parent nodes are smaller than their children.\nAnd if this sorted array is rotated, then the place at which the first violation occurs is the subtree where the answer will be found.\nComplexity Time complexity: $$O(n/2)$$ Space complexity: $$O(1)$$ Code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 var findMin = function(a) { /** Approach: You cannot solve this problem in O(log n) since it contains duplicate values. But you can actually solve this problem in O(n/2) by using the fact that a sorted array follows heap property. And if a sorted array is rotated then the heap property no longer holds. to find the minium element traverse the array, and find the first subtree where the heap property does not hold. the minium of the 2 values where the heap property does not satisfy is also minium in the array. Time: O(n/2) Space: O(1) */ let A = a.length; let i = 0; while ( i \u0026lt;= Math.floor(A/2)-1 ) { let root = i; let lc = 2*i + 1; let rc = 2*i + 2; let smallest = root; if ( lc \u0026lt; A \u0026amp;\u0026amp; a[lc] \u0026lt; a[smallest] ) smallest = lc; if ( rc \u0026lt; A \u0026amp;\u0026amp; a[rc] \u0026lt; a[smallest] ) smallest = rc; if ( smallest != root ) /* violation found. the value at smallest is minium */ return a[smallest]; i++; } /* no violation found. Either the array is sorted ar there it is all duplicates, in either case, return the first element. */ return a[0]; }; ","permalink":"http://localhost:1313/personal_website/posts/leetcode_154_find_minimum_in_rotated_sorted_array/","summary":"\u003cp\u003eBelow is my solution for the \u003ca href=\"https://leetcode.com/problems/find-minimum-in-rotated-sorted-array-ii/description/\"\u003eleetcode 154: Find minimum in rotated\nsorted array problem\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"intuition\"\u003eIntuition\u003c/h1\u003e\n\u003c!-- Describe your first thoughts on how to solve this problem. --\u003e\n\u003cp\u003eFact is, that you \u003cstrong\u003ecannot\u003c/strong\u003e solve this question in \u003cstrong\u003eO(log n)\u003c/strong\u003e time. The reason is because of duplicates.\u003c/p\u003e\n\u003cp\u003eConsider a situation like:\u003c/p\u003e\n\u003cp\u003e$$\n[2,2,2,2,1,2,2]\n$$\u003c/p\u003e\n\u003cp\u003ewhere mid is at 3 and the minium number here is clearly $$1$$. But our binary search algorithm will not be able to figure out in which direction it should go, since starting, ending and middle values are all same. In this case the best we can do is increment mid which makes the worst running time: \u003cstrong\u003eO(n)\u003c/strong\u003e\u003c/p\u003e","title":"Leetcode 154: Find minimum in rotated sorted array"},{"content":"Here\u0026rsquo;s my solution to the Leetcode 315: Count of Smaller Numbers After Self problem using standard merge sort. I just change one line to count while merge procedure.\nSolution Let\u0026rsquo;s build the solution step by step.\nInput: nums = $$[5,2,6,1]$$\nFirst, turn the numbers into [number, index] tuple. So it looks like:\narray = $$ [ [ 5, 0 ], [ 2, 1 ], [ 6, 2 ], [ 1, 3 ] ] $$\nSecond, just write standard merge sort algorithm and sort the array in ascending order by first values.\nThe output is: $$ [ [ 1, 3 ], [ 2, 1 ], [ 5, 0 ], [ 6, 2 ] ] $$\nHere\u0026rsquo;s the trace of the algorithm:\nSimple merge sort implemented 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 const merge_sort = ( a, i, j ) =\u0026gt; { if ( i === j ) return; const mid = i + Math.floor( (j-i)/2 ); merge_sort( a, i, mid ); merge_sort( a, mid+1, j ); merge( a, i, mid, j ); }; const merge = (a, start, mid, end) =\u0026gt; { const tmp = []; let i = start, j = mid+1; while ( i \u0026lt;= mid \u0026amp;\u0026amp; j \u0026lt;= end ) { if ( a[i][0] \u0026gt; a[j][0] ) { tmp.push( a[j] ); j++; } else { tmp.push( a[i] ); i++; } } while ( i \u0026lt;= mid ) { tmp.push( a[i] ); i++; } while ( j \u0026lt;= end ) { tmp.push( a[j] ); j++; } for ( let i=0; i \u0026lt; tmp.length; i++ ) a[start+i] = tmp[i]; }; var countSmaller = function( nums ) { const array = nums.map( (val, ind) =\u0026gt; [val, ind] ); merge_sort( array, 0, array.length-1 ); }; So far so good.\nNow let\u0026rsquo;s get back to the question. The question is asking: For each index $$i$$, count all numbers at index $$j$$ such that $$i \u0026lt; j$$ and $$a[i] \u0026gt; a[j]$$. Or, simply put: for each number, find all numbers that appear after it and are smaller than it.\nNow, look at the visualization again, pay attention to the merge procedure (in magenta colour) and observe the following:\nat each merge procedure, we merge 2 consecutive partitions. all numbers in the left partition appear before numbers in right partition in the original array. The partitions are sorted in increasing order. Now, suppose we are merging 2 partitions where, the pointer of left partition is at $$x$$ and pointer of right partition is at $$y$$.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 [....a,b,c, x ,d,e,f....] [...h,i,j, y, k,l,m....] ^ ^ i j Suppose x \u0026gt; y It follows from observation 2 that: y is one of the numbers that appear to the right of x and is smaller than x ---(1) Also, since partitions are sorted (observation 3): d, e, f .... (i.e. all number that appear to the right of x) are greater than x. ----(2) From (1) and (2) we can conclude that: x, d, e, f, ... (i.e. all numbers to the right of x including x) appear before y. And y is smaller than all these numbers. Hence, required condition satisfied! Now, we just need a counter for each variable, and whenever the condition same as above occurs, we increment the counter for each x,d,e,\u0026hellip;\n1 2 3 4 5 6 7 [....a,b,c, x ,d,e,f....] [...h,i,j, y, k,l,m....] ^ ^ i j while merging: if x \u0026gt; y increment the counters of x, d, e, f, ... Single line changed in standard merge sort algorithm We can use the index at the second position to access the counter of that particular number.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 let counts; const merge_sort = ( a, i, j ) =\u0026gt; { if ( i === j ) return; const mid = i + Math.floor( (j-i)/2 ); merge_sort( a, i, mid ); merge_sort( a, mid+1, j ); merge( a, i, mid, j ); }; const merge = (a, start, mid, end) =\u0026gt; { const tmp = []; let i = start, j = mid+1; while ( i \u0026lt;= mid \u0026amp;\u0026amp; j \u0026lt;= end ) { if ( a[i][0] \u0026gt; a[j][0] ) { /* ____(x \u0026gt; y) so increment counters of x,d,e,...____*/ for ( let p=i; p\u0026lt;=mid; p++ ) counts[ a[p][1] ]++; /*_______________INSERT THIS LINE_____________________*/ tmp.push( a[j] ); j++; } else { tmp.push( a[i] ); i++; } } while ( i \u0026lt;= mid ) { tmp.push( a[i] ); i++; } while ( j \u0026lt;= end ) { tmp.push( a[j] ); j++; } for ( let i=0; i \u0026lt; tmp.length; i++ ) a[start+i] = tmp[i]; }; var countSmaller = function( nums ) { const array = nums.map( (val, ind) =\u0026gt; [val, ind] ); counts = new Array(nums.length).fill(0); merge_sort( array, 0, array.length-1 ); return counts; }; That is the whole idea behind this question. Now the above implementation won\u0026rsquo;t work because at each iteration, we are updating whole left partition after i. Making it O(n^2) Optimize To avoid updating the whole partition, we keep a running counter cnt.\nFinal implementation 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 let counts; const merge_sort = ( a, i, j ) =\u0026gt; { if ( i === j ) return; const mid = i + Math.floor( (j-i)/2 ); merge_sort( a, i, mid ); merge_sort( a, mid+1, j ); merge( a, i, mid, j ); }; const merge = (a, start, mid, end) =\u0026gt; { const tmp = []; let i = start, j = mid+1; let cnt = 0; // keep running counter while ( i \u0026lt;= mid \u0026amp;\u0026amp; j \u0026lt;= end ) { if ( a[i][0] \u0026gt; a[j][0] ) { cnt++; // increment counter tmp.push( a[j] ); j++; } else { counts[ a[i][1] ] += cnt; // no more numbers that are // smaller than i tmp.push( a[i] ); i++; } } while ( i \u0026lt;= mid ) { counts[ a[i][1] ] += cnt; // if left partition is not over // update left over number counts tmp.push( a[i] ); i++; } while ( j \u0026lt;= end ) { tmp.push( a[j] ); j++; } for ( let i=0; i \u0026lt; tmp.length; i++ ) a[start+i] = tmp[i]; }; var countSmaller = function( nums ) { const array = nums.map( (val, ind) =\u0026gt; [val, ind] ); counts = nums; counts.fill(0); merge_sort( array, 0, array.length-1 ); return counts; }; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 def countSmaller(nums): counts = [0] * len(nums) array = [(num, i) for i, num in enumerate(nums)] def merge_sort(start, end): if start == end: return mid = (start + end) // 2 merge_sort(start, mid) merge_sort(mid + 1, end) merge(start, mid, end) def merge(start, mid, end): temp = [] i, j = start, mid + 1 cnt = 0 while i \u0026lt;= mid and j \u0026lt;= end: if array[i][0] \u0026gt; array[j][0]: cnt += 1 temp.append(array[j]) j += 1 else: counts[array[i][1]] += cnt temp.append(array[i]) i += 1 while i \u0026lt;= mid: counts[array[i][1]] += cnt temp.append(array[i]) i += 1 while j \u0026lt;= end: temp.append(array[j]) j += 1 for i in range(len(temp)): array[start + i] = temp[i] merge_sort(0, len(nums) - 1) return counts 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 #include \u0026lt;vector\u0026gt; using namespace std; vector\u0026lt;int\u0026gt; countSmaller(vector\u0026lt;int\u0026gt;\u0026amp; nums) { vector\u0026lt;int\u0026gt; counts(nums.size(), 0); vector\u0026lt;pair\u0026lt;int, int\u0026gt;\u0026gt; array; for (int i = 0; i \u0026lt; nums.size(); i++) { array.emplace_back(nums[i], i); } function\u0026lt;void(int, int)\u0026gt; merge_sort = [\u0026amp;](int start, int end) { if (start == end) return; int mid = start + (end - start) / 2; merge_sort(start, mid); merge_sort(mid + 1, end); merge(start, mid, end); }; function\u0026lt;void(int, int, int)\u0026gt; merge = [\u0026amp;](int start, int mid, int end) { vector\u0026lt;pair\u0026lt;int, int\u0026gt;\u0026gt; temp; int i = start, j = mid + 1; int cnt = 0; while (i \u0026lt;= mid \u0026amp;\u0026amp; j \u0026lt;= end) { if (array[i].first \u0026gt; array[j].first) { cnt++; temp.push_back(array[j]); j++; } else { counts[array[i].second] += cnt; temp.push_back(array[i]); i++; } } while (i \u0026lt;= mid) { counts[array[i].second] += cnt; temp.push_back(array[i]); i++; } while (j \u0026lt;= end) { temp.push_back(array[j]); j++; } for (int k = 0; k \u0026lt; temp.size(); k++) { array[start + k] = temp[k]; } }; merge_sort(0, nums.size() - 1); return counts; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 import java.util.*; class Solution { private int[] counts; private int[][] array; public List\u0026lt;Integer\u0026gt; countSmaller(int[] nums) { counts = new int[nums.length]; array = new int[nums.length][2]; for (int i = 0; i \u0026lt; nums.length; i++) { array[i][0] = nums[i]; array[i][1] = i; } mergeSort(0, nums.length - 1); List\u0026lt;Integer\u0026gt; result = new ArrayList\u0026lt;\u0026gt;(); for (int count : counts) { result.add(count); } return result; } private void mergeSort(int start, int end) { if (start == end) return; int mid = start + (end - start) / 2; mergeSort(start, mid); mergeSort(mid + 1, end); merge(start, mid, end); } private void merge(int start, int mid, int end) { List\u0026lt;int[]\u0026gt; temp = new ArrayList\u0026lt;\u0026gt;(); int i = start, j = mid + 1; int cnt = 0; while (i \u0026lt;= mid \u0026amp;\u0026amp; j \u0026lt;= end) { if (array[i][0] \u0026gt; array[j][0]) { cnt++; temp.add(array[j]); j++; } else { counts[array[i][1]] += cnt; temp.add(array[i]); i++; } } while (i \u0026lt;= mid) { counts[array[i][1]] += cnt; temp.add(array[i]); i++; } while (j \u0026lt;= end) { temp.add(array[j]); j++; } for (int k = 0; k \u0026lt; temp.size(); k++) { array[start + k] = temp.get(k); } } } Time: $$O(n\\ log\\ n)$$ Space: $$O(n)$$ ","permalink":"http://localhost:1313/personal_website/posts/leetcode_315_count_of_smaller_numbers_after_self/","summary":"\u003cp\u003eHere\u0026rsquo;s my solution to the \u003ca href=\"https://leetcode.com/problems/count-of-smaller-numbers-after-self/description/\"\u003eLeetcode 315: Count of Smaller Numbers After\nSelf problem\u003c/a\u003e using standard merge sort. I just change one line to\ncount while merge procedure.\u003c/p\u003e\n\u003ch2 id=\"solution\"\u003eSolution\u003c/h2\u003e\n\u003cp\u003eLet\u0026rsquo;s build the solution step by step.\u003c/p\u003e\n\u003cp\u003eInput: nums = $$[5,2,6,1]$$\u003c/p\u003e\n\u003cp\u003eFirst, turn the numbers into \u003cstrong\u003e[number, index]\u003c/strong\u003e tuple. So it looks like:\u003c/p\u003e\n\u003cp\u003earray = $$ [ [ 5, 0 ], [ 2, 1 ], [ 6, 2 ], [ 1, 3 ] ] $$\u003c/p\u003e","title":"Leetcode 315: Count of Smaller Numbers After Self"},{"content":"Here\u0026rsquo;s my explanation for the leetcode 306: Additive Number problem\nAdditive Number Problem Problem Recap An additive number is a string of digits where the sequence of numbers formed by splitting the string satisfies the condition that each number (after the first two) is the sum of the two preceding numbers.\nExamples: \u0026quot;112358\u0026quot; is additive because the sequence is 1, 1, 2, 3, 5, 8, and:\n1 + 1 = 2 1 + 2 = 3 2 + 3 = 5 3 + 5 = 8 \u0026quot;199100199\u0026quot; is additive because the sequence is 1, 99, 100, 199, and:\n1 + 99 = 100 99 + 100 = 199 Solution Approach The solution uses a backtracking approach to try all possible splits of the string into sequences of numbers and checks if any of these sequences form an additive sequence.\nDetailed Explanation Helper Function isValid This recursive function checks if the remaining part of the string s forms a valid additive sequence given the first two numbers a and b.\nBase Case: If the remaining string s is empty, it means we\u0026rsquo;ve successfully formed an additive sequence, so return true.\nRecursive Step:\nCompute the sum of a and b and convert it to a string sum. Check if the remaining string s starts with sum: If not, the sequence is invalid ‚Üí return false. If yes, recursively check the next part of the string with the new pair (b, sum) and the remaining string after removing sum. Main Function isAdditiveNumber Initialization: Get the length of the input string num. Nested Loops: The outer loop (i) determines the end index of the first number a (from index 0 to i). The inner loop (j) determines the end index of the second number b (from index i to j). Leading Zero Check: Skip any splits where a or b have leading zeros unless they are exactly \u0026quot;0\u0026quot;. Example: \u0026quot;02\u0026quot; is invalid, but \u0026quot;0\u0026quot; is valid. Validation: For each valid pair (a, b), call isValid to check if the remaining part of the string forms a valid additive sequence starting with a and b. If isValid returns true, immediately return true from the main function. Final Check: If no valid sequence is found after all possible splits, return false. Example Walkthrough Let\u0026rsquo;s walk through the example num = \u0026quot;112358\u0026quot;:\nFirst Iteration (i = 1, j = 2): a = \u0026quot;1\u0026quot;, b = \u0026quot;1\u0026quot;. No leading zeros ‚Üí proceed. isValid(1, 1, \u0026quot;2358\u0026quot;): Sum of 1 + 1 = 2. Check if \u0026quot;2358\u0026quot; starts with \u0026quot;2\u0026quot; ‚Üí Yes. Recursively call isValid(1, 2, \u0026quot;358\u0026quot;): Sum of 1 + 2 = 3. Check if \u0026quot;358\u0026quot; starts with \u0026quot;3\u0026quot; ‚Üí Yes. Recursively call isValid(2, 3, \u0026quot;58\u0026quot;): Sum of 2 + 3 = 5. Check if \u0026quot;58\u0026quot; starts with \u0026quot;5\u0026quot; ‚Üí Yes. Recursively call isValid(3, 5, \u0026quot;8\u0026quot;): Sum of 3 + 5 = 8. Check if \u0026quot;8\u0026quot; starts with \u0026quot;8\u0026quot; ‚Üí Yes. Recursively call isValid(5, 8, \u0026quot;\u0026quot;): Empty string ‚Üí return true. Since isValid returned true, the main function returns true. Edge Cases Leading Zeros: Correctly skips invalid splits (e.g., \u0026quot;02\u0026quot; unless it\u0026rsquo;s \u0026quot;0\u0026quot;). Single Digit: If input length \u0026lt; 3, returns false. Large Numbers: Uses parseInt, but BigInt is better for very large numbers to avoid precision issues. Time Complexity Nested loops: O(n¬≤), where n is the string length. isValid function: O(n) per pair (a, b). Overall: O(n¬≥), feasible for reasonably sized strings. Space Complexity O(n) due to recursion stack in the worst case. Code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 var isAdditiveNumber = function(num) { const isValid = (a, b, s) =\u0026gt; { if (s.length === 0) return true; const sum = (a + b).toString(); return s.startsWith(sum) \u0026amp;\u0026amp; isValid(b, parseInt(sum), s.slice(sum.length)); }; const n = num.length; for (let i = 1; i \u0026lt; n; i++) { for (let j = i + 1; j \u0026lt; n; j++) { const a = num.slice(0, i); const b = num.slice(i, j); if ((a.startsWith(\u0026#39;0\u0026#39;) \u0026amp;\u0026amp; a.length \u0026gt; 1) || (b.startsWith(\u0026#39;0\u0026#39;) \u0026amp;\u0026amp; b.length \u0026gt; 1)) continue; if (isValid(parseInt(a), parseInt(b), num.slice(j))) return true; } } return false; }; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 var isAdditiveNumber = function(num) { let N = num.length; let check = ( a ) =\u0026gt; { /** check if numbers in an array form fibonacci seqence **/ let A = a.length; if ( A \u0026lt; 3 ) return false; for ( let i=2; i \u0026lt; A; i++ ) if ( Number(a[i]) != Number(a[i-1]) + Number(a[i-2]) || ( a[i].length \u0026gt; 1 \u0026amp;\u0026amp; a[i].startsWith(\u0026#39;0\u0026#39;) ) || ( a[i-1].length \u0026gt; 1 \u0026amp;\u0026amp; a[i-1].startsWith(\u0026#39;0\u0026#39;) ) || ( a[i-2].length \u0026gt; 1 \u0026amp;\u0026amp; a[i-2].startsWith(\u0026#39;0\u0026#39;) ) ) return false; return true; }; let bt_search = ( i, cur = [] ) =\u0026gt; { if ( i \u0026gt; N ) return false; if ( i === N \u0026amp;\u0026amp; check(cur) ) return true; // num[i] starts a new number, explore path cur.push( num[i] ); let new_start = bt_search( i+1, cur ); if ( new_start ) return true; // backtrack, num[i] continues the previous number cur.pop(); if ( i \u0026gt; 0 ) { cur[ cur.length-1 ] += num[i]; let add_prev = bt_search( i+1, cur ); if ( add_prev ) return true; } return false; }; return bt_search( 0 ); }; ","permalink":"http://localhost:1313/personal_website/posts/leetcode_306_additive_number/","summary":"\u003cp\u003eHere\u0026rsquo;s my explanation for the \u003ca href=\"https://leetcode.com/problems/additive-number/description/\"\u003eleetcode 306: Additive Number problem\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"additive-number-problem\"\u003eAdditive Number Problem\u003c/h2\u003e\n\u003ch3 id=\"problem-recap\"\u003eProblem Recap\u003c/h3\u003e\n\u003cp\u003eAn \u003cstrong\u003eadditive number\u003c/strong\u003e is a string of digits where the sequence of numbers formed by splitting the string satisfies the condition that each number (after the first two) is the sum of the two preceding numbers.\u003c/p\u003e\n\u003ch4 id=\"examples\"\u003eExamples:\u003c/h4\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u0026quot;112358\u0026quot;\u003c/code\u003e is additive because the sequence is \u003ccode\u003e1, 1, 2, 3, 5, 8\u003c/code\u003e, and:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e1 + 1 = 2\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e1 + 2 = 3\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e2 + 3 = 5\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e3 + 5 = 8\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u0026quot;199100199\u0026quot;\u003c/code\u003e is additive because the sequence is \u003ccode\u003e1, 99, 100, 199\u003c/code\u003e, and:\u003c/p\u003e","title":"Leetcode 306: Additive number"},{"content":"Here are all possible solutions I could come up with for the longest increasing subsequence problem. leetcode 300\nApproach 1: Generate all possible increasing subsequences We will keep track of a subsequence in an array named cur_subsequence or cur_sub. For each element (a[i]) we have the following 2 options:\nAdd the element to the end of current subsequence.\nNote: The current element can only be included if either the current subsequence is empty or the last element of the current subsequence is smaller than the current element. This is important to maintain the increasing subsequence property.\nIgnore the current element and explore without a[i]\nTime complexity: $$ O(2^N) $$ Space complexity: $$ O(N) $$ // recursion stack + auxilary array 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 var lengthOfLIS = function(a) { let A = a.length; // maximum length of a subsequence seen so far let max_len = 1; let bt_search = ( i, cur_sub = [] ) =\u0026gt; { if ( i \u0026gt;= A ) { max_len = Math.max( max_len, cur_sub.length ); return; } // either select the ith element, or ignore it. // a[i] can be taken when either subsequencee is empty or // last inserted element is smaller if ( !cur_sub.length || cur_sub[ cur_sub.length-1 ] \u0026lt; a[i] ) { cur_sub.push( a[i] ); bt_search( i+1, cur_sub ); cur_sub.pop(); // backtrack } // explore without a[i] included bt_search( i+1, cur_sub ); }; bt_search(0); return max_len; } Approach 2 (Version 1) : Generating all possible subsequences, but change the structure of the recursion to allow memoization Currently, we are keeping track of the current subsequence in an array cur_sub which makes it difficult for us to implement memoization. Notice that we only need previously selected element (to compare if current element is larger) and current length (to find the subsequence length). Hence, we will only use 3 variables: index, previous element index, current length.\nTime complexity: $$ O( N^2 ) $$ Space complexity: $$O( N^3 )$$ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 var lengthOfLIS = function(a) { /** Write a recurrence relation. Either you take the element @i or your ignore it. In either case, your pick the maximum length. generating all possible increasing subsequences, but not storing the subsequence and using only 3 variables. for each call(index, prev_selected, cur_length) we try to find the maximum length we can form by either selecting or rejecting a[i] This configuration is easy to memoize. **/ let A = a.length; let memo = new Map(); let bt_search = ( i, prev, cur_len = 0 ) =\u0026gt; { // inputs of the function are memoized by turning // them into a String `key` let key = JSON.stringify( [i, prev, cur_len] ); if (memo.has(key)) return memo.get(key); if ( i \u0026gt;= A ) return cur_len; let take = -1, not_take = -1; // a[i] can be taken if prev=null / cur_len=0 // or prev \u0026lt; a[i] if ( cur_len == 0 || prev \u0026lt; a[i] ) take = bt_search( i+1, a[i], cur_len+1 ); // backtrack. do not take a[i] not_take = bt_search( i+1, prev, cur_len ); let res = Math.max( take, not_take ); memo.set(key, res); return memo.get(key); }; return bt_search(0); } Approach 2 (Version 2): Yet another recursive solution, but with better memoization This solution memoizes using only: index of current element (i), index of previously selected element (prev_i).\nThe memoization is done in a matrix of size $$N$$X$$(N+1)$$.\nTime complexity: $$ O( N^2 ) $$ Space complexity: $$O( N^2 )$$ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 var lengthOfLIS = function(a) { /** Approach 2 (version 2): Instead of storing 3 variables, just store 2 variables. This will enable memoization table to be an NxN matrix. **/ let A = a.length; let memo = new Array( A ).fill(null).map( () =\u0026gt; new Array( A+1 ).fill( null ) ); let bt_search = ( i, prev_i = -1 ) =\u0026gt; { // y is remapped since prev_i is in range [-1,n-1] // but our array ranges is in range [0, n] let x = i, y = prev_i + 1; if ( i \u0026gt;= A ) return 0; if ( memo[x][y] !== null ) return memo[x][y]; let take = -1, not_take = -1; // a[i] can be taken if prev_i = -1 / cur_len=0 or // a[prev_i] \u0026lt; a[i] if ( prev_i == -1 || a[prev_i] \u0026lt; a[i] ) take = 1 + bt_search( i+1, i ); // backtrack. do not take a[i]. The length remains same not_take = bt_search( i+1, prev_i ); let res = Math.max( take, not_take ); memo[x][y] = res; return memo[x][y]; }; return bt_search(0); } Approach 3: Dynamic programming Declare a lis(longest increasing subsequence) array, where lis[i] denotes the length of longest increasing subsequence starting at i and ending at the end of the array. Fill this table from second last element towards first element.\nTo find lis[i] for an element a[i] use the following algorithm:\nFor each i \u0026lt;- n-2 - 0 // find if index i can form an increasing subsequence // with any element on the right of it max_len = 1 For each j \u0026lt;- i+1 - n if ( a[i] \u0026lt; a[j] ) // a[j] is a potential connection point max_len = MAX( max_len, 1 + lis[j] ) lis[i] = max_len The basic intuition behind it is, that we explore all elements to the right of a[i] which can connect with a[i] to form an increasing subsequence. The length of such a subsequence is given by:\n1 (length of a[i]) + length of longest subsequence from a[j] up until the end of the array\nwhich is same as: 1 + lcs[j]\nTime: $$O(n^2)$$ Space: $$O(n)$$ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 let MAX = Math.max; var lengthOfLIS = function(a) { /** Appraoch 3: Build the dp table manually using loops **/ let A = a.length; let lis = new Array( A ).fill(1); // global maximum, subsequence length from a[i] until end let gmax = 1; for ( let i = A-2; i \u0026gt;= 0; i-- ) { let max_len = 1; for ( let j = i+1; j \u0026lt; A; j++ ) { if ( a[i] \u0026lt; a[j] ) max_len = MAX( max_len, 1+lis[j] ); } lis[i] = max_len; gmax = MAX( max_len, gmax ); } return gmax; } Approach 4: Build an auxilary array, such that the minium elements are always at the end of it Here, we are basically trying to kick out large elements and inserting small elements whereever possible, so that new incoming elements feel welcome attaching themselves to the existing subsequence.\nBuild a auxilary array using the following algorithm:\nsubsequence = [] For each i \u0026lt;- 0 to A-1 if subsequence.last_element \u0026lt; a[i] subsequence.push( a[i] ) else { replace the largest element smaller than or equal to a[i] in subsequence using binary search. } the length of the subsequence is the length of the largest increasing subsequence. Time: $$O(n\\ log n)$$ // n for iteration, and for each iteration binary search O(log n) Space: $$O(n)$$ // auxilary array Note that the array that we actually build here does not represent a valid increasing subsequence. Nor is it the longest increasing subsequence, we just insert the elements using a particularly methodology which ensures its validity\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 let MAX = Math.max; let FLOOR = Math.floor; var b_search = ( a, target ) =\u0026gt; { // return the index pf the number \u0026gt;= target let i = 0, j = a.length-1; while ( i \u0026lt;= j ) { let mid = i + FLOOR( (j-i)/2 ); if ( a[mid] == target ) return mid; else if ( a[mid] \u0026lt; target ) i = mid+1; else j = mid-1; } return i; }; var lengthOfLIS = function(a) { /** Approach 4: The idea is to keep the minium elements, such that validity of lis(longest increasing subsequence) for new incoming elements can be calculated quickly **/ let A = a.length; let sub = [ a[0] ]; for ( let i=1; i \u0026lt; A; i++ ) { let lst = sub.length-1; if ( sub[ lst ] \u0026lt; a[i] ) sub.push( a[i] ); else { // find a \u0026#34;write index\u0026#34; where we replace a[i] let wi = b_search( sub, a[i] ); sub[wi] = a[i]; } } return sub.length; } Approach 5: In place algorithm for approach 4 Time: $$O(n\\ logn)$$ Space: $$O(1)$$ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 let MAX = Math.max; let FLOOR = Math.floor; /* this version is for searching within the same array starting and ending position are requirede */ var b_search = ( a, start, end, target ) =\u0026gt; { // return the index pf the number \u0026gt;= target let i = start, j = end; while ( i \u0026lt;= j ) { let mid = i + FLOOR( (j-i)/2 ); if ( a[mid] == target ) return mid; else if ( a[mid] \u0026lt; target ) i = mid+1; else j = mid-1; } return i; }; var lengthOfLIS = function(a) { /*** Approach 5: Same as the above approach, but in place Hence saving auxilary space. The idea is to keep a variable to mark the end of the subsequence in a itself. **/ let A = a.length; let S = 1; // variable to mark the end of the subsequence for ( let i=1; i \u0026lt; A; i++ ) { if ( a[S-1] \u0026lt; a[i] ) { a[S] = a[i]; S++; } else { // find a \u0026#34;write index\u0026#34; where we replace a[i] let wi = b_search( a, 0, S-1, a[i] ); a[wi] = a[i]; } } return S; } ","permalink":"http://localhost:1313/personal_website/posts/all_possible_solutions_to_longest_increasing_subsequence_problem_leetcode_300/","summary":"\u003cp\u003eHere are all possible solutions I could come up with for the longest\nincreasing subsequence problem. \u003ca href=\"https://leetcode.com/problems/factorial-trailing-zeroes/description/\"\u003eleetcode\n300\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"approach-1-generate-all-possible-increasing-subsequences\"\u003eApproach 1: Generate all possible increasing subsequences\u003c/h1\u003e\n\u003cp\u003eWe will keep track of a subsequence in an array named \u003ccode\u003ecur_subsequence\u003c/code\u003e\nor \u003ccode\u003ecur_sub\u003c/code\u003e. For each element (\u003ccode\u003ea[i]\u003c/code\u003e)  we have the following 2\noptions:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eAdd the element to the end of current subsequence.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eNote: The current element can only be included if\neither the current subsequence is empty or the last\nelement of the current subsequence is smaller than\nthe current element. This is important to maintain\nthe increasing subsequence property.\u003c/em\u003e\u003c/p\u003e","title":"All possible solutions to longest increasing subsequence problem: leetcode 300"},{"content":"Problem link: leetcode 70: climbing stairs\nIntuition You need to climb n stairs, taking 1 or 2 stairs at a time.\nIf n = 2, you can climb like:\n$$1+1 = 2\\times (1) + 0 \\times(2)$$ $$2 = 0 \\times (1) + 1\\times(2) $$ if n = 3, you can climb like:\n$$1+1+1 = 3\\times(1) + 0\\times(2)$$ $$1+2 = 1\\times(1) + 1\\times(2)$$ $$2+1 = 1\\times(1) + 1\\times(2) $$ Basically you first need to decide how many steps of size 1 will you take and how many of size 2 do you need:\nHence, your first task is to solve the equation:\n$$ x \\times 1 + y \\times 2 = n $$\nTo decide the number of 1s and 2s. After you decide upon x and y then you will have calculate $$ \\frac{(x + y)!}{x! , y!} $$\nWhich is nothing but ways of chosing how exactly you will proceed. This is because we are trying to adjust x identical objects and y identical objects in x+y positions. Think of the number of ways you can arrange x men and y women in x + y positions.\nAs an example $$n=3, x=1 $$ and $$y=1$$\nThen you will have $$\\frac{(1 + 1)!}{1! , 1!} =2$$. see above, they are: $$ 1+2 \\ 2+1 $$\nApproach $$ y \\in [0, n/2] $$\nFor each , calculate the corresponding values of $$x$$ using the equation: $$ x \\times 1 + y \\times 2 = n \\ x = n - (2 \\times y ) $$\nthen calculate $$ \\frac{(x + y)!}{x! , y!} $$\nand add this to your counter variable.\nreturn counter.\nComplexity Time complexity: Time: O($$n^2$$)\nSpace: O(1)\nBut it can be reduced, if you can store calculated factorials. Hence, making the time complexity of calculating $$ \\frac{(x + y)!}{x! , y!} $$ -\u0026gt; O(1) and Space complexity O(n)\nTime complexity: O(n) Space complexity: O(n)\nCode 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 var permute = (x,y) =\u0026gt; { /* compute (x+y)! / x! y! without computing factorials */ /* which is basically computing x+y x+y-1 x+y-2 .. y+1 / x! */ var denom = 1; for (var i=1; i \u0026lt;= x; i++) denom *= i; var numi = 1; for (var i = y+1; i \u0026lt;= x+y; i++) numi *= i; return numi/denom; }; var climbStairs = function(n) { /* The number of ways in which we can get n by adding only 1 and 2 Let, 1x + 2y = n ---(1) then we need to find the number of integer solutions to this equation. that is S = {x,y | x,y in integers} we need to return |S| i.e. the number of elements in this solution set. from (1) it implies x = n - 2y ---(2) y in range [0,n/2] i.e. consequently x in range [0,n] hence, iterate over y from 0 to n/2 such that y is integer. we find the corrosponding solution using equation 2 */ let n_solutions = 0 ; for (var y=0; y \u0026lt;= Math.floor(n/2); y++ ) { var x = n - (2 * y); n_solutions += permute(x,y); } return (n_solutions); }; ","permalink":"http://localhost:1313/personal_website/posts/leetcode_70/","summary":"\u003cp\u003eProblem link: \u003ca href=\"https://leetcode.com/problems/climbing-stairs/description/\"\u003eleetcode 70: climbing stairs\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"intuition\"\u003eIntuition\u003c/h1\u003e\n\u003c!-- Describe your first thoughts on how to solve this problem. --\u003e\n\u003cp\u003eYou need to climb \u003ccode\u003en\u003c/code\u003e stairs, taking 1 or 2 stairs at a time.\u003c/p\u003e\n\u003cp\u003eIf n = 2, you can climb like:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e$$1+1 = 2\\times (1) + 0 \\times(2)$$\u003c/li\u003e\n\u003cli\u003e$$2 = 0 \\times (1) + 1\\times(2) $$\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eif n = 3, you can climb like:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e$$1+1+1 =  3\\times(1) + 0\\times(2)$$\u003c/li\u003e\n\u003cli\u003e$$1+2   =  1\\times(1) + 1\\times(2)$$\u003c/li\u003e\n\u003cli\u003e$$2+1   =  1\\times(1) + 1\\times(2) $$\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBasically you first need to decide how many steps of size 1 will you take and how many of size 2 do you need:\u003c/p\u003e","title":"Leetcode 70: Climbing Stairs"},{"content":"Below is my C solution for the Leetcode problem candy.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 static inline void previous_kids_started_crying(int* kid, int continous_decrease_start, int continous_decrease_end, int* candy) { /* * To satisfy the condition that each child with higher rating than * it\u0026#39;s neighbors must get more candies. We give all children in range * [continous_decrease_start, continous_decrease_end] an extra candy * if the he has candies lower or equal to the kid after it. * * Note that we do not bother the kid before it, since it is known * that the kid before it has more rating than this kid */ if (continous_decrease_start == -1) { exit(1); } for (int i = continous_decrease_end; i \u0026gt;= continous_decrease_start; i--) { if (kid[i] \u0026lt;= kid[i+1]) { int before = kid[i]; kid[i]++; int after = kid[i]; *candy += after - before;; } else { /* chain is broken. We found a satisfied non protesting kid the kids before it must also be non-protesting */ return; } } } int candy(int* kid, int n) { /* * Few things to take care of: * * 1. At a time take a look at 2 children. i.e. iterate the children * in window of 2. * * 2. Each time a candy is given, check if previous child has more * rating, since he will start crying. He/she will protest that the * kid in front of him has less rating than him/her and still got * more/equal candies than him/her. It might even trigger a chain * where the kid previous to the previous kid might also see this * changed state, and if he had a rating more then the kid after him. * then he will also start asking more candies. And the kid behind * that and so on. * * The algorithm runs in linear time, however, if the children are * arranged in decreasing order of rating, then at each iteration all * previous children will start crying. Hence, everybofy needs to be * given more candies. In that case it becomes quadratic * * Space required is constant. * * Best case: * Time: O(n) * Space: O(1) * * Worst Case: * Time: O(n^2) * Space: O(1) */ int candies = 0; int continous_decrease_from = -1; /* First child gets a candy, but save his rating first */ int previous_child_rating = kid[0]; kid[0] = 1; candies++; for (int i = 1; i \u0026lt; n; i++) { if (kid[i] \u0026gt; previous_child_rating) { /* Since this child has more rating than the previous child, this child gets 1 more candy than previous child */ previous_child_rating = kid[i]; kid[i] = kid[i-1]+1; candies += kid[i]; continous_decrease_from = -1; } else if (kid[i] == previous_child_rating){ /* Since this child has equal rating than the previous child, give him 1 candy */ previous_child_rating = kid[i]; kid[i] = 1; candies++; continous_decrease_from = -1; } else { /* Previous child has more rating. Give this child one candy, and after giving : if the previous child had less candy, then we must initiate a chain reaction to do justice to all previous kids to previous children the problem here is that if this child has less rating then his predecessor then he will also start crying. And, the predecesor of this child also has more score then he will also start crying. Hence, we must give candies to them as well to maintain rule. Hence, check if the rule is disturbed, */ if (continous_decrease_from == -1) { /* A period of continous decrease started */ /* Hence, give this child 1 candy and if the previous child will also get 1 candy if he gets */ continous_decrease_from = i-1; previous_child_rating = kid[i]; kid[i] = 1; if (kid[i-1] \u0026gt; kid[i]) { candies ++; } else { kid[i-1] = kid[i] + 1; candies += 2; } } else { /* Give this child a candy, but mind the children behind this child */ previous_child_rating = kid[i]; kid[i] = 1; candies++; previous_kids_started_crying(kid, continous_decrease_from, i-1, \u0026amp;candies); } } } return candies; } ","permalink":"http://localhost:1313/personal_website/posts/leetcode_135/","summary":"\u003cp\u003eBelow is my C solution for the Leetcode problem \u003ca href=\"https://leetcode.com/problems/climbing-stairs/description/\"\u003ecandy\u003c/a\u003e.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv class=\"chroma\"\u003e\n\u003ctable class=\"lntable\"\u003e\u003ctr\u003e\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode\u003e\u003cspan class=\"lnt\"\u003e  1\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  2\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  3\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  4\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  5\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  6\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  7\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  8\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e  9\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 10\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 11\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 12\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 13\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 14\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 15\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 16\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 17\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 18\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 19\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 20\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 21\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 22\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 23\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 24\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 25\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 26\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 27\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 28\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 29\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 30\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 31\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 32\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 33\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 34\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 35\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 36\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 37\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 38\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 39\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 40\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 41\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 42\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 43\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 44\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 45\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 46\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 47\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 48\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 49\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 50\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 51\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 52\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 53\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 54\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 55\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 56\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 57\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 58\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 59\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 60\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 61\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 62\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 63\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 64\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 65\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 66\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 67\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 68\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 69\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 70\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 71\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 72\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 73\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 74\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 75\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 76\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 77\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 78\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 79\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 80\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 81\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 82\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 83\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 84\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 85\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 86\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 87\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 88\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 89\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 90\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 91\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 92\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 93\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 94\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 95\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 96\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 97\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 98\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e 99\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e100\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e101\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e102\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e103\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e104\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e105\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e106\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e107\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e108\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e109\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e110\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e111\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e112\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e113\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e114\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e115\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e116\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e117\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e118\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e119\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e120\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e121\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e122\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e123\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e124\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e125\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e126\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e127\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e128\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e129\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e130\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e131\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e132\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e133\n\u003c/span\u003e\u003cspan class=\"lnt\"\u003e134\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd class=\"lntd\"\u003e\n\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"kr\"\u003einline\u003c/span\u003e \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eprevious_kids_started_crying\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                  \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003econtinous_decrease_start\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                  \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003econtinous_decrease_end\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ecandy\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"cm\"\u003e/*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * To satisfy the condition that each child with higher rating than\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * it\u0026#39;s neighbors must get more candies. We give all children in range\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * [continous_decrease_start, continous_decrease_end] an extra candy\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * if the he has candies lower or equal to the kid after it.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Note that we do not bother the kid before it, since it is known\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * that the kid before it has more rating than this kid\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e        */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econtinous_decrease_start\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\u003cspan class=\"nf\"\u003eexit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003econtinous_decrease_end\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"n\"\u003econtinous_decrease_start\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e--\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ebefore\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eafter\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ecandy\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eafter\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ebefore\u003c/span\u003e\u003cspan class=\"p\"\u003e;;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"cm\"\u003e/* chain is broken. We found a satisfied non protesting kid\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                          the kids before it must also be non-protesting */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003ecandy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"cm\"\u003e/*\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Few things to take care of:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * 1. At a time take a look at 2 children. i.e. iterate the children\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * in window of 2.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * 2. Each time a candy is given, check if previous child has more\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * rating, since he will start crying. He/she will protest that the\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * kid in front of him has less rating than him/her and still got\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * more/equal candies than him/her. It might even trigger a chain\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * where the kid previous to the previous kid might also see this\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * changed state, and if he had a rating more then the kid after him.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * then he will also start asking more candies. And the kid behind\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * that and so on.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * The algorithm runs in linear time, however, if the children are\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * arranged in decreasing order of rating, then at each iteration all\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * previous children will start crying. Hence, everybofy needs to be\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * given more candies. In that case it becomes quadratic\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Space required is constant.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Best case:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Time: O(n)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Space: O(1)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           *\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Worst Case:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Time: O(n^2)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e           * Space: O(1)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e         */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ecandies\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003econtinous_decrease_from\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"cm\"\u003e/* First child gets a candy, but save his rating first */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eprevious_child_rating\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003ecandies\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eprevious_child_rating\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"cm\"\u003e/* Since this child has more rating than the previous\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                         child, this child gets 1 more candy than previous\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                         child */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003eprevious_child_rating\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003ecandies\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003econtinous_decrease_from\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eprevious_child_rating\u003c/span\u003e\u003cspan class=\"p\"\u003e){\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"cm\"\u003e/* Since this child has equal rating than the\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                         previous child, give him 1 candy */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003eprevious_child_rating\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003ecandies\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"n\"\u003econtinous_decrease_from\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"cm\"\u003e/* Previous child has more rating. Give this child one\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        candy, and after giving : if the previous child had less\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        candy, then we must initiate a chain reaction to do\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        justice to all previous kids to previous children\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        the problem here is that if this child has less rating\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        then his predecessor then he will also start crying.\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        And, the predecesor of this child also has more score\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        then he will also start crying. Hence, we must give\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        candies to them as well to maintain rule. Hence, check\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        if the rule is disturbed,\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                        */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econtinous_decrease_from\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"cm\"\u003e/* A period of continous decrease started */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"cm\"\u003e/* Hence, give this child 1 candy and if the\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                                   previous child will also get 1 candy if he gets  */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"n\"\u003econtinous_decrease_from\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"n\"\u003eprevious_child_rating\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\t\t\u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\t\t\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\t\t\t\u003cspan class=\"n\"\u003ecandies\u003c/span\u003e \u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\t\t\u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\t\t\t\u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\t\t\t\u003cspan class=\"n\"\u003ecandies\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\t\t\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"cm\"\u003e/* Give this child a candy, but mind the children\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"cm\"\u003e                                  behind this child */\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"n\"\u003eprevious_child_rating\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"n\"\u003ecandies\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                \u003cspan class=\"nf\"\u003eprevious_kids_started_crying\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ekid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                                             \u003cspan class=\"n\"\u003econtinous_decrease_from\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                                             \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                                                             \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003ecandies\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ecandies\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Leetcode 135: Candy"},{"content":"Introduction Linux is the kernel that powers the modern computing world. It‚Äôs everywhere‚Äîfrom all the top 500 supercomputers running Linux, to over two-thirds of mobile phones using it, and more than 95% of servers relying on it. Impressive, right? But this blog isn‚Äôt about why Linux dominates the tech world; it‚Äôs about how I started contributing to the Linux Kernel‚Äîand how you can too.\nHow Kernel Development Works Kernel development thrives on the Linux Kernel Mailing List (LKML), the nerve center of Linux‚Äôs open-source ecosystem. The beauty of open source? Anyone can contribute. Your task is to send patches (essentially the output of git diff refurbushed into an email).\nIf your patch solves a real problem or adds value, experienced developers will jump in with questions about your intent and rationale. Here‚Äôs a pro tip: don‚Äôt explain the how of your code; let the code speak for itself. Instead, focus on explaining why your change is needed.\nThe LKML community is incredibly supportive \u0026ndash; they‚Äôll critique your code, point out mistakes, and suggest improvements. Sure, it might feel overwhelming initially, but resources like the LFD103 course can guide you through the basics: generating patches, submitting them to LKML, compiling, and booting the kernel.\nFor me, just setting up my mail client and understanding LKML discussions took about a month. But once you clear these initial hurdles, things get easier. If you‚Äôre struggling, feel free to check out my notes‚Äîthey might save you some time.\nMy Background For years, kernel developers seemed like magicians to me‚Äîdoing impossibly cool things with computers. My fascination started after I stumbled upon a video of someone working on the kernel. It was mesmerizing!\nIn my second semester, I discovered the book The C Programming Language, and it sparked my love for C. The control C offers is unmatched, but it comes with its fair share of challenges‚Äîbugs galore!\nSurprisingly, I wasn‚Äôt a Linux user until recently. When I finally switched from Windows to Linux, everything just clicked. Concepts that once felt abstract suddenly made sense. On Windows, troubleshooting often felt like solving a mystery even Microsoft couldn‚Äôt decode. On Linux, it felt like someone handed me the keys to the entire system.\nWhile working on kernel contributions, I read Linux Device Drivers, a book authored by seasoned kernel developers. It gave me a deeper understanding of the kernel‚Äôs inner workings. If you‚Äôre serious about kernel development or writing drivers, this book is a must-read.\nWhat to Contribute The hardest part of contributing to the Linux Kernel is figuring out what to work on. The kernel is vast‚Äîthere‚Äôs everything from GPU drivers to network stack development.\nSince the kernel‚Äôs primary job is managing hardware, driver development is a hotspot of activity. New devices constantly hit the market, and they need drivers. If you have an electronics background and access to hardware, driver development is an excellent starting point.\nIf hardware isn‚Äôt your thing (like in my case), here are some alternatives:\nkselftest: A testing framework for kernel functionality. Core subsystems: The backbone of the kernel‚Äîa great way to learn the essentials. syzbot reports: A kernel fuzzer that uncovers bugs by feeding the kernel random data. These reports are a goldmine for learning about common mistakes. Another beginner-friendly option is upgrading deprecated APIs. These updates are highly appreciated because they improve the kernel‚Äôs maintainability and security. It‚Äôs not always a simple find-and-replace‚Äîyou‚Äôll need to understand the code‚Äîbut it‚Äôs a rewarding way to start.\nAnd don‚Äôt underestimate fixing spelling and grammar errors in the documentation or comments. While it might sound trivial, it‚Äôs a fantastic way to learn the workflow: creating patches, submitting them, and receiving feedback. Tools like codespell can help you automate finding these errors.\nMy first-ever patch was a simple typo fix, but I made the classic rookie mistake of introducing two changes while documenting only one. Lesson learned!\nOnce you start contributing, you‚Äôll notice issues everywhere. Even just following discussions on LKML can teach you a ton about how seasoned developers think and work.\nConclusion Kernel development might seem intimidating at first, but trust me, it‚Äôs worth the effort. You‚Äôll not only become a stronger developer but also gain a deep understanding of how computers work. You‚Äôll build expertise in both kernel and userspace development, and your Git skills will level up immensely‚Äîa must-have for any programmer.\nThe learning opportunities in kernel development are unparalleled, often rivaling (or even exceeding) those at top tech companies. So if you‚Äôre considering it, don‚Äôt hesitate‚Äîdive in! You might be surprised by how much you‚Äôll grow.\nGood Luck!\nReferences ","permalink":"http://localhost:1313/personal_website/posts/highlights_from_linux_kernel_mentorship_program_2024/","summary":"\u003ch1 id=\"introduction\"\u003eIntroduction\u003c/h1\u003e\n\u003cp\u003eLinux is the kernel that powers the modern computing world. It‚Äôs everywhere‚Äîfrom all the top 500 supercomputers running Linux, to over two-thirds of mobile phones using it, and more than 95% of servers relying on it. Impressive, right? But this blog isn‚Äôt about \u003cem\u003ewhy\u003c/em\u003e Linux dominates the tech world; it‚Äôs about how I started contributing to the Linux Kernel‚Äîand how you can too.\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"how-kernel-development-works\"\u003eHow Kernel Development Works\u003c/h2\u003e\n\u003cp\u003eKernel development thrives on the Linux Kernel Mailing List (LKML), the\nnerve center of Linux‚Äôs open-source ecosystem. The beauty of open\nsource? Anyone can contribute. Your task is to send patches (essentially\nthe output of \u003ccode\u003egit diff\u003c/code\u003e refurbushed into an email).\u003c/p\u003e","title":"Highlights from Linux Kernel Mentorship Program 2024 by Abdul Rahim"},{"content":"Introduction Computer memory is usually implemented as a file system. While tampering with data is easy to detect, unauthorized access to memory is a more complex task falling within the domain of Intrusion Detection Systems (IDS). Most intrusion detection systems focus on analyzing network traffic or using machine learning techniques to identify suspicious patterns, we explore if we can employ merkel trees for this task.\nIf unauthorized memory access cannot be detected, users would never know that the system was compromised. Detecting tampered files is straightforward: you can hash the contents of a file, and if the hash changes you might conclude that the file changed. However, detecting memory access is more complicated. Although Linux keeps track of the last access timestamp, available via the stat command1, it only tracks file accesses that use the read() syscall2.\nMerkel Trees Merkle trees are a data structure in which hashes are stored rather than data. Leaf nodes store hashes of particular data blocks, while other nodes store hashes of their children. Merkle trees are widely used in blockchains for their ability to detect data tampering. They provide a robust mechanism to detect tampering in multiple distinct data items. If any data item in a leaf node changes, the whole tree becomes invalidated because it changes the hashes of all nodes up the tree.\nFig. 1: A Merkle tree is a data structure in which each node contains a hash. All non-leaf nodes contain hashes of their children, and all leaf nodes contain hashes of the underlying data.\nMerkel tree as directory tree Now, what we want to do is to augment the directory tree as a merkel tree. To be exact the inode structure (See inode doc for more details).\nDoing this would make us have hashes for children in directory tree. And the benefit of that is whenever the child inodes change, the current inode would change. And there\u0026rsquo;s 2 fields that each node would contain, the last seen hash (expected hash) of it\u0026rsquo;s child and the current hash of the same child. And when the current hash changes to a different value from expected hash, then we can imply that the child inode changed.\nBut one question is that if memory can be accessed bare metal, then the protections done in software doesn\u0026rsquo;t really make any sense. One possible solution to this problem is employing encryption.\nThe encryption should be performed in hardware, and the memory access system calls should define protocols for decrypting the underlying memory. The same system call would update necessary variables of the file in question, such as access time. The memory access system call needs to be implemented so that when one accesses memory, the data is decrypted and other functions are performed.\nBelow is a detailed description.\nArchitecture File system in most operating systems follow a hierarchical structure. We augment this with a Merkle tree, where a node is attached to each file in the file system. These nodes form a Merkle tree, where each node contains the hash of its children (in the case of non-leaf nodes) or the hash of the file data (in the case of files). Additionally, a pollution flag is attached to each node to detect illegal access.\nEach node will also has an expected hash, which is the hash of the node when the subtree below that node was last valid.\nWorking The pollution flag is set if expected_hash != hash, which occurs only on illegal access. I will explain this in a moment.\nWhen a user or process requests memory, it will go through the memory access system call, requiring authentication. Once the authentication is successful, the underlying data is decrypted and returned, the access time is updated, and all the hashes up to the root are updated along with the expected hash (note that the expected hash changes on authorized access). The tree remains valid.\nIf the authentication fails, the memory is not returned, but the access time changes. Consequently, when the tree is re-evaluated, the hash of this node changes since it incorporates the access time, but the expected hash remains the same, setting the pollution flag for this node.\nSince the parent of this node uses its hash, the parent\u0026rsquo;s hash also changes. However, its expected hash remains the same, leading to its invalidation. This process continues up the tree, invalidating the whole tree.\nThe benefit of this approach is that all other nodes remain valid. If one tries to determine which file was accessed and the timestamp, it is easy to identify the exact file by following the invalid nodes from top to bottom.\nRefrences stat man page\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nread syscall\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"http://localhost:1313/personal_website/posts/merkel_trees_and_computer_memory/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003c!-- mine\nComputer memory is usually implemented as a file system. While tampering\nof data is easy to detect, unauthorised access to memory is a more\ncomplex task. A problem that lies in the domain of Intrusion Detection\nSystems. While, most intrusion detection focus on analyzing network\ntraffic, or machine learning techniques to identify suspicious patterns.\nWe propose a method that works within the system, providing robust\naccess detection.\n--\u003e\n\u003cp\u003eComputer memory is usually implemented as a file system. While tampering\nwith data is easy to detect, unauthorized access to memory is a more\ncomplex task falling within the domain of Intrusion Detection Systems\n(IDS). Most intrusion detection systems focus on analyzing network traffic or\nusing machine learning techniques to identify suspicious patterns, we\nexplore if we can employ merkel trees for this task.\u003c/p\u003e","title":"Merkel Trees and computer memory"},{"content":"Introduction When you install vim, a usual requirement as with all text editors is the ability to copy to/from system clipboard so you can lets say, copy something into your vim session from firefox or vice versa, however copy pasting in terminal editors is not as straight forward as with GUI editors. In vim if you want to copy something into an auxilary space (anticipating it would be used later, so you can paste from this auxilary space) is achieved by registers.\nThe register that represents system clipboard is + register. Anything that you copy into this register is available in system clipboard.\nHow to use registers to copy/paste To copy a text into a register, select it in visual mode and press \u0026quot;\u0026lt;register_name\u0026gt;y to yank the contents into the given register. And to paste the contents of a particular register at current position, use \u0026quot;\u0026lt;register_name\u0026gt;p.\nTo use system clipboard, you just have to substitute \u0026ldquo;+\u0026rdquo; for register name in the above commands.\nclipboard support But the + register wont work unless you have clipboard support with your vim installation. By default there is no clipboard support in vim.\nTo check if your vim installation has clipboard support use:\n1 2 3 $ vim --version | grep clipboard +clipboard +keymap +printer +vertsplit +ex_extra +mouse_netterm +syntax +xterm_clipboard or inside of vim, you can run the command:\n1 :echo has(\u0026#39;clipboard\u0026#39;) If the output is 0, your installation doesnt have clipboard support.\nCompiling vim Now there are 2 solutions to this problem:\nEither install gvim: Or compile vim from sources with clipboard support Let\u0026rsquo;s see how each of them can be done.\nInstall gvim To install gvim run:\nOn Debian:\n1 sudo apt install vim-gtk On Fedora\n1 sudo dnf install gvim To compile vim with clipboard support Below are the simple steps:\nStep 1: Grab the sources Clone the repository:\n1 2 git clone https://github.com/vim/vim.git vim cd vim Step 2: Install dependencies Install the required libraries and tools to build vim, for example gcc, x11 etc. Note that you only need them to compile vim and you are free to delete them once you are done.\nOn Debian:\n1 sudo apt install build-essential libx11-dev libncurses5-dev On Fedora:\n1 2 3 4 sudo dnf groupinstall \u0026#34;Development Tools\u0026#34; sudo yum install gcc sudo yum groupinstall \u0026#34;X Software Development\u0026#34; sudo dnf install libX11-devel ncurses-devel Also, you need to remove the existing installation(if any).\nOn Debian\n1 sudo apt remove vim On Fedora\n1 sudo dnf remove vim gvim Step 3: Configure and Compile Configure vim with features of your choice\n1 2 3 4 5 6 7 ./configure \\\\ --enable-cscope \\\\ --enable-gui=auto \\\\ --enable-gtk2-check \\\\ --enable-gnome-check \\\\ --with-features=huge \\\\ --with-x Then compile and install with:\n1 2 make sudo make install Conclusion In this article we learned how can we compile vim with clipboard support, you can also tweak configuration according to your requirements. There are many configuration options available.\n","permalink":"http://localhost:1313/personal_website/posts/how_to_compile_vim_with_clipboard_support/","summary":"\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eWhen you install vim, a usual requirement as with all text editors is\nthe ability to copy to/from system clipboard so you can lets say, copy\nsomething into your vim session from firefox or vice versa, however copy\npasting in terminal editors is not as straight forward as with GUI\neditors. In vim if you want to copy something into an auxilary space\n(anticipating it would be used later, so you can paste from this\nauxilary space) is achieved by \u003cstrong\u003eregisters\u003c/strong\u003e.\u003c/p\u003e","title":"How to compile vim with clipboard support"},{"content":" Introduction I had an unused phone lying around for some time, and I began contemplating how I could repurpose it. This led me to reflect on the impressive performance of modern smartphones and consider whether they could be utilized as servers.\nSmartphones are equipped with ARM-based processors and run on Android, which is itself built on the Linux kernel. ARM processors are renowned for their energy efficiency1 and have recently found applications in the server space2.\nAs someone who enjoys exploring the full potential of devices, I embarked on a journey to discover how I could leverage the full potential of smartphones.\nSetup Although, you would like to run your programs on phones, but programming on phones typing on screen is a horrifying idea. Fortunately, you dont have to type on your phone, what you can do is you can access its terminal, using protocols like ssh/telnet etc.\nSo, firstly you would need a terminal to control a machine remotely. Unfortunately, there are not, alot of choices available in phone space when it comes to terminal emulators. Termux is one of the few available options.\nAfter you manage to open a terminal remotely, then from there its pretty frictionless. You can install the software of your choice and write, compile and run your programs. You might also find it helpful to root your phone for root privilages, which will help you run all commands. But please beware that rooting can null your warrenty, check with local expert. If termux does\u0026rsquo;nt work for you then there are also other options like kali net hunter.\nSo, in total, we need to install termux, then we would setup ssh.\nTermux Termux is an open source terminal emulator for android. In essence, it provides you with a linux environment, within android, The only difference between actual linux environment and termex is that it is not FHS(File System Hierarcy) compliant, i.e. it does not strictly follow linux file system conventions. The consequences of that are that #! /usr/bin/sh may not work, so you have to watch out the paths. Other than that, it supports almost all commands on linux.\nMoreover, It is an app that does\u0026rsquo;nt interfere with your system so you can run your android as normal, moreover it runs without root privilages. It comes with a large repository of software found at packages.termux.dev.\nBelow are the steps to setup ssh in termux Step 1: Download texmux on playstore, f-droid or from github releases\nStep 2: Update using pkg:\n1 2 pkg update # update the repositories pkg upgrade # upgrade all to latest versions Run this commands\nStep 3: Install ssh 1 pkg install ssh install ssh\nStep 4: Set a password Setup a password that you will use to login\n1 passwd set password and note username\nStep 5: Note your username You will require username and ip address when logging in using ssh, hence note them. Run the command whoami the know your username. This will generally start with \u0026ldquo;a0_\u0026rdquo;\n1 whoami Step 6: Note your IP address You can check your IP address in:\n1 2 3 settings \u0026gt; Wi-Fi \u0026gt; click on the (i) button, on the wifi you are connected to and Look for IPv4 address Step 7: Run ssh doemon in termux On your phone, run the ssh daemon using\n1 sshd Step 8: Login form your computer On your computer, use the following command to login into your phone and access its terminal\n1 ssh \u0026lt;user_name\u0026gt;@\u0026lt;IP_address\u0026gt; -p 8022 The username and IP address we already determined in step 5 and 6 resp. Note that it will promt you for password\nAftermath You can use scp command to transfer files between your computer and phone. In case you want to do development, there are a number of programming packages available in termux, you can find rust, nodejs, python, C/C++ and tools for many other programming languages.\nConclusion So, now you have successfully installed ssh in your android phone. You might find it useful to install vim, git, gcc etc. There is a large repository of packages in termux, which covers pretty much everything your would need.\nFurther Reads Simili, Emanuele, et al. \u0026ldquo;Power Efficiency in HEP (x86 vs. arm).\u0026rdquo; Power (W) 350.400 (2023): 450\u0026#160;\u0026#x21a9;\u0026#xfe0e;\narm_server\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"http://localhost:1313/personal_website/posts/how_to_turn_your_old_smartphone_into_a_home_server/","summary":"\u003c!--\n---\ndate: '2025-07-15T22:33:11+05:30'\ndate: ''\ntitle: 'How_to_turn_your_old_smartphone_into_a_home_server'\n---\n--\u003e\n\u003ch2 id=\"introduction\"\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eI had an unused phone lying around for some time, and I began\ncontemplating how I could repurpose it. This led me to reflect on the\nimpressive performance of modern smartphones and consider whether they\ncould be utilized as servers.\u003c/p\u003e\n\u003cp\u003eSmartphones are equipped with ARM-based processors and run on Android,\nwhich is itself built on the Linux kernel. ARM processors are renowned\nfor their energy efficiency\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e1\u003c/a\u003e\u003c/sup\u003e and have recently found\napplications in the server space\u003csup id=\"fnref:2\"\u003e\u003ca href=\"#fn:2\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e2\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e","title":"How to turn your old smartphone into a home server"}]